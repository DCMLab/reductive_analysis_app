/*! For license information please see app.js.LICENSE.txt */
(()=>{var __webpack_modules__={729:t=>{t.exports=function(t){var o=t.createGain(),r=o._voltage=function(t){var e=t.createBufferSource(),i=t.createBuffer(1,2,t.sampleRate);return i.getChannelData(0).set(n),e.buffer=i,e.loop=!0,e}(t),s=i(r),a=i(r),l=i(r);return o._startAmount=i(a),o._endAmount=i(l),o._multiplier=i(s),o._multiplier.connect(o),o._startAmount.connect(o),o._endAmount.connect(o),o.value=s.gain,o.startValue=a.gain,o.endValue=l.gain,o.startValue.value=0,o.endValue.value=0,Object.defineProperties(o,e),o};var e={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(t){var e=this._multiplier.gain,n=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(t),this._decayFrom=this._decayFrom=t+this.attack,this._startedAt=t;var r=this.sustain;e.cancelScheduledValues(t),n.cancelScheduledValues(t),i.cancelScheduledValues(t),i.setValueAtTime(0,t),this.attack?(e.setValueAtTime(0,t),e.linearRampToValueAtTime(1,t+this.attack),n.setValueAtTime(1,t),n.linearRampToValueAtTime(0,t+this.attack)):(e.setValueAtTime(1,t),n.setValueAtTime(0,t)),this.decay&&e.setTargetAtTime(r,this._decayFrom,o(this.decay))}},stop:{value:function(t,e){e&&(t-=this.release);var n=t+this.release;if(this.release){var i=this._multiplier.gain,r=this._startAmount.gain,s=this._endAmount.gain;i.cancelScheduledValues(t),r.cancelScheduledValues(t),s.cancelScheduledValues(t);var a=o(this.release);if(this.attack&&t<this._decayFrom){var l=function(t,e,n,i,o){var r=0+(o-n)/(i-n)*1;return r<=0&&(r=0),r>=1&&(r=1),r}(0,0,this._startedAt,this._decayFrom,t);i.linearRampToValueAtTime(l,t),r.linearRampToValueAtTime(1-l,t),r.setTargetAtTime(0,t,a)}s.setTargetAtTime(1,t,a),i.setTargetAtTime(0,t,a)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(t){this._voltage.onended=t}}},n=new Float32Array([1,1]);function i(t){var e=t.context.createGain();return t.connect(e),e}function o(t){return Math.log(t+1)/Math.log(100)}},158:t=>{"use strict";t.exports={decode:function(t,e){for(var n,i,o,r=t.replace(/[^A-Za-z0-9\+\/]/g,""),s=r.length,a=e?Math.ceil((3*s+1>>2)/e)*e:3*s+1>>2,l=new Uint8Array(a),c=0,u=0,d=0;d<s;d++)if(i=3&d,c|=((o=r.charCodeAt(d))>64&&o<91?o-65:o>96&&o<123?o-71:o>47&&o<58?o+4:43===o?62:47===o?63:0)<<18-6*i,3===i||s-d==1){for(n=0;n<3&&u<a;n++,u++)l[u]=c>>>(16>>>n&24)&255;c=0}return l}}},799:t=>{"use strict";t.exports=function(t,e){return new Promise((function(n,i){var o=new XMLHttpRequest;e&&(o.responseType=e),o.open("GET",t),o.onload=function(){200===o.status?n(o.response):i(Error(o.statusText))},o.onerror=function(){i(Error("Network Error"))},o.send()}))}},665:(t,e,n)=>{"use strict";var i=n(158),o=n(799);function r(t){return function(e){return"string"==typeof e&&t.test(e)}}function s(t,e){return"string"==typeof t?t+e:"function"==typeof t?t(e):e}function a(t,e,n,i){var o,r=e instanceof ArrayBuffer?l:c(e)?u:(o=e)&&"function"==typeof o.then?d:h(e)?p:function(t){return t&&"object"==typeof t}(e)?f:g(e)?m:v(e)?y:b(e)?_:null;return r?r(t,e,n||{}):i?Promise.resolve(i):Promise.reject("Source not valid ("+e+")")}function l(t,e,n){return new Promise((function(n,i){t.decodeAudioData(e,(function(t){n(t)}),(function(){i("Can't decode audio data ("+e.slice(0,30)+"...)")}))}))}a.fetch=o;var c=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function u(t,e,n){var i=s(n.from,e);return a(t,a.fetch(i,"arraybuffer"),n)}function d(t,e,n){return e.then((function(e){return a(t,e,n)}))}var h=Array.isArray;function p(t,e,n){return Promise.all(e.map((function(e){return a(t,e,n,e)})))}function f(t,e,n){var i={},o=Object.keys(e).map((function(o){if(n.only&&-1===n.only.indexOf(o))return null;var r=e[o];return a(t,r,n,r).then((function(t){i[o]=t}))}));return Promise.all(o).then((function(){return i}))}var g=r(/\.json(\?.*)?$/i);function m(t,e,n){var i=s(n.from,e);return a(t,a.fetch(i,"text").then(JSON.parse),n)}var v=r(/^data:audio/);function y(t,e,n){var o=e.indexOf(",");return a(t,i.decode(e.slice(o+1)).buffer,n)}var b=r(/\.js(\?.*)?$/i);function _(t,e,n){var i=s(n.from,e);return a(t,a.fetch(i,"text").then(x),n)}function x(t){var e=t.indexOf("MIDI.Soundfont.");if(e<0)throw Error("Invalid MIDI.js Soundfont format");e=t.indexOf("=",e)+2;var n=t.lastIndexOf(",");return JSON.parse(t.slice(e,n)+"}")}t.exports&&(t.exports=a),"undefined"!=typeof window&&(window.loadAudio=a)},898:(t,e,n)=>{"use strict";n.r(e),n.d(e,{naturalize_notes:()=>s});var i=n(974),o=n(714),r=n(624);function s(){if(selected[0].classList.contains("note"))if(0!=(0,r.draw_context_of)(selected[0]).layer_number){var t=selected.concat(extraselected);t.forEach(a),t.forEach(o.dB)}else console.log("No modifications allowed to original layer.");else console.log("Can only naturalize notes.")}function a(t){let e=t.querySelector(".accid");if(!e)return void console.log("No accidental to remove");!function(t){for(var e=t.parentElement;!e.classList.contains("note");)e=e.parentElement;var n,i=(0,r.get_id)(e);(n=(0,r.get_by_id)(mei,i)).removeAttribute("accid"),Array.from(n.children).filter((t=>"accid"==t.tagName)).forEach((t=>n.removeChild(t)))}(e),e.classList.add("hidden");let n=(0,r.get_id)(e);var o=(0,i.kg)();for(const t of o){let e=t.id_prefix+n,i=document.getElementById(e);i&&i.classList.add("hidden")}}document.getElementById("naturalizebutton").addEventListener("click",s)},974:(t,e,n)=>{"use strict";n.d(e,{Jt:()=>q,lk:()=>z,qG:()=>$,i9:()=>P,lC:()=>H,Yu:()=>Q,kg:()=>F,ro:()=>K,p8:()=>X,LO:()=>J,jA:()=>et,tu:()=>Z,DR:()=>G,k4:()=>Y,xM:()=>U,Ln:()=>tt});var i=n(865),o=n.n(i),r=n(803),s=n(83),a=n(787),l=n(360),c=n(944),u=n(359),d=n(480),h=n(863),p=(n(121),n(879),n(126),n(238)),f=n.n(p),g=n(624);function m(t,e,n){if(("beam"==e.tagName||"measure"==e.tagName)&&-1==n.findIndex((t=>t.nodeType==Node.ELEMENT_NODE&&("note"==t.tagName||t.getElementsByTagName("note").length>0))))return null;var i=e.cloneNode();return t?i.setAttribute("corresp",e.getAttribute("xml:id")):i.setAttribute("copyof",e.getAttribute("xml:id")),n.forEach((t=>i.appendChild(t))),i}function v(t,e){if(e.nodeType!=Node.ELEMENT_NODE)return[e.cloneNode(),!1];var n=document.getElementById((0,g.id_in_svg)(t,(0,g.get_id)(e)));if("note"==e.tagName&&(!n||n.classList.contains("hidden")))return[note_to_space(mei,e),!0];var i=Array.from(e.childNodes).map((e=>v(t,e))),o=i.map((t=>t[0])).filter((t=>null!=t)),r=o.length!=e.childNodes.length||null!=i.find((t=>t[1]));return[m(r,e,o),r]}function y(t=null){t||(t=F()[0]);var e=t.mei_score,[n,i]=v(t,e),o=e.parentElement.getElementsByTagName("score").length+"-";return(0,g.prefix_ids)(n,o),e.parentNode.insertBefore(n,e.nextSibling),n}function b(t,e){if(!t.contains(e))return console.log("Score element not in MEI, aborting"),null;var n,i=(0,g.clone_mei)(t),o=(n=e.hasAttribute("xml:id")?(0,g.get_by_id)(i,e.getAttribute("xml:id")):i.getElementsByTagName("score")[0]).parentElement;for(let t of Array.from(o.getElementsByTagName("score")))t!==n&&o.removeChild(t);return i}var _=n(714);function x(t,e,n){var i=[],o=t.svg_elem,r=t.id_prefix,s=r+n.getAttribute("xml:id"),a=(0,g.relation_type)(n),l=(0,g.relation_primaries)(e,n).map((e=>document.getElementById((0,g.id_in_svg)(t,(0,g.node_to_note_id)(e))))),c=(0,g.relation_secondaries)(e,n).map((e=>document.getElementById((0,g.id_in_svg)(t,(0,g.node_to_note_id)(e))))),u=l.concat(c);if(u.sort(((t,e)=>{if(!t)return-1;if(!e)return 1;var n=(0,g.note_coords)(t),i=(0,g.note_coords)(e);return n[0]-i[0]?n[0]-i[0]:n[1]-i[1]})),!u[0])return console.log("Note missing, relation not drawn"),null;var d=(0,g.roundedHull)(u.map(g.note_coords));return d.setAttribute("id",s),""!=r&&d.setAttribute("oldid",n.getAttribute("xml:id")),d.classList.add("relation"),d.setAttribute("type",a),(0,_.U2)()&&(0,_.up)(d),d.onwheel=t=>{var e=t.target;return(0,g.flip_to_bg)(e),d.onmouseout(),!1},d.onclick=function(t){(0,_.dB)(d,t.shiftKey)},d.onmouseover=function(t){l.forEach((t=>{t.classList.add("extrahover")})),c.forEach((t=>{t.classList.add("selecthover")}))},d.onmouseout=function(t){l.forEach((t=>{t.classList.remove("extrahover")})),c.forEach((t=>{t.classList.remove("selecthover")}))},(0,g.add_to_svg_bg)(o,d),i.push(d),i}function w(t,e,n){var i=[],o=t.svg_elem,r=t.id_prefix+n.getAttribute("xml:id"),s=(0,g.relation_type)(n),a=(0,g.relation_allnodes)(e,n).map((e=>document.getElementById(t.id_prefix+(0,g.get_id)(e))));if(-1!=a.indexOf(null))return console.log("Missing relation, not drawing metarelation"),[];var l=a.map(g.get_metarelation_target),c=(0,g.average)(l.map((t=>t[0]))),u=a.concat([o.getElementsByClassName("system")[0]]).map((t=>t.getBBox().y)).sort(((t,e)=>t>e))[0]-500;return l.push([c,u]),(n=(0,g.g)()).setAttribute("id",r),n.classList.add("metarelation"),n.setAttribute("type",s),n.appendChild((0,g.circle)([c,u],200)),l.forEach((t=>{var e=(0,g.line)([c,u],t);n.appendChild(e)})),(0,_.U2)()&&(0,_.up)(n),n.onwheel=t=>{var e=t.target;return(0,g.flip_to_bg)(e.closest("g")),n.onmouseout(),!1},n.onclick=function(t){(0,_.dB)(n,t.shiftKey)},n.onmouseover=function(t){a.forEach((t=>{t.classList.add("relationhover")}))},n.onmouseout=function(t){a.forEach((t=>{t.classList.remove("relationhover")}))},(0,g.add_to_svg_bg)(o,n),i.push(n),i}var S,E,A,T,k,C=n(506),D=n(235);window.selected=[],window.extraselected=[],n(898),n(686),window.mei=null;var N,M,j=new FileReader,I=[],L=[],O=[],B=[];function P(t,e,n=!1){if(console.debug("Using globals: selected, extraselected, mei, undo_actions"),0!=selected.length||0!=extraselected){var i,o;if(selected.concat(extraselected)[0].classList.contains("relation")){var r=[];selected.concat(extraselected).forEach((e=>{r.push([e.getAttribute("type"),t]);var n=(0,g.id_or_oldid)(e),i=[(0,g.get_by_id)(document,n)].concat((0,g.get_by_oldid)(document,n));i.forEach((e=>e.setAttribute("type",t))),(0,g.get_by_id)(mei,n).getElementsByTagName("label")[0].setAttribute("type",t),i.forEach(_.up)})),(0,_.cE)(),I.push(["change relation type",r.reverse(),selected,extraselected])}else if(selected.concat(extraselected)[0].classList.contains("note")){(0,g.check_for_duplicate_relations)(t,extraselected,selected);var s=[],a=extraselected.map((t=>(0,g.add_mei_node_for)(E,t))),l=selected.map((t=>(0,g.add_mei_node_for)(E,t)));s.push(a.concat(l)),[i,o]=function(t,e,n,i,o){var r=[],s=t.getRootNode().createElement("node");s.setAttribute("type","relation");var a,l=t.getRootNode().createElement("label");void 0!==i&&l.setAttribute("type",i),s.appendChild(l),a=void 0===o?"he-"+(0,g.random_id)(5):o,s.setAttribute("xml:id",a),t.appendChild(s),r.push(s);for(var c=0;c<e.length;c++)(u=mei.createElement("arc")).setAttribute("from","#"+a),u.setAttribute("to","#"+e[c].getAttribute("xml:id")),u.setAttribute("type","primary"),t.appendChild(u),r.push(u);for(c=0;c<n.length;c++){var u;(u=mei.createElement("arc")).setAttribute("from","#"+a),u.setAttribute("to","#"+n[c].getAttribute("xml:id")),u.setAttribute("type","secondary"),t.appendChild(u),r.push(u)}return[a,r.reverse()]}(E,a,l,t,e),s.push(o);for(var c=0;c<O.length;c++){let t=x(O[c],E,(0,g.get_by_id)(E.getRootNode(),i));t&&(s.push(t),(0,g.mark_secondaries)(O[c],E,(0,g.get_by_id)(E.getRootNode(),i)))}I.push(["relation",s.reverse(),selected,extraselected]),selected.concat(extraselected).forEach(_.dB)}n||(0,D.I$)(),(0,_.e6)()}}function z(t){var e=selected.concat(extraselected);if(!(e.length<3||extraselected.length>2)){e.sort(((t,e)=>{var[n,i]=(0,g.note_coords)(t),[o,r]=(0,g.note_coords)(e);return n-o}));var n=e.shift(),i=e.pop();selected=selected.filter((t=>t==n||t==i)),P(u.combo_conf[t].outer),extraselected=[n,i],selected=e,P(u.combo_conf[t].total),(0,_.e6)()}}function $(t,e,n=!1){if(console.debug("Using globals:  mei_graph, selected, extraselected"),0!=selected.length||0!=extraselected){var i=(0,g.get_class_from_classlist)(selected.concat(extraselected)[0]);if("relation"==i||"metarelation"==i){var o,r,s=[],a=extraselected.map((t=>(0,g.get_by_id)(E.getRootNode(),(0,g.id_or_oldid)(t)))),l=selected.map((t=>(0,g.get_by_id)(E.getRootNode(),(0,g.id_or_oldid)(t)))),[o,r]=function(t,e,n,i,o){var r=[],s=t.getRootNode().createElement("node");s.setAttribute("type","metarelation");var a,l=t.getRootNode().createElement("label");void 0!==i&&l.setAttribute("type",i),s.appendChild(l),a=void 0===o?"he-"+Math.floor(Math.random()*(1<<20)).toString(16):o,s.setAttribute("xml:id",a),t.appendChild(s),r.push(s);for(var c=0;c<e.length;c++)(u=t.getRootNode().createElement("arc")).setAttribute("from","#"+a),u.setAttribute("to","#"+e[c].getAttribute("xml:id")),u.setAttribute("type","primary"),t.appendChild(u),r.push(u);for(c=0;c<n.length;c++){var u;(u=t.getRootNode().createElement("arc")).setAttribute("from","#"+a),u.setAttribute("to","#"+n[c].getAttribute("xml:id")),u.setAttribute("type","secondary"),t.appendChild(u),r.push(u)}return[a,r.reverse()]}(E,a,l,t,e);s.push(r);for(var c=0;c<O.length;c++)s.push(w(O[c],E,(0,g.get_by_id)(E.getRootNode(),o)));I.push(["metarelation",s,selected,extraselected]),selected.concat(extraselected).forEach(_.dB),(0,_.e6)(),n||(0,D.I$)()}}}function R(){console.debug("Using globals: mei"),function(t,e,n){console.debug("Using globals: document, window");var i=new Blob([t],{type:n});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i,e);else{var o=document.createElement("a"),r=URL.createObjectURL(i);o.href=r,o.download=e,document.body.appendChild(o),o.click(),setTimeout((()=>{document.body.removeChild(o),window.URL.revokeObjectURL(r)}),0)}}((new XMLSerializer).serializeToString(mei),N+".mei","text/xml")}function H(t){console.debug("Using globals: mei_graph, mei, selected, extraselected, document");var e=Array.from(E.getElementsByTagName("node")),n=e.filter((t=>"relation"==t.getAttribute("type"))),i=e.filter((t=>"metarelation"==t.getAttribute("type")));n.forEach((e=>{x(t,E,e)&&(0,g.mark_secondaries)(t,E,e)})),i.forEach((e=>w(t,E,e)))}function U(t=!1,e=O[0]){e.svg_elem;var n=b(mei,e.layer.score_elem);return Array.from(n.getElementsByTagName("note")).forEach((i=>{let o=document.getElementById((0,g.id_in_svg)(e,(0,g.get_id)(i)));if(!o||o.classList.contains("hidden")){var r=i.parentNode;if(t&&!["chord","bTrem","fTrem"].includes(r.tagName)){var s=(0,g.note_to_rest)(n,i);r.insertBefore(s,i)}r.removeChild(i)}})),Array.from(n.getElementsByTagName("chord")).forEach((t=>{t.parentNode,0==t.getElementsByTagName("note").length&&t.parentNode.removeChild(t)})),n}function q(t,e=!1,n=!1){var i;i=e?new_sliced_layer(t,n):y(t);let o=b(mei,i);var[r,s]=V(o);if(!s)return console.log("Verovio could not generate SVG from MEI."),!1;var a=(0,g.new_layer_element)(),[l,c]=(0,g.new_view_elements)(a);c.innerHTML=s;var u={mei:o,layer_elem:a,layer_number:B.length,score_elem:i,id_mapping:(0,g.get_id_pairs)(i),original_score:!1,number_of_views:1};B.push(u);var d={mei_score:i,svg_elem:c,view_elem:l,layer:u,layer_number:u.layer_number,view_number:0,id_prefix:"",zoom:1,reductions:[]};d.id_prefix=O.length,W(d)}function W(t){t.measure_map=(0,C.Vk)(t),O.reverse(),O.push(t),O.reverse(),(0,_.N7)(t);for(let e of t.svg_elem.getElementsByClassName("note"))e.onclick=function(t){(0,_.dB)(e,t.shiftKey)};for(let e of t.svg_elem.getElementsByClassName("staff")){let[t,n]=(0,C.e6)(e);e.y_to_p=t,e.p_to_y=n}H(t),(0,_.rp)()}function V(t){var e=(new XMLSerializer).serializeToString((0,g.sanitize_xml)(t));return[e,S.renderData(e,{pageWidth:2e4,pageHeight:1e4,breaks:"none"})]}function Y(t){var[e,n]=(0,g.new_view_elements)(t.layer.layer_elem),i=U(!1,t),[o,r]=V(i);if(!r)return console.log("Verovio could not generate SVG from MEI."),!1;n.innerHTML=r,t.layer.number_of_views+=1;var s={mei_score:t.mei_score,svg_elem:n,view_elem:e,layer:t.layer,layer_number:t.layer.layer_number,view_number:t.layer.number_of_views-1,id_prefix:"",zoom:1,reductions:[]};s.id_prefix=O.length,(0,g.prefix_ids)(s.svg_elem,s.id_prefix),W(s)}window.addEventListener("beforeunload",(function(t){var e="Leave app? You may lose unsaved changes.";return t.preventDefault(),t.returnValue=e,e})),o()(document).ready((function(){document.getElementsByTagName("html")[0].classList.remove("loader"),Object.keys(c.type_conf).forEach(_.A4),Object.keys(l.meta_conf).forEach(_.XR),Object.keys(u.combo_conf).forEach(_.rI),(0,_.XG)(),o()("#selected_things").hide(),o()("#hull_controller").on("change",_.PB),(0,_.K5)(document.getElementById("relations_panel")),(0,_.rp)(),[["delete_all","deletebutton"],["add_bookmark","addbookmarkbutton"],["show_hide_notation","equalizebutton"],["toggle_type_shades","shadesbutton"],["toggle_add_note","addnotebutton"],["jump_to_next_bookmark","previousbookmarkbutton"],["jump_to_previous_bookmark","nextbookmarkbutton"],["jump_to_context_below","previouscontextbutton"],["jump_to_context_above","nextcontextbutton"]].forEach((t=>document.getElementById(t[1]).setAttribute("title",a.custom_conf[t[0]]||s.navigation_conf[t[0]]||r.action_conf[t[0]]))),o()("#custom_type").select2({data:(0,g.arrayToSelect2)(d.type_full_conf),width:"300px",tags:!0,insertTag:function(t,e){t.push(e)},placeholder:"Select relation type",allowClear:!0,matcher:g.matcher}),o()("#custom_type").val(null).trigger("change"),o()("#meta_custom_type").select2({data:(0,g.arrayToSelect2)(h.meta_full_conf),width:"300px",tags:!0,insertTag:function(t,e){t.push(e)},placeholder:"Select metarelation type",allowClear:!0,matcher:g.matcher}),o()("#meta_custom_type").val(null).trigger("change"),(0,_.hh)()})),window.onerror=function(t,e,n){return document.getElementsByTagName("html")[0].classList.remove("loader"),alert(`An error occured: ${t}\n Please report the relevant console log as a GitHub issue.\n The app will try to continue running nonetheless.`),!1},document.getElementById("relationbutton").addEventListener("click",P),document.getElementById("downloadbutton").addEventListener("click",R),document.getElementById("svgdownloadbutton").addEventListener("click",R),document.getElementById("fileupload").addEventListener("change",(function(){console.debug("Using globals: selected_extraselected, upload, reader, filenmae");var t=new(f())("Modal",{id:"loader-modal",title:"Loading...",content:"Please wait...",closeOnEsc:!1,closeOnClick:!1,closeButton:!1});selected=[],extraselected=[];var e=document.getElementById("fileupload");1==e.files.length?(j.onload=function(e){k=j.result,setTimeout((()=>{t.open(),setTimeout((()=>{!function(t){console.debug("Using globals data, parser, mei, jquery document, document, mei_graph, midi, changes, undo_cations, redo_actions, reduce_actions, rerendered_after_action, shades");var e=new DOMParser;try{mei=e.parseFromString(k,"text/xml"),mei.getElementsByTagName("parsererror").length>0&&(console.log("This is not a valid XML or MEI file. However it could be ABC or Humdrum, for instance"),t.close())}catch(e){t.close(),o()("#fileupload").val("")}if(S=new verovio.toolkit,"http://www.music-encoding.org/ns/mei"!=mei.documentElement.namespaceURI){try{S.renderData(k,{pageWidth:2e4,pageHeight:1e4,breaks:"none"})}catch(e){if(!new_svg)return console.log("Verovio could not generate SVG from non-MEI file."),t.close(),o()("#fileupload").val(""),!1}k=S.getMEI(),e=new DOMParser;try{mei=e.parseFromString(k,"text/xml")}catch(e){return alert("Cannot parse this XML file as valid MEI."),t.close(),o()("#fileupload").val(""),!1}}else mei=(0,g.fix_synonyms)(mei);try{E=function(){console.debug("Using globals: mei");var t=mei.getElementsByTagName("graph");if(t.length)return t[0];var e=mei.createElement("graph");return e.setAttribute("type","directed"),mei.getElementsByTagName("body")[0].appendChild(e),e}()}catch(e){return alert("Cannot parse this XML file as valid MEI."),t.close(),o()("#fileupload").val(""),!1}O=[],B=[],document.getElementById("layers").innerHTML="",o()("#hull_controller").val(200),O.hullPadding=o()("#hull_controller").val();var n=Array.from(mei.getElementsByTagName("body")[0].getElementsByTagName("score"));for(let t in n){let e=n[t],o=b(mei,e),[c,u]=V(o);if(!u)return console.log("Verovio could not generate SVG from MEI."),!1;var i=(0,g.new_layer_element)(),[r,s]=(0,g.new_view_elements)(i);s.innerHTML=u;var a={mei:o,layer_elem:i,layer_number:0,score_elem:e,id_mapping:(0,g.get_id_pairs)(e),original_score:0==t,number_of_views:1};B.push(a);var l={mei_score:e,svg_elem:s,view_elem:r,layer:a,layer_number:0,view_number:0,id_prefix:"",zoom:1,reductions:[]};0==t?(A=S.renderToMIDI(),T=A):l.id_prefix=O.length,W(l)}I=[],L=[],M=0,(0,_.U2)()||(0,_.XG)(),document.onkeypress=function(t){(0,_.Z6)(t)},document.onkeydown=_.qY,document.onkeyup=_.$Z,document.getElementById("layers").onclick=_.oq,document.dispatchEvent(new Event("scoreload")),(0,_.Pw)()}(t),t.close(t),(0,_.bf)(),(0,g.indicate_current_context)()}),1e3)}),1e3)},j.readAsText(e.files[0]),""==(N=e.files[0].name.split(".").slice(0,-1).join("."))&&(N=e.files[0].name)):t.close()})),console.log("Main webapp library is loaded");const F=()=>O,K=()=>E,X=()=>T,G=()=>S,Q=()=>k,Z=()=>I,J=()=>L,tt=t=>L=t,et=()=>M},36:(t,e,n)=>{"use strict";n.r(e),n.d(e,{shades_array:()=>i,type_keys:()=>o,type_shades:()=>r,meta_keys:()=>s,meta_shades:()=>a,combo_keys:()=>l,button_shades:()=>c,action_conf:()=>u,navigation_conf:()=>d,custom_conf:()=>h,meta_conf:()=>p,type_conf:()=>f,combo_conf:()=>g,type_synonym:()=>m,type_full_conf:()=>v,meta_full_conf:()=>y,hide_classes:()=>b,strip_mei_tags:()=>_,strip_xml_tags:()=>x,CONFIG_OK:()=>w});const i=n(617).K2I,o={},r={},s={},a={},l={},c={},u={undo:"U",redo:"I",deselect_all:"d",delete_all:"D",add_bookmark:"^",move_relation_to_front:"z",reduce_relations:"r",show_hide_notation:"s",toggle_type_shades:"h",select_same_notes:"+",toggle_add_note:"x",naturalize_note:"Z"},d={pan_left:"[",pan_right:"]",jump_to_next_bookmark:"{",jump_to_previous_bookmark:"}",jump_to_context_below:",",jump_to_context_above:".",toggle_palette:"-",zoom_out:"(",zoom_in:")",switch_context_on_hover:!1},h={relation:"R",meta_relation:"M"},p={context:{key:"c",colour:0},layer:{key:"l",colour:6},phrase:{key:"r",colour:2},section:{key:"t",colour:3}},f={repeat:{key:"e",colour:0},passing:{key:"p",colour:6},neighbour:{key:"n",colour:2},harmonic:{key:"i",colour:3},arpeggio:{key:"a",colour:4},urlinie:{key:"u",colour:5},bassbrechung:{key:"b",colour:5}},g={passing_comb:{key:"P",total:"passing",outer:"arpeggio"},neighbour_comb:{key:"N",total:"neighbour",outer:"repeat"}},m={prolongation:"passing",arp:"arpeggio",bassbrech:"bassbrechung"},v=["neighbour","repetition","arpeggiation","passing","back_relating_dominant","displacement","register_transfer","56_shift","added_root","initial_ascent","arpeggiated_ascent","urlinie","urlinie_transference","bassbrechung_component","coupling","voice_exchange_component","voice_exchange_component_chromaticized","mixture","phrygian_ii"],y=["auxiliary_cadence","superposition","reaching_over","urlinie_meta","ursatz","bassbrechung","bassbrechung_transference","ursatz_transference","unfolding","motion_into_the_inner_voice","motion_from_the_inner_voice","linear_intervallic_progression","linear_intervallic_progression_module","interruption","interruption_branch_1","interruption_branch_2","voice_exchange","motivic_parallelism","motive","contradiction","indeterminacy","parallel_fifths","parallel_octaves"],b=["barLineAttr","fermata","rest","stem","flag","tie","artic","slur","dynam","tempo","tupletNum","dir","verse"],_=["label","labelAbbr","tempo"],x=[],w=!0},506:(t,e,n)=>{"use strict";n.d(e,{Vk:()=>l,e6:()=>u,f5:()=>f,r4:()=>g,xy:()=>m,Kd:()=>v,M_:()=>y,TU:()=>b});var i=n(974),o=n(714),r=n(235),s=n(624),a="cdefgab";function l(t){let e=t.svg_elem;var n=Array.from(e.getElementsByClassName("measure")),i=(n.length&&Array.from(n[0].getElementsByClassName("staff")),Array.from(e.getElementsByClassName("note")),n.map((t=>[t.getBBox().x+t.getBBox().width,t])));return i.sort(((t,e)=>t[0]-e[0])),i}function c(t){let e=t.children[2].getBBox();return e.y+e.height/2}function u(t){const e=c(t),n=-Math.abs(function(t){let e=t.children[2].getBBox(),n=t.children[1].getBBox();return Math.abs(e.y-n.y)}(t)),i=n/2,o=t.getElementsByClassName("note");var r;if(o.length>0)r=o[0];else{const n=t.closest(".system");r=Array.from(n.getElementsByClassName("staff")).find((t=>c(t)==e&&t.getElementsByClassName("note").length>0)).getElementsByClassName("note")[0]}const l=function(t){var e=(0,s.get_by_id)(mei,(0,s.get_id)(t)),n=e.getAttribute("pname");return 7*e.getAttribute("oct")+a.indexOf(n)}(r)-Math.floor(((0,s.note_coords)(r)[1]-e)/i);return[t=>{var n=Math.floor((t+i/2-e)/i)+l,o=Math.floor(n/7);return[a[(0,s.mod)(n,7)],o]},(t,n)=>{var o=7*n+a.indexOf(t);return e+(o-l)*i}]}function d(){var t=(0,o.c)();const e=function(){var t=(0,o.c)(),e=t.svg_elem.children[0],n=t.svg_elem.getElementsByClassName("system")[0],i=e.createSVGPoint();return i.x=(0,o.jM)(),i.y=(0,o.hT)(),i.matrixTransform(n.parentElement.getScreenCTM().inverse())}(),n=function(t,e){let n=t.measure_map.find((t=>t[0]>e.x));return n?n[1]:void 0}(t,e);if(!n)return console.log("Pointer outside measures"),[null,null,null];const i=function(t,e,n){var i=Array.from(n.getElementsByClassName("staff")).map((t=>[c(t),t]));i.sort(((t,e)=>t[0]-e[0]));var o=i.findIndex((t=>e.y<t[0]));if(0==o)return i[0][1];if(-1==o)return i[i.length-1][1];const r=(0,s.average2)(i[o-1][0],i[o][0]);return e.y<r?i[o-1][1]:i[o][1]}(0,e,n),[r,a]=function(t,e,n){return n.getElementsByClassName("note")[0],n.y_to_p(e.y)}(0,e,i),l=function(t,e,n){var i=Array.from(n.getElementsByClassName("note")).map((t=>[(0,s.note_coords)(t)[0],t]));if(0==i.length)return null;i.sort(((t,e)=>t[0]-e[0]));var o=i.findIndex((t=>e.x<t[0]));if(0==o)return i[0][1];if(-1==o)return i[i.length-1][1];const r=(0,s.average2)(i[o-1][0],i[o][0]);return e.x<r?i[o-1][1]:i[o][1]}(0,e,i);return l?[r,a,l]:[null,null,null]}function h(t,e,n){var i=n.closest(".staff");return i.getElementsByClassName("note")[0],[(0,s.note_coords)(n)[0],i.p_to_y(t,e)]}function p(t,e,n,i=!0,r=""){(0,o.c)();var a=document.getElementById(r);if(a&&a.parentElement.removeChild(a),i){let[i,o]=h(t,e,n),[a,c]=(0,s.note_coords)(n);var l=document.createElementNS("http://www.w3.org/2000/svg","use");l.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+n.id),l.setAttribute("x",i-a),l.setAttribute("y",o-c),l.id=r,n.parentElement.appendChild(l)}}function f(t,e,n,a,l,c=!1){var u="new-"+(0,s.random_id)();let d=n;void 0!==l&&(u=l);var p=[];console.log(n),p.push(function(t,e,n,i=!0,r=""){(0,o.c)();var s=document.getElementById(r),a=[];if(s&&s.parentElement.removeChild(s),i){let[i,s]=h(t,e,n);var l=document.createElementNS("http://www.w3.org/2000/svg","g"),c=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttributeNS("http://www.w3.org/1999/xlink","href",n.getElementsByTagName("use")[0].getAttributeNS("http://www.w3.org/1999/xlink","href")),u.setAttribute("x",i-100),u.setAttribute("y",s),u.setAttribute("height","720px"),u.setAttribute("width","720px"),l.id=r,l.classList.add("note"),c.classList.add("notehead"),c.appendChild(u),l.appendChild(c),n.parentElement.appendChild(l),l.onclick=function(t){(0,o.dB)(l,t.shiftKey)},a.push(l)}return a.reverse()}(t,e,n,a,u));var f=(0,o.c)();p.push(function(t,e,n,i,o=!0,r=""){var a=(0,s.get_by_id)(mei,(0,s.get_id)(i));if(!t.score_elem.contains(a))return console.log("Note not in layer?"),!1;var l=mei.createElement("note"),c=[];if(l.setAttribute("xml:id",r),!o)return console.log("Not implemented"),!1;{let i;a.closest("chord")?i=a.closest("chord"):(i=(0,s.note_to_chord)(mei,a),a.parentElement.insertBefore(i,a),a.parentElement.removeChild(a),i.appendChild(a),c.push(i)),l.setAttribute("pname",e),l.setAttribute("oct",n),i.appendChild(l),c.push(l),t.id_mapping.push([r,r])}return c.reverse()}(f.layer,t,e,n,a,u)),y(),c||(0,r.I$)(),(0,i.tu)().push(["add note",p.reverse(),[d],[]])}function g(){var t=(0,o.c)();if(""!=(0,o.h4)()&&!t.layer.original_score){let[t,e,n]=d();if(!t)return;f(t,e,n,!0)}}function m(){var t=(0,o.c)(),e=(0,o.h4)();if(void 0!==t){if(t.layer.original_score)return;let[n,i,r]=d();e="temp"+(0,s.random_id)(),(0,o.vI)(e),$("#addnotebutton").addClass("active"),document.getElementById("layers").style.cursor="crosshair",n&&p(n,i,r,!0,e)}}function v(){var t=(0,o.h4)();let e=document.getElementById(t);e&&e.parentElement.removeChild(e),t="",(0,o.vI)(t),$("#addnotebutton").removeClass("active"),document.getElementById("layers").style.cursor="default"}function y(){var t=(0,o.c)(),e=(0,o.h4)();null!=t&&t.layer.original_score||(e?v():m())}function b(){if((0,o.c)().layer.original_score)return;let[t,e,n]=d();t&&p(t,e,n,!0,(0,o.h4)())}document.getElementById("addnotebutton").addEventListener("click",y)},504:(t,e,n)=>{"use strict";n.d(e,{x:()=>l});var i=n(974),o=n(714),r=n(235),s=n(624);function a(t){console.debug("Using globals: mei for element selection");var e=(0,s.get_id)(t),n=(0,s.get_by_id)(mei,e),r=[],a="metarelation"==(0,s.get_class_from_classlist)(t),l=(0,i.ro)(),c=(0,i.kg)();for(const t of c){let i=(0,s.get_by_id)(document,t.id_prefix+e);i&&(r.push(i),a||(0,s.unmark_secondaries)(t,l,n))}var u=Array.from(mei.getElementsByTagName("arc")).filter((e=>e.getAttribute("to")=="#"+t.id||e.getAttribute("from")=="#"+t.id)).concat(r);u.push(n);var d=u.map((t=>{var e=[t,t.parentElement,t.nextSibling];try{$(`g #${t.getAttribute("to").substring(4)}`).removeClass().addClass("note")}catch(t){}return t.parentElement.removeChild(t),e}));return(0,o.e6)(),d}function l(t=!1){console.debug("Using globals: selected for element selection, undo_actions for storing the action");var e=selected.concat(extraselected);if(0==e.length||"relation"!=(0,s.get_class_from_classlist)(e[0])&&"metarelation"!=(0,s.get_class_from_classlist)(e[0]))console.log("No (meta)relation selected!");else{var n=e.flatMap(a);(0,i.tu)().push(["delete relation",n.reverse(),selected,extraselected]),e.forEach(o.dB),t||(0,r.I$)()}}document.getElementById("deletebutton").addEventListener("click",l)},126:(t,e,n)=>{"use strict";n.d(e,{Z:()=>ut});const i=document.documentElement,o=(document.body,getComputedStyle(i),Object.freeze({escape:27,left:37,right:39,a:65,z:90})),r=({keyCode:t},e)=>t===o[e];function s(t,e=null){const n=function({metaKey:t,shiftKey:e,ctrlKey:n,altKey:i}){const o={meta:t,shift:e,ctrl:n,alt:i},r=Object.keys(o).filter((t=>o[t]));return r.length?r:null}(t);return e?(i=[e].flat(),o=n,null!==(r=null==i?void 0:i.every((t=>null==o?void 0:o.includes(t))))&&void 0!==r&&r):null!==n;var i,o,r}const a=/Macintosh/.test(navigator.userAgent)?"meta":"ctrl";function l(t){let e=!1,n=Object.defineProperty({},t,{get:()=>{e=!0}});try{window.addEventListener("test",n,n),window.removeEventListener("test",n,n)}catch(t){e=!1}return e}l("passive");const c=l("capture"),u=function({capture:t=!1,passive:e=!0,once:n=!1}={}){return c?{capture:t,passive:e,once:n}:t},d=(u(),u({passive:!1}),u({capture:!0,passive:!1}));u({once:!0}),u({capture:!0,passive:!1,once:!0});let h=null;const p={x:0,y:0},f=new class{tick({x:t,y:e},n){h||window.requestAnimationFrame((n=>{this.update(t,e);const i=h;h=null,i(p)})),h=n}update(t,e){p.x=t,p.y=e}};let g=null;class m{constructor(t){this.app=t,this.init()}init(){window.addEventListener("resize",this.onResize.bind(this)),document.addEventListener("click",this.onTap.bind(this),d),document.addEventListener("mousedown",this.onTapStart.bind(this),d),document.addEventListener("mousemove",this.onMouseMove.bind(this),d),document.addEventListener("mouseup",this.onTapEnd.bind(this),d),document.addEventListener("touchstart",this.onTapStart.bind(this),d),document.addEventListener("touchmove",this.onTouchMove.bind(this),d),document.addEventListener("touchend",this.onTapEnd.bind(this),d),document.addEventListener("keydown",this.onKeyDown.bind(this)),document.addEventListener("change",this.onChange.bind(this),d),document.addEventListener("undoredo",this.onUndoRedo.bind(this)),document.addEventListener("scoreload",this.onScoreLoad.bind(this)),document.addEventListener("scoreselection",this.onScoreSelection.bind(this))}onResize(){!function(t,e=100){clearTimeout(g),i.classList.add("resizing"),g=setTimeout((()=>{i.classList.remove("resizing"),t()}),e)}((()=>{var t,e;null===(t=this.app.viewport)||void 0===t||t.onResize(),null===(e=this.app.ui)||void 0===e||e.onResize()}))}onTap(t){var e,n,i;null===(e=this.app.player)||void 0===e||e.onTap(t),null===(n=this.app.ui)||void 0===n||n.onTap(t),null===(i=this.app.history)||void 0===i||i.onTap(t)}onTapStart(t){var e;null===(e=this.app.ui)||void 0===e||e.onTapStart(t)}onTapEnd(){var t;null===(t=this.app.ui)||void 0===t||t.onTapEnd()}onMouseMove(t){f.tick(t,(({x:t,y:e})=>{var n;null===(n=this.app.ui)||void 0===n||n.onTapMove(t,e)}))}onTouchMove(t){const e={x:Math.round(t.touches[0].clientX),y:Math.round(t.touches[0].clientY)};f.tick(e,(({x:t,y:e})=>{var n;null===(n=this.app.ui)||void 0===n||n.onTapMove(t,e)}))}onChange(t){var e,n,i;null===(e=this.app.player)||void 0===e||e.onChange(t),null===(n=this.app.ui)||void 0===n||null===(i=n.filters)||void 0===i||i.onChange(t)}onUndoRedo(t){var e;null===(e=this.app.history)||void 0===e||e.onUndoRedo(t)}onScoreLoad(t){var e,n;null===(e=this.app.score)||void 0===e||e.onScoreLoad(t),null===(n=this.app.ui)||void 0===n||n.onScoreLoad(t)}onScoreSelection(t){var e,n;null===(e=this.app.score)||void 0===e||e.onScoreSelection(t),null===(n=this.app.ui)||void 0===n||n.onScoreSelection(t)}onKeyDown(t){if(!["INPUT","SELECT","TEXTAREA"].includes(document.activeElement.tagName)){if(r(t,"z")){if(s(t,a))return this.app.history.undo();if(s(t,[a,"shift"]))return this.app.history.redo()}return r(t,"a")&&s(t,a)?this.app.ui.selection.selectAll():void 0}}}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),t}for(var x={VERSION:"2.0.16",NOTES:[],HEADER_CHUNK_LENGTH:14,CIRCLE_OF_FOURTHS:["C","F","Bb","Eb","Ab","Db","Gb","Cb","Fb","Bbb","Ebb","Abb"],CIRCLE_OF_FIFTHS:["C","G","D","A","E","B","F#","C#","G#","D#","A#","E#"]},w=[["C"],["C#","Db"],["D"],["D#","Eb"],["E"],["F"],["F#","Gb"],["G"],["G#","Ab"],["A"],["A#","Bb"],["B"]],S=0,E=function(t){w.forEach((function(e){e.forEach((function(e){return x.NOTES[S]=e+t})),S++}))},A=-1;A<=9;A++)E(A);var T=function(){function t(){y(this,t)}return _(t,null,[{key:"byteToHex",value:function(t){return("0"+t.toString(16)).slice(-2)}},{key:"bytesToHex",value:function(e){var n=[];return e.forEach((function(e){return n.push(t.byteToHex(e))})),n.join("")}},{key:"hexToNumber",value:function(t){return parseInt(t,16)}},{key:"bytesToNumber",value:function(e){return t.hexToNumber(t.bytesToHex(e))}},{key:"bytesToLetters",value:function(t){var e=[];return t.forEach((function(t){return e.push(String.fromCharCode(t))})),e.join("")}},{key:"decToBinary",value:function(t){return(t>>>0).toString(2)}},{key:"getVarIntLength",value:function(t){for(var e=t[0],n=1;e>=128;)e=t[n],n++;return n}},{key:"readVarInt",value:function(t){var e=0;return t.forEach((function(t){128&t?(e+=127&t,e<<=7):e+=t})),e}},{key:"atob",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return"function"==typeof atob?atob(t):Buffer.from(t,"base64").toString("binary")}))}]),t}(),k=function(){function t(e,n){y(this,t),this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.index=e,this.data=n,this.delta=0,this.runningDelta=0,this.events=[];var i=this.data.subarray(this.data.length-3,this.data.length);if(255!==i[0]||47!==i[1]||0!==i[2])throw"Invalid MIDI file; Last three bytes of track "+this.index+"must be FF 2F 00 to mark end of track"}return _(t,[{key:"reset",value:function(){return this.enabled=!0,this.eventIndex=0,this.pointer=0,this.lastTick=0,this.lastStatus=null,this.delta=0,this.runningDelta=0,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"setEventIndexByTick",value:function(t){for(var e in t=t||0,this.events)if(this.events[e].tick>=t)return this.eventIndex=e,this}},{key:"getCurrentByte",value:function(){return this.data[this.pointer]}},{key:"getDeltaByteCount",value:function(){return T.getVarIntLength(this.data.subarray(this.pointer))}},{key:"getDelta",value:function(){return T.readVarInt(this.data.subarray(this.pointer,this.pointer+this.getDeltaByteCount()))}},{key:"handleEvent",value:function(t,e){if(e=e||!1){var n=t-this.lastTick>=this.getDelta();if(this.pointer<this.data.length&&(e||n)){var i=this.parseEvent();if(this.enabled)return i}}else if(this.events[this.eventIndex]&&this.events[this.eventIndex].tick<=t&&(this.eventIndex++,this.enabled))return this.events[this.eventIndex-1];return null}},{key:"getStringData",value:function(t){var e=T.getVarIntLength(this.data.subarray(t+2)),n=T.readVarInt(this.data.subarray(t+2,t+2+e));return T.bytesToLetters(this.data.subarray(t+2+e,t+2+e+n))}},{key:"parseEvent",value:function(){var t=this.pointer+this.getDeltaByteCount(),e={},n=this.getDeltaByteCount();if(e.track=this.index+1,e.delta=this.getDelta(),this.lastTick=this.lastTick+e.delta,this.runningDelta+=e.delta,e.tick=this.runningDelta,e.byteIndex=this.pointer,255==this.data[t]){switch(this.data[t+1]){case 0:e.name="Sequence Number";break;case 1:e.name="Text Event",e.string=this.getStringData(t);break;case 2:e.name="Copyright Notice";break;case 3:e.name="Sequence/Track Name",e.string=this.getStringData(t);break;case 4:e.name="Instrument Name",e.string=this.getStringData(t);break;case 5:e.name="Lyric",e.string=this.getStringData(t);break;case 6:e.name="Marker";break;case 7:e.name="Cue Point",e.string=this.getStringData(t);break;case 9:e.name="Device Name",e.string=this.getStringData(t);break;case 32:e.name="MIDI Channel Prefix";break;case 33:e.name="MIDI Port",e.data=T.bytesToNumber([this.data[t+3]]);break;case 47:e.name="End of Track";break;case 81:e.name="Set Tempo",e.data=Math.round(6e7/T.bytesToNumber(this.data.subarray(t+3,t+6))),this.tempo=e.data;break;case 84:e.name="SMTPE Offset";break;case 88:e.name="Time Signature",e.data=this.data.subarray(t+3,t+7),e.timeSignature=e.data[0]+"/"+Math.pow(2,e.data[1]);break;case 89:e.name="Key Signature",e.data=this.data.subarray(t+3,t+5),e.data[0]>=0?e.keySignature=x.CIRCLE_OF_FIFTHS[e.data[0]]:e.data[0]<0&&(e.keySignature=x.CIRCLE_OF_FOURTHS[Math.abs(e.data[0])]),0==e.data[1]?e.keySignature+=" Major":1==e.data[1]&&(e.keySignature+=" Minor");break;case 127:e.name="Sequencer-Specific Meta-event";break;default:e.name="Unknown: "+this.data[t+1].toString(16)}var i=T.getVarIntLength(this.data.subarray(t+2)),o=T.readVarInt(this.data.subarray(t+2,t+2+i));this.pointer+=n+3+o}else if(240===this.data[t]){e.name="Sysex";var r=T.getVarIntLength(this.data.subarray(t+1)),s=T.readVarInt(this.data.subarray(t+1,t+1+r));e.data=this.data.subarray(t+1+r,t+1+r+s),this.pointer+=n+1+r+s}else if(247===this.data[t]){e.name="Sysex (escape)";var a=T.getVarIntLength(this.data.subarray(t+1)),l=T.readVarInt(this.data.subarray(t+1,t+1+a));e.data=this.data.subarray(t+1+a,t+1+a+l),this.pointer+=n+1+a+l}else if(this.data[t]<128)if(e.running=!0,e.noteNumber=this.data[t],e.noteName=x.NOTES[this.data[t]],e.velocity=this.data[t+1],this.lastStatus<=143)e.name="Note off",e.channel=this.lastStatus-128+1,this.pointer+=n+2;else if(this.lastStatus<=159)e.name="Note on",e.channel=this.lastStatus-144+1,this.pointer+=n+2;else if(this.lastStatus<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=x.NOTES[this.data[t+1]],e.pressure=event[1],this.pointer+=n+2;else if(this.lastStatus<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=n+2;else if(this.lastStatus<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=n+1;else if(this.lastStatus<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=n+1;else{if(!(this.lastStatus<=239))throw"Unknown event (running): ".concat(this.lastStatus);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,e.value=this.data[t+2],this.pointer+=n+2}else if(this.lastStatus=this.data[t],this.data[t]<=143)e.name="Note off",e.channel=this.lastStatus-128+1,e.noteNumber=this.data[t+1],e.noteName=x.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3;else if(this.data[t]<=159)e.name="Note on",e.channel=this.lastStatus-144+1,e.noteNumber=this.data[t+1],e.noteName=x.NOTES[this.data[t+1]],e.velocity=Math.round(this.data[t+2]/127*100),this.pointer+=n+3;else if(this.data[t]<=175)e.name="Polyphonic Key Pressure",e.channel=this.lastStatus-160+1,e.note=x.NOTES[this.data[t+1]],e.pressure=event[2],this.pointer+=n+3;else if(this.data[t]<=191)e.name="Controller Change",e.channel=this.lastStatus-176+1,e.number=this.data[t+1],e.value=this.data[t+2],this.pointer+=n+3;else if(this.data[t]<=207)e.name="Program Change",e.channel=this.lastStatus-192+1,e.value=this.data[t+1],this.pointer+=n+2;else if(this.data[t]<=223)e.name="Channel Key Pressure",e.channel=this.lastStatus-208+1,this.pointer+=n+2;else{if(!(this.data[t]<=239))throw"Unknown event: ".concat(this.data[t]);e.name="Pitch Bend",e.channel=this.lastStatus-224+1,this.pointer+=n+3}return this.delta+=e.delta,this.events.push(e),e}},{key:"endOfTrack",value:function(){return 255==this.data[this.pointer+1]&&47==this.data[this.pointer+2]&&0==this.data[this.pointer+3]}}]),t}();Uint8Array.prototype.forEach||Object.defineProperty(Uint8Array.prototype,"forEach",{value:Array.prototype.forEach});var C=function(){function t(e,n){y(this,t),this.sampleRate=5,this.startTime=0,this.buffer=n||null,this.midiChunksByteLength=null,this.division,this.format,this.setIntervalId=!1,this.tracks=[],this.instruments=[],this.defaultTempo=120,this.tempo=null,this.startTick=0,this.tick=0,this.lastTick=null,this.inLoop=!1,this.totalTicks=0,this.events=[],this.totalEvents=0,this.eventListeners={},"function"==typeof e&&this.on("midiEvent",e)}return _(t,[{key:"loadFile",value:function(t){throw"loadFile is only supported on Node.js"}},{key:"loadArrayBuffer",value:function(t){return this.buffer=new Uint8Array(t),this.fileLoaded()}},{key:"loadDataUri",value:function(t){for(var e=T.atob(t.split(",")[1]),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return this.buffer=n,this.fileLoaded()}},{key:"getFilesize",value:function(){return this.buffer?this.buffer.length:0}},{key:"fileLoaded",value:function(){if(!this.validate())throw"Invalid MIDI file; should start with MThd";return this.setTempo(this.defaultTempo).getDivision().getFormat().getTracks().dryRun()}},{key:"validate",value:function(){return"MThd"===T.bytesToLetters(this.buffer.subarray(0,4))}},{key:"getFormat",value:function(){return this.format=T.bytesToNumber(this.buffer.subarray(8,10)),this}},{key:"getTracks",value:function(){this.tracks=[];for(var t=0;t<this.buffer.length;){if("MTrk"==T.bytesToLetters(this.buffer.subarray(t,t+4))){var e=T.bytesToNumber(this.buffer.subarray(t+4,t+8));this.tracks.push(new k(this.tracks.length,this.buffer.subarray(t+8,t+8+e)))}t+=T.bytesToNumber(this.buffer.subarray(t+4,t+8))+8}var n=0;return this.tracks.forEach((function(t){n+=8+t.data.length})),this.midiChunksByteLength=x.HEADER_CHUNK_LENGTH+n,this}},{key:"enableTrack",value:function(t){return this.tracks[t-1].enable(),this}},{key:"disableTrack",value:function(t){return this.tracks[t-1].disable(),this}},{key:"getDivision",value:function(){return this.division=T.bytesToNumber(this.buffer.subarray(12,x.HEADER_CHUNK_LENGTH)),this}},{key:"playLoop",value:function(t){this.inLoop||(this.inLoop=!0,this.tick=this.getCurrentTick(),this.tracks.forEach((function(e,n){if(!t&&this.endOfFile())this.triggerPlayerEvent("endOfFile"),this.stop();else{var i=e.handleEvent(this.tick,t);t&&i?(i.hasOwnProperty("name")&&"Set Tempo"===i.name&&(this.defaultTempo=i.data,this.setTempo(i.data)),i.hasOwnProperty("name")&&"Program Change"===i.name&&(this.instruments.includes(i.value)||this.instruments.push(i.value))):i&&(i.hasOwnProperty("name")&&"Set Tempo"===i.name&&(this.setTempo(i.data),this.isPlaying()&&this.pause().play()),this.emitEvent(i))}}),this),t||this.triggerPlayerEvent("playing",{tick:this.tick}),this.inLoop=!1)}},{key:"setTempo",value:function(t){return this.tempo=t,this}},{key:"setStartTime",value:function(t){return this.startTime=t,this}},{key:"play",value:function(){if(this.isPlaying())throw"Already playing...";return this.startTime||(this.startTime=(new Date).getTime()),this.setIntervalId=setInterval(this.playLoop.bind(this),this.sampleRate),this}},{key:"loop",value:function(){setTimeout(function(){this.playLoop(),this.loop()}.bind(this),this.sampleRate)}},{key:"pause",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=this.tick,this.startTime=0,this}},{key:"stop",value:function(){return clearInterval(this.setIntervalId),this.setIntervalId=!1,this.startTick=0,this.startTime=0,this.resetTracks(),this}},{key:"skipToTick",value:function(t){return this.stop(),this.startTick=t,this.tracks.forEach((function(e){e.setEventIndexByTick(t)})),this}},{key:"skipToPercent",value:function(t){if(t<0||t>100)throw"Percent must be number between 1 and 100.";return this.skipToTick(Math.round(t/100*this.totalTicks)),this}},{key:"skipToSeconds",value:function(t){var e=this.getSongTime();if(t<0||t>e)throw t+" seconds not within song time of "+e;return this.skipToPercent(t/e*100),this}},{key:"isPlaying",value:function(){return this.setIntervalId>0||"object"===v(this.setIntervalId)}},{key:"dryRun",value:function(){for(this.resetTracks();!this.endOfFile();)this.playLoop(!0);return this.events=this.getEvents(),this.totalEvents=this.getTotalEvents(),this.totalTicks=this.getTotalTicks(),this.startTick=0,this.startTime=0,this.resetTracks(),this.triggerPlayerEvent("fileLoaded",this),this}},{key:"resetTracks",value:function(){return this.tracks.forEach((function(t){return t.reset()})),this}},{key:"getEvents",value:function(){return this.tracks.map((function(t){return t.events}))}},{key:"getTotalTicks",value:function(){return Math.max.apply(null,this.tracks.map((function(t){return t.delta})))}},{key:"getTotalEvents",value:function(){return this.tracks.reduce((function(t,e){return{events:{length:t.events.length+e.events.length}}}),{events:{length:0}}).events.length}},{key:"getSongTime",value:function(){return this.totalTicks/this.division/this.tempo*60}},{key:"getSongTimeRemaining",value:function(){return Math.round((this.totalTicks-this.getCurrentTick())/this.division/this.tempo*60)}},{key:"getSongPercentRemaining",value:function(){return Math.round(this.getSongTimeRemaining()/this.getSongTime()*100)}},{key:"bytesProcessed",value:function(){return x.HEADER_CHUNK_LENGTH+8*this.tracks.length+this.tracks.reduce((function(t,e){return{pointer:t.pointer+e.pointer}}),{pointer:0}).pointer}},{key:"eventsPlayed",value:function(){return this.tracks.reduce((function(t,e){return{eventIndex:t.eventIndex+e.eventIndex}}),{eventIndex:0}).eventIndex}},{key:"endOfFile",value:function(){return this.isPlaying()?this.totalTicks-this.tick<=0:this.bytesProcessed()>=this.midiChunksByteLength}},{key:"getCurrentTick",value:function(){return this.startTime?Math.round(((new Date).getTime()-this.startTime)/1e3*(this.division*(this.tempo/60)))+this.startTick:this.startTick}},{key:"emitEvent",value:function(t){return this.triggerPlayerEvent("midiEvent",t),this}},{key:"on",value:function(t,e){return this.eventListeners.hasOwnProperty(t)||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),this}},{key:"triggerPlayerEvent",value:function(t,e){return this.eventListeners.hasOwnProperty(t)&&this.eventListeners[t].forEach((function(t){return t(e||{})})),this}}]),t}(),D={Player:C,Utils:T,Constants:x},N=n(346),M=n.n(N),j=n(974);const I=(t,e,n)=>Math.max(e,Math.min(n,t));class L{constructor(t=""){this.ctn=document.getElementById(`${t}-progress-ctn`),this.el=document.getElementById(`${t}-progress`),this.doneEl=document.getElementById(`${t}-progress-done`),this.maxEl=document.getElementById(`${t}-progress-max`),this.reset()}update(t=this.done,e=this.max){if(e<=0)return this.reset();this.done=t,this.max=e,this.el.max=e,this.el.value=t,this.el.innerHTML=`${t} / ${e}`;const n=((t,e=0)=>(e=10**e,Math.round(t*e)/e))(this.el.position,3);this.setBar(n),this.updateLabel()}setBar(t){this.ctn.style.setProperty("--progress",I(0,t,1))}updateLabel(){this.doneEl.innerHTML=this.formatTime(this.done),this.maxEl.innerHTML=this.formatTime(this.max)}formatTime(t){return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,0)}`}reset(){this.el.innerHTML="",this.el.removeAttribute("value"),this.el.removeAttribute("max"),this.setBar(0),this.done=0,this.max=0}}const O=new AudioContext;let B;const P=new class{constructor(){this.midiId=null,this.playhead=0,this.playBtn=document.getElementById("player-play"),this.pauseBtn=document.getElementById("player-pause"),this.stopBtn=document.getElementById("player-stop"),this.timelineRange=document.getElementById("player-timeline-input"),this.init()}loadSound(t,e=""){this.midiId!=e&&(this.stop(),this.midiId=e),B.loadDataUri(`data:audio/midi;base64,${t}`)}onTap({target:t}){if(t==this.playBtn&&!B.isPlaying()){const t=(0,j.p8)();return"original"!=this.midiId&&this.loadSound(t,"original"),void this.play()}t==this.pauseBtn&&B.isPlaying()?this.pause():t==this.stopBtn&&B.isPlaying()&&this.stop()}onChange({target:t}){t==this.timelineRange&&B.skipToSeconds(t.value).play()}updateProgress(){let t=B.getSongTime(),e=B.getSongTimeRemaining();(isNaN(t)||isNaN(e))&&(t=0,e=0);const n=t-e;this.progressBar.update(n,t),this.timelineRange.setAttribute("max",t),this.timelineRange.setAttribute("value",n)}play(){this.playhead&&B.skipToTick(this.playhead),B.play()}stop(){B.stop(),this.updateProgress(),this.playhead=0}pause(){this.playhead=B.getCurrentTick(),B.pause()}init(){M().instrument(O,"/instruments/acoustic-grand-piano-mp3.js").then((t=>{B=new D.Player((e=>{"Note on"==e.name&&e.velocity>0&&t.play(e.noteName,O.currentTime,{gain:e.velocity/100}),this.updateProgress()})),B.on("endOfFile",(()=>this.stop()))})),this.progressBar=new L("player")}};class z{constructor(t,e){this.namespace=t,this.ctn=document.getElementById(e.filterCtnId),this.paths=e.svgCtn.getElementsByClassName(t),this.fields=[]}onChange(t){t.composedPath().includes(this.ctn)&&this.toggleRelationsPaths(t.target.dataset.type,t.target.checked)}toggleRelationsPaths(t,e){Array.from(this.paths).filter((e=>e.getAttribute("type")==t)).forEach((t=>t.classList.toggle("relation--filtered",!e)))}getRelations(){const t=new Set(Array.from(this.paths,(t=>t.getAttribute("type"))));this.fields=Array.from(t,(t=>({type:t,checked:!0,el:null})))}hasRelationType(t){return this.fields.some((e=>e.type==t))}wasLastOfType(t){return!Array.from(this.paths).some((e=>e.getAttribute("type")==t))}render(){let t=this.fields.map((t=>this.createFilterElement(t))).join(" ");this.ctn.innerHTML=t}createFilterElement({type:t,checked:e}){return`\n      <li>\n        <label class="checkable color-${this.namespace}-${t}" for="${this.namespace}-filter-${t}">\n            ${n=t,n[0].toUpperCase()+n.slice(1)}\n            <input class="checkable__input" type="checkbox" id="${this.namespace}-filter-${t}" data-type="${t}" ${e?"checked":""}>\n            <span class="checkbox checkbox--colored">\n                <svg class="checkable__icon btn__icon" width="12" height="10">\n                    <use xlink:href="#check-path"/>\n                </svg>\n            </span>\n        </label>\n      </li>\n    `;var n}}const $=new class{constructor(){this.visible=!1,this.ctn=document.getElementById("filters"),this.toggleBtn=document.getElementById("filters-toggle"),this.svgCtn=document.getElementById("layers"),this.observer=this.createMutationObserver(),this.groups=this.createFiltersGroups()}onTap({target:t}){t==this.toggleBtn&&this.toggle()}onChange(t){this.groups.forEach((e=>e.onChange(t)))}onScoreLoad(){this.toggle(!1),this.observer.disconnect(),this.update(),this.observe()}observe(){this.observer.observe(document.querySelector("#layers .svg_container > svg .page-margin"),{subtree:!0,childList:!0,attributeOldValue:!0,attributeFilter:["type"]})}toggle(t=!this.visible){this.visible=t,this.ctn.classList.toggle("fly-out--expanded",t),this.ctn.classList.toggle("fly-out--collapsed",!t)}update(){this.groups.forEach((t=>t.getRelations())),this.groups.forEach((t=>t.render()))}createFiltersGroups(){return[new z("relation",{filterCtnId:"relations-filters",svgCtn:this.svgCtn}),new z("metarelation",{filterCtnId:"meta-relations-filters",svgCtn:this.svgCtn})]}createMutationObserver(){return new MutationObserver((t=>{if(t.filter((t=>"attributes"==t.type&&"type"==t.attributeName)).filter((t=>t.target.getAttribute("type")!=t.oldValue)).length>0)return this.update();const e=1==t.length&&t.filter((t=>{var e;return"childList"==t.type&&1==(null===(e=t.addedNodes)||void 0===e?void 0:e.length)})).map((t=>{var e;return null===(e=t.addedNodes)||void 0===e?void 0:e.item(0)})).find((t=>1==t.nodeType));if(e){const t=e.getAttribute("type");if(!this.groups.some((e=>e.hasRelationType(t))))return this.update()}const n=1==t.length&&t.filter((t=>{var e;return"childList"==t.type&&1==(null===(e=t.removedNodes)||void 0===e?void 0:e.length)})).map((t=>{var e;return null===(e=t.removedNodes)||void 0===e?void 0:e.item(0)})).find((t=>1==t.nodeType));if(n){const t=n.getAttribute("type");if(this.groups.some((e=>e.wasLastOfType(t))))return this.update()}}))}};var R=n(624);const H=new class{constructor(){this.loaded=!1,this.mei=null,this.selection=null}get flatSelection(){return Object.values(H.selection).flat()}onScoreLoad(){this.loaded=!0,this.mei=window.mei}onScoreSelection({detail:t}){this.selection=t}},U=H,q={title:{label:"Title",saveBtn:"Update title",placeholder:"The name  of the song "},roles:{composer:{label:"Composer",saveBtn:"Update composer",placeholder:"Wolfgang Amadeus Mozart"},analyst:{label:"Analyst",saveBtn:"Assign responsibility",placeholder:"Maybe you?"},annotator:{label:"Annotator",saveBtn:"Assign responsibility",placeholder:"Maybe you?"}}},W=(t,{label:e,placeholder:n=""},i="")=>`\n  <label class="fillable fly-out__title" for="metadata-${t}">\n      ${e}\n      <input\n          class="fillable__input"\n          id="metadata-${t}"\n          type="text"\n          placeholder="${n}"\n          value="${i}"\n      >\n  </label>\n`,V=(t,{saveBtn:e})=>`\n  <button\n      class="btn btn--plain btn--small"\n      id="metadata-${t}-assign"\n      type="button"\n      data-role="${t}"\n  >${e}</button>\n`,Y=new DOMParser,F=new RegExp(/^metadata-\w+-assign$/),K=new class{constructor(){this.visible=!1,this.ctn=document.getElementById("metadata"),this.toggleBtn=document.getElementById("metadata-toggle"),this.persRoles=Object.keys(q.roles),this.formDOM={ctn:document.getElementById("metadata-form")},this.formDOM.inputs=this.formDOM.ctn.getElementsByClassName("fillable__input"),this.scoreHead={titleStmt:null,title:null,respStmt:null,respPersName:[]}}onTap({target:t}){if(t==this.toggleBtn)return this.toggle();if(F.test(t.id)){const e=t.id.replace("metadata-","").replace("-assign","");this.updateScoreMetadata(e)}}onScoreLoad(){this.initScore(),this.initFields()}toggle(t=!this.visible){this.visible=t,this.ctn.classList.toggle("fly-out--expanded",t),this.ctn.classList.toggle("fly-out--collapsed",!t)}updateScoreMetadata(t){const e=[...this.formDOM.inputs].find((({id:e})=>`metadata-${t}`));if(!e)return;const n=e.value;if("title"==t)return void(this.scoreHead.title[0].innerHTML=n);const i=this.persNames.find((e=>e.role==t));i.value=n,i.el.innerHTML=n,"composer"!=t&&U.flatSelection.forEach((e=>{const n=(0,R.get_id)(e),i=(0,R.get_by_id)(U.mei,n);("note"==i.tagName?i:i.firstChild).setAttribute("resp",t)}))}initScore(){this.scoreHead.titleStmt=U.mei.querySelector("meiHead fileDesc titleStmt"),this.scoreHead.titleStmt&&(this.initStmtEl("title"),this.initStmtEl("respStmt"),this.initRoles())}initStmtEl(t){if(this.scoreHead[t]=this.scoreHead.titleStmt.getElementsByTagName(t),!this.scoreHead[t].length){const e=U.mei.createElement(t);this.scoreHead.titleStmt.appendChild(e)}}initRoles(){this.scoreHead.respPersName=this.scoreHead.respStmt[0].getElementsByTagName("persName"),this.persNames=Array.from(this.scoreHead.respPersName).filter((t=>this.persRoles.includes(t.getAttribute("role")))).map((t=>({el:t,role:t.getAttribute("role"),value:t.innerHTML,config:q.roles[t.getAttribute("role")]}))),this.persRoles.filter((t=>!this.persNames.find((e=>e.role==t)))).forEach((t=>this.initRole(t)))}initRole(t){const e=Y.parseFromString(`<persName role="${t}" xml:id="${t}" />`,"text/xml").firstChild;this.scoreHead.respStmt[0].appendChild(e),this.persNames.push({el:e,role:t,value:"",config:q.roles[t]})}initFields(){this.formDOM.ctn.innerHTML=W("title",q.title,this.scoreHead.title[0].innerHTML)+V("title",q.title)+this.persNames.map((({role:t,config:e,value:n})=>`\n    <hr class="fly-out__hr">\n    ${W(t,e,n)}\n    ${V(t,e)}\n  `)).join("")}},X=K,G=new class{constructor(){this.update()}onResize(){this.update()}update(){this.w=window.innerWidth,this.h=window.innerHeight}},Q=new class{constructor(){this.toLeftBtn=document.getElementById("to-left"),this.toRightBtn=document.getElementById("to-right")}onTap(t){return t.target==this.toLeftBtn?this.toLeft():t.target==this.toRightBtn?this.toRight():void 0}toLeft(){this.goTo(-(G.w-200))}toRight(){this.goTo(G.w-200)}goTo(t){i.scrollBy(t,0)}},Z=(t,e=null)=>{const n={},i=t.getBoundingClientRect();for(const t in i)e&&!e.includes(t)||(n[t]=i[t]);return n},J=t=>t/10+"rem";function tt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,et(t,e,"get"))}function et(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var nt=new WeakMap;const it=new class{constructor(){var t,e,n;n={writable:!0,value:!1},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=this,e=nt),e.set(t,n),this.ctn={el:document.getElementById("relations-menu")},this.closeBtn=this.ctn.el.querySelector(".fly-out__closeBtn"),this.dragHandle={el:this.ctn.el.querySelector(".fly-out__drag")},this.visible=!1,this.x=0,this.y=0,this.computeValues()}onTap(t){if(t.composedPath().includes(this.ctn.el))return t.target==this.closeBtn?this.toggleVisibility(!1):void(t.target.classList.contains("btn--relation")&&(0,j.i9)(t.target.dataset.relationType))}onTapStart(t){t.target==this.dragHandle.el&&function(t,e=null){t.preventDefault(),e&&e.call()}(t,(()=>this.toggleDragging(!0)))}onTapMove(t,e){this.visible&&tt(this,nt)&&this.updatePosition(t,e)}onTapEnd(){this.visible&&tt(this,nt)&&(this.toggleDragging(!1),this.computeValues())}onResize(){this.visible&&this.computeValues()}updatePosition(t=this.x,e=this.y){this.x=t-this.ctn.handleDeltaX,this.y=e-this.ctn.handleDeltaY,this.ctn.el.style.setProperty("--relations-menu-x",J(this.x)),this.ctn.el.style.setProperty("--relations-menu-y",J(this.y))}toggleVisibility(t=!this.visible){this.ctn.el.classList.toggle("fly-out--relations--visible",t),this.visible=t,t&&this.computeValues()}toggleDragging(t=!tt(this,nt)){var e,n;n=t,function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(e=this,et(e,nt,"set"),n),this.ctn.el.classList.toggle("fly-out--grabbing",t),i.classList.toggle("dragging-relations-menu",t)}snapInViewport(){const t=I(this.x,10,G.w-this.ctn.width-10),e=I(this.y,10,G.h-this.ctn.height-10);t==this.x&&e==this.y||(this.ctn.el.classList.add("fly-out--relations--snapping"),this.ctn.el.addEventListener("transitionend",this.onSnapTransitionEnd.bind(this)),this.updatePosition(t+this.ctn.handleDeltaX,e+this.ctn.handleDeltaY))}onSnapTransitionEnd({propertyName:t}){"transform"==t&&(this.ctn.el.classList.remove("fly-out--relations--snapping"),this.ctn.el.removeEventListener("transitionend",this.onSnapTransitionEnd.bind(this)))}computeValues(){const t=Z(this.ctn.el,["x","y","width","height"]);Object.assign(this.ctn,t);const e=Z(this.dragHandle.el,["width","height"]);Object.assign(this.dragHandle,e,{offsetLeft:this.dragHandle.el.offsetLeft,offsetTop:this.dragHandle.el.offsetTop}),this.ctn.handleDeltaX=this.dragHandle.offsetLeft+this.dragHandle.width/2,this.ctn.handleDeltaY=this.dragHandle.offsetTop+this.dragHandle.height/2,this.snapInViewport()}};var ot=n(714);const rt=new class{constructor(){this.selectBtn=document.getElementById("select-all"),this.unselectBtn=document.getElementById("unselect-all")}selectAll(){const t=(0,ot.c)();t&&(0,ot.Au)(t)}selectNone(){(0,ot.Nv)()}onTap({target:t}){return t==this.selectBtn?this.selectAll():t==this.unselectBtn?this.selectNone():void 0}},st=new class{constructor(){this.zoomInBtn=document.getElementById("zoom-in"),this.zoomOutBtn=document.getElementById("zoom-out"),this.resetBtn=document.getElementById("zoom-reset"),this.levelEl=document.getElementById("zoom-level")}onTap({target:t}){return t==this.zoomInBtn?this.in():t==this.zoomOutBtn?this.out():t==this.resetBtn?this.reset():void 0}in(){this.by(1.1)}out(){this.by(.9090909090909091)}reset(){this.by(1)}by(t=1){const e=(0,ot.c)();e&&(e.zoom=1==t?1:e.zoom*t,e.svg_elem.style.transform=`scale(${e.zoom})`,this.levelEl.innerHTML=this.format(e.zoom))}format(t){return`${Math.round(100*t)}%`}},at=new class{constructor(){this.ctn=document.getElementById("ui"),this.init()}onTap(t){var e,n,i,o,r,s;null===(e=this.relations)||void 0===e||e.onTap(t),t.composedPath().includes(this.ctn)&&(null===(n=this.zoom)||void 0===n||n.onTap(t),null===(i=this.selection)||void 0===i||i.onTap(t),null===(o=this.metadata)||void 0===o||o.onTap(t),null===(r=this.navigation)||void 0===r||r.onTap(t),null===(s=this.filters)||void 0===s||s.onTap(t))}onTapStart(t){var e;null===(e=this.relations)||void 0===e||e.onTapStart(t)}onTapMove(t,e){var n;null===(n=this.relations)||void 0===n||n.onTapMove(t,e)}onTapEnd(){var t;null===(t=this.relations)||void 0===t||t.onTapEnd()}onResize(){var t;null===(t=this.relations)||void 0===t||t.onResize()}onScoreLoad(t){var e,n;null===(e=this.filters)||void 0===e||e.onScoreLoad(t),null===(n=this.metadata)||void 0===n||n.onScoreLoad(t)}onScoreSelection({detail:t}){var e;t.selected.concat(t.extraselected).length>0&&(null===(e=this.relations)||void 0===e||e.toggleVisibility(!0))}init(){this.zoom=st,this.selection=rt,this.navigation=Q,this.metadata=X,this.filters=$,this.relations=it}};var lt=n(235);const ct=new class{constructor(){this.undoBtn=document.getElementById("undo"),this.redoBtn=document.getElementById("redo"),this.updateBtns(0,0)}onTap({target:t}){return t==this.undoBtn?this.undo():t==this.redoBtn?this.redo():void 0}undo(){(0,lt.FB)()}redo(){(0,lt.VJ)()}updateBtns(t=0,e=0){this.undoBtn.toggleAttribute("disabled",0==t),this.redoBtn.toggleAttribute("disabled",0==e)}onUndoRedo({detail:t}){this.updateBtns(t.undoAbleCount,t.redoAbleCount)}},ut=new class{constructor(){this.init()}init(){i.classList.remove("loading"),i.classList.add("ready"),this.viewport=G,(t=>{new m(this)})(),this.ui=at,this.score=U,this.player=P,this.history=ct}}},714:(t,e,n)=>{"use strict";n.d(e,{N7:()=>J,Sr:()=>St,hv:()=>wt,rI:()=>Q,Nv:()=>gt,Pw:()=>yt,c:()=>Lt,jM:()=>q,hT:()=>W,h4:()=>jt,U2:()=>Nt,gB:()=>Mt,oq:()=>nt,PB:()=>mt,qY:()=>tt,Z6:()=>it,$Z:()=>et,K5:()=>vt,A4:()=>G,hh:()=>xt,XR:()=>Z,rp:()=>Et,bf:()=>_t,Au:()=>X,vI:()=>It,dB:()=>K,up:()=>at,XG:()=>ct,e6:()=>bt,cE:()=>rt});var o=n(986),r=n.n(o),s=n(238),a=n.n(s),l=n(501),c=n.n(l),u=n(126),d=n(36),h=n(974),p=n(624);function f(t,e,n){var i=e.map((e=>(0,p.relation_primaries)(t,e))).flat();e=e.filter((t=>!n.includes(t))),i=i.concat(e.map((e=>(0,p.relation_secondaries)(t,e))).flat());do{var o=n.filter((e=>(0,p.relation_secondaries)(t,e).findIndex((t=>i.includes(t)))>-1));e=e.concat(o),n=n.filter((t=>!o.includes(t))),i=i.concat(o.map((e=>(0,p.relation_secondaries)(t,e))).flat())}while(o.length>0);return[n,[...new Set(n.flatMap((e=>(0,p.relation_secondaries)(t,e))))]]}function g(t){!function(t,e,n,i){var o=n.concat(i).map((t=>(0,p.get_by_id)(e.getRootNode(),(0,p.get_id)(t)))),r=Array.from(e.getElementsByTagName("node")).filter((t=>"relation"==t.getAttribute("type"))).filter((e=>{var n=(0,p.get_by_id)(document,t.id_prefix+e.getAttribute("xml:id"));return null!=n&&!n.classList.contains("hidden")}));0==o.length&&(o=r);var[s,a]=f(e,r,o),l=[];l.push(s.map((e=>(0,p.hide_he)(t,e)))),l.push(a.map((e=>(0,p.hide_note)(t,e)))),l.push(s.map((e=>(0,p.hide_he_hier)(t,e)))),l.push(a.map((e=>(0,p.hide_note_hier)(t,e))));var c=[s,a,l];t.reductions.push(["reduce",c,n,i])}(t,(0,h.ro)(),selected,extraselected)}function m(t,e=200,n=!0){var i=t.svg_elem,o=t.id_prefix,r=(wt(t),(0,p.g)());r.id="hier"+o;var s=Array.from(i.getElementsByClassName("note")).map(p.get_id).map((t=>(0,p.get_by_id)(mei,t))).map(p.get_id).map((t=>(0,p.get_by_id)(mei,"gn-"+t))).filter((t=>null!=t)),a=Array.from(i.getElementsByClassName("relation")).map(p.get_id).map((t=>(0,p.get_by_id)(mei,t))),l=function(t,e,n=!0){var i=(0,h.ro)(),o=[],r=e,s=t.filter((t=>null!=t));do{let t=[];n&&(t=s.filter((t=>!r.find((e=>(0,p.relation_allnodes)(i,e).includes(t))))));var[a,l]=f(i,r,r);t=t.concat(l.filter((t=>s.includes(t)))),o.push(t),s=s.filter((e=>!t.includes(e))),r=r.filter((t=>!a.includes(t)))}while(l.length+a.length>0);return o.push(s),o}(s,a,n),c=l.flatMap(((e,n)=>e.map((e=>{let i=document.getElementById((0,p.id_in_svg)(t,(0,p.node_to_note_id)(e))),[o,r]=(0,p.note_coords)(i);return[e,[o,0-500*n]]})))),u={};c.forEach((([t,n])=>{let i,s=e<100?50:e/2,a=s<100?200:s>200?400:2*s,l=(0,p.node_to_note_id)(t),c=u[n],d=[n[0]+s+10,n[1]+s+25-a];if(c)i=c.getElementsByTagName("text")[0];else{c=(0,p.g)();let t=(0,p.circle)(n,s);c.appendChild(t),c.id="hier"+o+l,i=(0,p.text)("",d),i.style.fontFamiy="sans-serif",i.style.fontSize=a+"px",i.classList.add("nodetext"),c.appendChild(i),r.appendChild(c),u[n]=c}let h=(0,p.tspan)((0,p.note_to_text)(l),d,a);i.appendChild(h)})),a.forEach((t=>{let n=o+t.getAttribute("xml:id"),i=(0,p.relation_type)(t),s=document.getElementById(n),a=(0,p.relation_allnodes)((0,h.ro)(),t).map((t=>c.find((e=>e[0]==t))[1])),l=(0,p.roundedHull)(a,e);l.setAttribute("id","hier"+n),""!=o&&l.setAttribute("oldid",r.getAttribute("xml:id")),l.classList.add("relation"),l.setAttribute("type",i),Nt()&&at(l),l.onclick=function(t){K(s,t.shiftKey)},l.onmouseover=function(t){s.classList.add("relationhover"),s.onmouseover()},l.onmouseout=function(t){s.classList.remove("relationhover"),s.onmouseout()},l.onwheel=t=>{var e=t.target;return(0,p.flip_to_bg)(e),l.onmouseout(),!1},r.appendChild(l)})),(0,p.add_to_svg_bg)(i,r),St(t,500*l.length)}function v(t,e,n){0!=t.children.length?(t.children.forEach((t=>v(t,e,n))),t.y=n+t.children.map((t=>t.y)).reduce(((t,e)=>t>e?t:e))):t.y=e}function y(t,e,n){0!=t.children.length&&(Math.abs(e-t.y)>n&&(t.y+=(e-n-t.y)/2),t.children.forEach((e=>y(e,t.y,n))))}function b(t){return 0==t.children.length?[t]:t.children.flatMap(b)}function _(t){t.children.forEach(_),0!=t.children.length&&null==t.x&&(t.x=(0,p.average)(t.children.map((t=>t.x))))}function x(t,e=0,n=-500){_(t),v(t,e,n),y(t,t.y,n)}function w(t,e=100){var n=(0,p.g)(),i=(0,p.text)(t.label,[t.x,t.y+(0==t.children.length?e:0)]);i.style.fontFamiy="sans-serif",i.style.fontSize=e+"px",i.style.textAnchor="middle",i.classList.add("nodetext");var o=t.children.map((e=>(0,p.line)([t.x,t.y],[e.x,e.y]))),r=t.children.flatMap((t=>w(t,e)));return o.forEach((t=>n.appendChild(t))),r.forEach((t=>n.appendChild(t))),n.appendChild(i),n}function S(t,e=25){var n=t.getBBox(),i=(0,p.rect)([n.x-e,n.y-e],n.width+e,n.height+e);t.parentNode.insertBefore(i,t)}function E(t){var e,n,i=mei.createElement("label");if(i.append(t.label),console.log(t.note_id),t.note_id){var o=mei.createElement("note");o.setAttribute("sameas","#"+t.note_id),i.appendChild(o)}return 0==t.children.length?e=mei.createElement("eLeaf"):(e=mei.createElement("eTree"),n=t.children.map(E)),e.appendChild(i),n&&n.forEach((t=>e.appendChild(t))),e}function A(t){var e=t.children[0],n={label:e.textContent};0!=e.children.length&&(n.note_id=e.querySelector("note").getAttribute("sameas").replace("#",""));var i=Array.from(t.children);return i.shift(),n.children=i.map(A),n}function T(t,e){e.note_id&&(e.x=(0,p.note_coords)((0,p.get_by_id)(document,(0,p.id_in_svg)(t,e.note_id)))[0]),e.children.forEach((e=>T(t,e)))}function k(t){var e=mei.querySelector("eTree");if(e){var n=function(t){return A(t)}(e),i=JSON.stringify(n);document.getElementById(t.id_prefix+"treeinput").value=i}else console.log("No tree to load")}function C(t){var e=document.getElementById(t.id_prefix+"treeinput");if(""!=e.value){var n=e.value,i=JSON.parse(n);if(i)return i;console.log("Failed to parse tree.")}else console.log("No tree to be parsed")}function D(t){var e=C(t);if(e){var n=document.getElementById(t.id_prefix+"treeinput"),o=selected.concat(extraselected);0==selected.length?o=Array.from(t.svg_elem.getElementsByClassName("note")):1==selected.length?selected[0].classList.contains("relation")&&(o=relation_get_notes(selected[0]).map((e=>(0,p.get_by_id)(document,(0,p.id_in_svg)(t,e.getAttribute("xml:id")))))):selected[0].classList.contains("metarelation")||selected.length;var r=o.map((t=>[(0,p.note_coords)(t)[0],t]));r.sort(((t,e)=>t[0]-e[0]));var s=b(e);if(s.length==r.length){for(i in s)s[i].x=r[i][0],s[i].note_id=r[i][1].id;var a=JSON.stringify(e);n.value=a,t.svg_elem.getRootNode().getElementById("tree"+t.id_prefix)&&N(t)}else console.log("Wrong length of list, expected "+s.length+" got "+r.length)}}function N(t,e=0,n=-1e3){var i=t.svg_elem,o=t.id_prefix,r=(wt(t),C(t));if((r||(console.log("No tree in input, attempting to load from XML"),k(t),r=C(t)))&&(function(t){return b(t)[0].hasOwnProperty("note_id")}(r)||(console.log("Tree not aligned, attempting to align to selection"),D(t),r=C(t)))){(function(t){return b(t)[0].hasOwnProperty("x")})(r)||T(t,r),x(r,e,n);var s=w(r);s.id="tree"+o,(0,p.add_to_svg_bg)(i,s),Array.from(s.getElementsByTagName("text")).forEach(S),adjust_top(t,-r.y)}}var M,j,I,L=n(506),O=n(504),B=n(235),P=n(898),z=!1,R=!1,H=!1,U="";const q=()=>j,W=()=>I;var V,Y=null,F=!0;function K(t,e){console.debug("Using globals: selected, extraselected for adding/removing selected items. JQuery for changing displayed text of selected items");var n=(0,p.get_class_from_classlist)(t),i=t.closest("div");if(selected.length>0||extraselected.length>0){var o=(0,p.get_class_from_classlist)(selected.concat(extraselected)[0]),r=selected.concat(extraselected)[0].closest("div");if(n!=o)return;if(i!=r)return}"note"==n?selected.find((e=>e===t))||extraselected.find((e=>e===t))?(t.classList.remove("selectednote"),t.classList.remove("extraselectednote"),selected=selected.filter((e=>e!==t)),extraselected=extraselected.filter((e=>e!==t))):e?(t.classList.add("extraselectednote"),extraselected.push(t),Y=t):(t.classList.add("selectednote"),selected.push(t),Y=t):"relation"!=n&&"metarelation"!=n||(0==selected.concat(extraselected).length&&ot(!0),selected.find((e=>e===t))||extraselected.find((e=>e===t))?(t.classList.remove("extraselectedrelation"),t.classList.remove("selectedrelation"),selected=selected.filter((e=>e!==t)),extraselected=extraselected.filter((e=>e!==t))):e?(t.classList.add("extraselectedrelation"),extraselected.push(t),Y=t):(t.classList.add("selectedrelation"),selected.push(t),Y=t),0==selected.concat(extraselected).length&&(ot(!1),Y=null)),rt(),document.dispatchEvent(new CustomEvent("scoreselection",{detail:{selected,extraselected}}))}function X(t){var e=Array.from(t.svg_elem.getElementsByClassName("relation")).filter((t=>!t.classList.contains("relation--filtered")));if(e.length>0){(0,p.get_class_from_classlist)(e[0]);var n=e[0].closest("div");if(selected.length>0||extraselected.length>0){var i=(0,p.get_class_from_classlist)(selected.concat(extraselected)[0]),o=selected.concat(extraselected)[0].closest("div");"relation"!=i&&gt(),n!=o&&gt()}e.forEach((t=>{t.classList.contains("selectedrelation")||K(t)}))}}function G(t){console.debug("Using globals: document, shades_array, type_shades, type_keys, button_shades for conf");var e=document.createElement("input");e.setAttribute("type","button"),e.classList.add("relationbutton"),e.setAttribute("id",t+"relationbutton"),e.setAttribute("value","Add "+t+" relation ("+type_conf[t].key+")"),e.onclick=()=>{(0,h.i9)(t)},$("#relation_buttons")[0].appendChild(e),d.type_shades[t]=d.shades_array[type_conf[t].colour],d.type_keys[type_conf[t].key]=t,d.button_shades[t+"relationbutton"]=d.shades_array[type_conf[t].colour]}function Q(t){var e=document.createElement("input");e.setAttribute("type","button"),e.classList.add("comborelationbutton"),e.setAttribute("id",t+"comborelationbutton"),e.setAttribute("value","Add "+combo_conf[t].total+" comborelation ("+combo_conf[t].key+")"),e.onclick=()=>{(0,h.lk)(t)},$("#combo_buttons")[0].appendChild(e),d.combo_keys[combo_conf[t].key]=t}function Z(t){console.debug("Using globals: document, shades_array, meta_shades, meta_keys, button_shades for conf");var e=document.createElement("input");e.setAttribute("type","button"),e.classList.add("metarelationbutton"),e.setAttribute("id",t+"metarelationbutton"),e.setAttribute("value","Add "+t+" metarelation ("+meta_conf[t].key+")"),e.onclick=()=>{(0,h.qG)(t)},$("#meta_buttons")[0].appendChild(e),d.meta_shades[t]=d.shades_array[meta_conf[t].colour],d.meta_keys[meta_conf[t].key]=t,d.button_shades[t+"metarelationbutton"]=d.shades_array[meta_conf[t].colour]}function J(t){!function(t){var e=document.createElement("div");e.id=t.id_prefix+"sidebardiv",e.classList.add("sidebar"),t.view_elem.prepend(e);var n=document.createElement("div");n.id=t.id_prefix+"filterdiv",n.classList.add("filterdiv"),n.innerHTML=`&#9776;&nbsp;L${t.layer_number}&nbsp;V${t.view_number}<br/></br>`,e.prepend(n);var i=document.createElement("div");i.classList.add("zoom_buttons");var o=(0,p.button)("+");o.classList.add("zoominbutton"),o.id=t.id_prefix+"zoominbutton";var r=(0,p.button)("");r.classList.add("zoomoutbutton"),r.id=t.id_prefix+"zoomoutbutton",o.onclick=()=>{pt(t)},r.onclick=()=>{ft(t)},i.appendChild(o),i.appendChild(r),n.appendChild(i)}(t);var e=t,n=document.createElement("div");n.classList.add("view_buttons"),n.id=t.id_prefix+"view_buttons";var i=(0,p.button)("Create new layer");i.classList.add("newlayerbutton"),i.id=t.id_prefix+"newlayerbutton";var o=(0,p.checkbox)("Sliced");o.id=t.id_prefix+"slicedcb",o.checked=!1;var r=(0,p.checkbox)("Tied");r.id=t.id_prefix+"tiedcb",r.checked=!1;var s=(0,p.button)("Reduce");s.classList.add("reducebutton"),s.id=t.id_prefix+"reducebutton";var a=(0,p.button)("Unreduce");a.classList.add("unreducebutton"),a.id=t.id_prefix+"unreducebutton";var l=(0,p.button)("Create new view");l.classList.add("rerenderbutton"),l.id=t.id_prefix+"rerenderbutton";var c=(0,p.button)("Play reduction");c.classList.add("midireducebutton"),c.id=t.id_prefix+"midireducebutton";var d=(0,p.button)("Show/update hierarchy");d.classList.add("hierarchybutton"),d.id=t.id_prefix+"hierarchybutton";var f=(0,p.button)("Hide tree/hierarchy");f.classList.add("hidetopbutton"),f.id=t.id_prefix+"hidetopbutton";var v=(0,p.checkbox)("Roots low");v.id=t.id_prefix+"hierarchycb",v.checked=!0,a.onclick=()=>{!function(t){console.log("Using globals: selected/extraselected");var e=t.reductions;if(0!=e.length){selected.forEach(K),extraselected.forEach((t=>{K(t,!0)}));var[n,i,o,r]=e.pop(),[s,a,l]=i;l.flat().forEach((t=>{t&&t.classList.remove("hidden")})),o.forEach((t=>{K(t)})),r.forEach((t=>{K(t,!0)}))}else console.log("Nothing to unreduce")}(e)},s.onclick=()=>{g(e)},l.onclick=()=>{(0,h.k4)(e)},i.onclick=()=>{(0,h.Jt)(e,o.checked,r.checked)},c.onclick=()=>{u.Z.player.loadSound(function(t=null){t||(t=(0,h.kg)()[0]);var e=(0,h.DR)(),n=(0,h.xM)(!0,t),i=(new XMLSerializer).serializeToString(n);e.loadData(i);const o=e.renderToMIDI();var r=(0,h.Yu)();return e.loadData(r),o}(e),e.id_prefix),u.Z.player.play()},d.onclick=()=>{m(e,50,v.checked)},f.onclick=()=>{!function(t){var e=t.svg_elem;t.id_prefix,wt(t)&&(e.getElementsByClassName("definition-scale")[0].setAttribute("viewBox",t.old_viewbox),e.children[0].setAttribute("height",t.old_height))}(e)},n.appendChild(document.createTextNode("")),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(a),n.appendChild(document.createElement("br")),n.appendChild(s),n.appendChild(document.createElement("br")),n.appendChild(l),n.appendChild(document.createElement("br")),n.appendChild(i),n.appendChild(document.createElement("br")),n.appendChild(o);var y=document.createElement("label");y.htmlFor=t.id_prefix+"slicedcb",y.appendChild(document.createTextNode("Sliced")),n.append(y),n.appendChild(r);var b=document.createElement("label");b.htmlFor=t.id_prefix+"tiedcb",b.appendChild(document.createTextNode("Tied")),n.append(b),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(c),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(d),n.appendChild(document.createElement("br")),n.appendChild(v);var _=document.createElement("label");_.htmlFor=t.id_prefix+"hierarchycb",_.appendChild(document.createTextNode("Draw roots low")),n.append(_),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br")),n.appendChild(f),n.appendChild(document.createElement("br")),n.appendChild(document.createElement("br"));var x=document.createElement("textarea");x.id=t.id_prefix+"treeinput",x.width="100px";var w=(0,p.button)("Load tree");w.id=t.id_prefix+"treebutton",w.onclick=()=>{k(e)};var S=(0,p.button)("Save tree");S.id=t.id_prefix+"treebutton",S.onclick=()=>{!function(t){var e,n,i=C(t);i&&(e=E(i),(n=(0,h.ro)().parentNode).querySelector("eTree")&&n.removeChild(n.querySelector("eTree")),n.appendChild(e))}(e)};var A=(0,p.button)("Draw tree: ");A.id=t.id_prefix+"treebutton",A.onclick=()=>{N(e)};var T=(0,p.button)("Align tree to selection");T.id=t.id_prefix+"treebutton",T.onclick=()=>{D(e)},x.onfocus=ut,x.onblur=dt,n.appendChild(A),n.appendChild(document.createElement("br")),n.appendChild(x),n.appendChild(document.createElement("br")),n.appendChild(T),n.appendChild(document.createElement("br")),n.appendChild(w),n.appendChild(S),t.view_elem.children[0].appendChild(n)}function tt(t){"Control"==t.key&&(0,L.xy)(),"Shift"===t.key&&$("#layers").addClass("shift-pressed")}function et(t){"Control"==t.key&&(0,L.Kd)(),"Shift"===t.key&&$("#layers").removeClass("shift-pressed"),"Escape"===t.key&&(document.getElementById("custom_type").blur(),document.getElementById("meta_custom_type").blur())}function nt(t){(0,L.r4)()}function it(t){if(console.debug("Using globals: text_input, meta_keys, type_keys"),!R)if("Enter"==t.key)do_edges();else if(t.key==action_conf.move_relation_to_front){var e=document.elementFromPoint(j,I);"circle"==e.tagName&&(e=e.closest("g")),(0,p.flip_to_bg)(e),e.onmouseout&&e.onmouseout()}else t.key==action_conf.undo?(0,B.FB)():t.key==action_conf.redo?(0,B.VJ)():t.key==action_conf.reduce_relations?g(M):t.key==action_conf.show_hide_notation?st():t.key==action_conf.toggle_type_shades?ct():t.key==action_conf.select_same_notes?(select_samenote(),(0,h.i9)("repeat")):t.key==action_conf.naturalize_note?(0,P.naturalize_notes)():t.key==action_conf.toggle_add_note?(0,L.M_)():t.key==navigation_conf.zoom_out?ft(M):t.key==navigation_conf.zoom_in?pt(M):t.key==navigation_conf.jump_to_next_bookmark?kt(-1):t.key==navigation_conf.jump_to_previous_bookmark?kt(1):t.key==navigation_conf.jump_to_context_below?Ct(1):t.key==navigation_conf.jump_to_context_above?Ct(-1):t.key==action_conf.deselect_all?gt():t.key==action_conf.delete_all?(0,O.x)():t.key==action_conf.add_bookmark?Tt():t.key==custom_conf.relation?(t.preventDefault(),$("#relations_panel").hasClass("collapsed")&&ht(),$("#custom_type").select2("open")):t.key==custom_conf.meta_relation?(t.preventDefault(),$("#relations_panel").hasClass("collapsed")&&ht(),$("#meta_custom_type").select2("open")):d.type_keys[t.key]?(0,h.i9)(d.type_keys[t.key]):d.meta_keys[t.key]?(0,h.qG)(d.meta_keys[t.key]):d.combo_keys[t.key]?(0,h.lk)(d.combo_keys[t.key]):t.key==navigation_conf.toggle_palette?ht():console.log(t)}function ot(t){console.debug("Using globals: document for changing button texts/visibility"),Array.from(document.getElementsByClassName("relationbutton")).forEach((e=>{var n=e.getAttribute("value");t?e.setAttribute("value",n.replace("Add","Set to")):e.setAttribute("value",n.replace("Set to","Add"))})),t?document.getElementById("meta_buttons").classList.remove("none"):document.getElementById("meta_buttons").classList.add("none")}function rt(){var t,e,n=(0,h.ro)(),i=(0,h.kg)();t=(0,p.to_text)(i,n,extraselected),e=(0,p.to_text)(i,n,selected),t||e?($("#selected_things").show(),$("#selected_things").html("<span class='selected_primaries'>Primaries: </span>"+t+"<br/><span class='selected_secondaries'>Secondaries: </span>"+e)):$("#selected_things").hide()}function st(){var t;console.debug("Using globals: non_notes_hidden"),t=z=!z,console.debug("Using globals: document for element selection"),Array.from(document.getElementsByClassName("beam")).forEach((e=>{Array.from(e.children).forEach((e=>{"polygon"==e.tagName&&(t?e.classList.add("hidden"):e.classList.remove("hidden"))}))})),d.hide_classes.forEach((e=>{Array.from(document.getElementsByClassName(e)).forEach((e=>{t?e.classList.add("hidden"):e.classList.remove("hidden")}))})),z||Dt()}function at(t){console.debug("Using globals: shades, type_shades, meta_shades, type_synonym"),!H&&t.getAttribute("old_fill")?(t.setAttribute("fill",t.getAttribute("old_fill")),t.removeAttribute("old_fill")):H&&d.type_shades[t.getAttribute("type")]?(t.setAttribute("old_fill",t.getAttribute("fill")),t.setAttribute("fill",d.type_shades[t.getAttribute("type")])):H&&d.meta_shades[t.getAttribute("type")]?(t.setAttribute("old_fill",t.getAttribute("fill")),t.setAttribute("fill",d.meta_shades[t.getAttribute("type")])):H&&d.type_synonym[t.getAttribute("type")]&&(t.setAttribute("old_fill",t.getAttribute("fill")),t.setAttribute("fill",d.type_shades[d.type_synonym[t.getAttribute("type")]]))}function lt(t){console.debug("Using globals: shades, button_shades"),t.style.color=H?d.button_shades[t.getAttribute("id")]:""}function ct(){console.debug("Using globals: shades, document for element selection"),H=!H,Array.from(document.getElementsByClassName("relation")).forEach(at),Array.from(document.getElementsByClassName("metarelation")).forEach(at),Array.from(document.getElementsByClassName("relationbutton")).forEach(lt),Array.from(document.getElementsByClassName("metarelationbutton")).forEach(lt)}function ut(){R=!0}function dt(){R=!1}function ht(){$("#relations_panel").hasClass("collapsed")?($("#relations_panel").removeClass("collapsed"),$("#relations_panel input").removeClass("none")):($("#relations_panel").addClass("collapsed"),$("#relations_panel input").addClass("none"))}function pt(t){void 0!==t&&(t.zoom=1.1*t.zoom,t.svg_elem.style.transform="scale("+t.zoom+")")}function ft(t){void 0!==t&&(t.zoom=.9090909090909*t.zoom,t.svg_elem.style.transform="scale("+t.zoom+")")}function gt(){selected.forEach((t=>K(t))),extraselected.forEach((t=>K(t,!0)))}function mt(){var t=(0,h.ro)(),e=(0,h.kg)();gt(),$(".relation").remove(),$(".metarelation").remove();var n=Array.from(t.getElementsByTagName("node")),i=n.filter((t=>"relation"==t.getAttribute("type")));n.filter((t=>"metarelation"==t.getAttribute("type"))),e.forEach((e=>{i.forEach((n=>{(0,p.unmark_secondaries)(e,t,n)}))})),e.hullPadding=$("#hull_controller").val(),e.forEach((t=>(0,h.lC)(t))),e.forEach((t=>{t.svg_elem.getRootNode().getElementById("hier"+t.id_prefix)&&m(t)}))}function vt(t){var e=0,n=0,i=0,o=0;function r(r){(r=r||window.event).preventDefault(),e=i-r.clientX,n=o-r.clientY,i=r.clientX,o=r.clientY,i>=0&&o>=0&&(t.style.top=t.offsetTop-n+"px",t.style.left=t.offsetLeft-e+"px")}function s(){document.onmouseup=null,document.onmousemove=null,"undefined"!=typeof drag_selector&&drag_selector.start()}t.onmousedown=function(t){"INPUT"!==t.target.tagName&&((t=t||window.event).preventDefault(),i=t.clientX,o=t.clientY,document.onmouseup=s,document.onmousemove=r,"undefined"!=typeof drag_selector&&drag_selector.stop())}}function yt(t){window.drag_selector=new(c())({selectables:document.getElementsByClassName("relation"),area:$("#layers")[0],draggability:!1,overflowTolerance:{x:1,y:1},autoScrollSpeed:1e-4}),drag_selector.subscribe("dragstart",(({items:t,event:e,isDragging:n})=>{$(".ds-selector-area").show()})),drag_selector.subscribe("dragmove",(({items:t,event:e,isDragging:n})=>{""!=U||document.getElementById("minimap").classList.contains("dragging")||(($(".ds-selector").height()>10||$(".ds-selector").width()>10&&"hull_controller"!=document.activeElement.id)&&($("#load_save, #metadata_input, #relations_panel, .sidebar, #minimap").fadeOut(300),document.getElementById("layers").style.cursor="url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjJwdCIgaGVpZ2h0PSIyMnB0IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA0LjQ0OTIxOSAxNC44MDA3ODEgQyA0LjI2OTUzMSAxNC42MjEwOTQgMy45ODA0NjkgMTQuNjIxMDk0IDMuODAwNzgxIDE0LjgwMDc4MSBDIDMuNjIxMDk0IDE0Ljk4MDQ2OSAzLjYyMTA5NCAxNS4yNjk1MzEgMy44MDA3ODEgMTUuNDQ5MjE5IEMgNS43Njk1MzEgMTcuNDE3OTY5IDUuNzY5NTMxIDE5LjI1IDMuODAwNzgxIDIxLjIxODc1IEMgMy42MjEwOTQgMjEuMzk4NDM4IDMuNjIxMDk0IDIxLjY4NzUgMy44MDA3ODEgMjEuODY3MTg4IEMgMy44OTA2MjUgMjEuOTU3MDMxIDQuMDA3ODEyIDIyIDQuMTI1IDIyIEMgNC4yNDIxODggMjIgNC4zNTkzNzUgMjEuOTU3MDMxIDQuNDQ5MjE5IDIxLjg2NzE4OCBDIDYuNzU3ODEyIDE5LjU1NDY4OCA2Ljc1NzgxMiAxNy4xMTMyODEgNC40NDkyMTkgMTQuODAwNzgxIFogTSA0LjQ0OTIxOSAxNC44MDA3ODEgIi8+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA0LjEyNSAxMS45MTc5NjkgQyAzLjExMzI4MSAxMS45MTc5NjkgMi4yOTI5NjkgMTIuNzM4MjgxIDIuMjkyOTY5IDEzLjc1IEMgMi4yOTI5NjkgMTQuNzYxNzE5IDMuMTEzMjgxIDE1LjU4MjAzMSA0LjEyNSAxNS41ODIwMzEgQyA1LjEzNjcxOSAxNS41ODIwMzEgNS45NTcwMzEgMTQuNzYxNzE5IDUuOTU3MDMxIDEzLjc1IEMgNS45NTcwMzEgMTIuNzM4MjgxIDUuMTM2NzE5IDExLjkxNzk2OSA0LjEyNSAxMS45MTc5NjkgWiBNIDQuMTI1IDE0LjY2Nzk2OSBDIDMuNjIxMDk0IDE0LjY2Nzk2OSAzLjIwNzAzMSAxNC4yNTM5MDYgMy4yMDcwMzEgMTMuNzUgQyAzLjIwNzAzMSAxMy4yNDYwOTQgMy42MjEwOTQgMTIuODMyMDMxIDQuMTI1IDEyLjgzMjAzMSBDIDQuNjI4OTA2IDEyLjgzMjAzMSA1LjA0Mjk2OSAxMy4yNDYwOTQgNS4wNDI5NjkgMTMuNzUgQyA1LjA0Mjk2OSAxNC4yNTM5MDYgNC42Mjg5MDYgMTQuNjY3OTY5IDQuMTI1IDE0LjY2Nzk2OSBaIE0gNC4xMjUgMTQuNjY3OTY5ICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6cmdiKDAlLDAlLDAlKTtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gMjEuNzY1NjI1IDEzLjgwODU5NCBMIDEzLjUxNTYyNSA5LjIyMjY1NiBDIDEzLjM0Mzc1IDkuMTI4OTA2IDEzLjEzNjcxOSA5LjE1MjM0NCAxMi45ODgyODEgOS4yODEyNSBDIDEyLjg0Mzc1IDkuNDEwMTU2IDEyLjc5Mjk2OSA5LjYxMzI4MSAxMi44NjcxODggOS43OTY4NzUgTCAxNi41MzEyNSAxOC45NjA5MzggQyAxNi42MDE1NjIgMTkuMTMyODEyIDE2Ljc2OTUzMSAxOS4yNSAxNi45NTMxMjUgMTkuMjUgQyAxNi45NTMxMjUgMTkuMjUgMTYuOTU3MDMxIDE5LjI1IDE2Ljk1NzAzMSAxOS4yNSBDIDE3LjE0MDYyNSAxOS4yNSAxNy4zMDg1OTQgMTkuMTQwNjI1IDE3LjM3ODkwNiAxOC45NzI2NTYgTCAxOC42ODM1OTQgMTUuOTMzNTk0IEwgMjEuNzIyNjU2IDE0LjYyODkwNiBDIDIxLjg4MjgxMiAxNC41NjI1IDIxLjk4ODI4MSAxNC40MDYyNSAyMiAxNC4yMzA0NjkgQyAyMi4wMDc4MTIgMTQuMDU4NTk0IDIxLjkxNzk2OSAxMy44OTQ1MzEgMjEuNzY1NjI1IDEzLjgwODU5NCBaIE0gMjEuNzY1NjI1IDEzLjgwODU5NCAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOnJnYigwJSwwJSwwJSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDUuNjY0MDYyIDEyLjc2NTYyNSBDIDUuNTc4MTI1IDEyLjYyODkwNiA1LjQ3MjY1NiAxMi41MDc4MTIgNS4zNTU0NjkgMTIuNDAyMzQ0IEMgNS4zMzk4NDQgMTIuMzg2NzE5IDUuMzI0MjE5IDEyLjM3NSA1LjMwODU5NCAxMi4zNjMyODEgQyA1LjIxMDkzOCAxMi4yNzczNDQgNS4xMDU0NjkgMTIuMjA3MDMxIDQuOTkyMTg4IDEyLjE0NDUzMSBDIDQuOTYwOTM4IDEyLjEyODkwNiA0LjkyOTY4OCAxMi4xMDkzNzUgNC44OTg0MzggMTIuMDkzNzUgQyA0Ljc3MzQzOCAxMi4wMzUxNTYgNC42NDQ1MzEgMTEuOTg4MjgxIDQuNTA3ODEyIDExLjk1NzAzMSBDIDQuNDY4NzUgMTEuOTQ5MjE5IDQuNDI1NzgxIDExLjk0OTIxOSA0LjM4MjgxMiAxMS45NDE0MDYgQyA0LjI2OTUzMSAxMS45MjU3ODEgNC4xNTIzNDQgMTEuOTE3OTY5IDQuMDM5MDYyIDExLjkyNTc4MSBDIDMuNjMyODEyIDExLjk0NTMxMiAzLjI2NTYyNSAxMi4wOTc2NTYgMi45Njg3NSAxMi4zMzU5MzggQyAzLjE5MTQwNiAxMi40OTYwOTQgMy40MTQwNjIgMTIuNjQ4NDM4IDMuNjU2MjUgMTIuNzkyOTY5IEMgMy43NSAxMi44NDc2NTYgMy44NTkzNzUgMTIuODY3MTg4IDMuOTY4NzUgMTIuODUxNTYyIEMgNC4zNDc2NTYgMTIuNzg1MTU2IDQuNzUzOTA2IDEyLjk3NjU2MiA0LjkzNzUgMTMuMzM1OTM4IEMgNC45ODgyODEgMTMuNDMzNTk0IDUuMDcwMzEyIDEzLjUxMTcxOSA1LjE2Nzk2OSAxMy41NTA3ODEgQyA1LjQyMTg3NSAxMy42NTYyNSA1LjY4NzUgMTMuNzM4MjgxIDUuOTQ5MjE5IDEzLjgyODEyNSBDIDUuOTQ5MjE5IDEzLjgwMDc4MSA1Ljk1NzAzMSAxMy43NzczNDQgNS45NTcwMzEgMTMuNzUgQyA1Ljk1NzAzMSAxMy4zODY3MTkgNS44NDc2NTYgMTMuMDUwNzgxIDUuNjY0MDYyIDEyLjc2NTYyNSBaIE0gNS42NjQwNjIgMTIuNzY1NjI1ICIvPgo8cGF0aCBzdHlsZT0iIHN0cm9rZTpub25lO2ZpbGwtcnVsZTpub256ZXJvO2ZpbGw6cmdiKDAlLDAlLDAlKTtmaWxsLW9wYWNpdHk6MTsiIGQ9Ik0gMTMuMzgyODEyIDEzLjU1ODU5NCBDIDExLjE5MTQwNiAxMy44OTg0MzggOC44NTkzNzUgMTMuNzUgNi44MDQ2ODggMTMuMTUyMzQ0IEMgNi44NDc2NTYgMTMuMzQzNzUgNi44NzUgMTMuNTQyOTY5IDYuODc1IDEzLjc1IEMgNi44NzUgMTMuODcxMDk0IDYuODU1NDY5IDEzLjk4ODI4MSA2LjgzOTg0NCAxNC4xMDkzNzUgQyA4LjE1NjI1IDE0LjQ2ODc1IDkuNTY2NDA2IDE0LjY2Nzk2OSAxMSAxNC42Njc5NjkgQyAxMS45MjU3ODEgMTQuNjY3OTY5IDEyLjgzOTg0NCAxNC41ODIwMzEgMTMuNzM0Mzc1IDE0LjQyOTY4OCBaIE0gMTMuMzgyODEyIDEzLjU1ODU5NCAiLz4KPHBhdGggc3R5bGU9IiBzdHJva2U6bm9uZTtmaWxsLXJ1bGU6bm9uemVybztmaWxsOnJnYigwJSwwJSwwJSk7ZmlsbC1vcGFjaXR5OjE7IiBkPSJNIDExIDAgQyA0LjkzMzU5NCAwIDAgMy4yODkwNjIgMCA3LjMzMjAzMSBDIDAgOC45NDE0MDYgMC44MDQ2ODggMTAuNDkyMTg4IDIuMjM4MjgxIDExLjc1NzgxMiBDIDIuNDY4NzUgMTEuNTM5MDYyIDIuNzM4MjgxIDExLjM1NTQ2OSAzLjAzNTE1NiAxMS4yMjY1NjIgQyAxLjY3OTY4OCAxMC4xMDkzNzUgMC45MTc5NjkgOC43MzgyODEgMC45MTc5NjkgNy4zMzIwMzEgQyAwLjkxNzk2OSAzLjc5Njg3NSA1LjQ0MTQwNiAwLjkxNzk2OSAxMSAwLjkxNzk2OSBDIDE2LjU1ODU5NCAwLjkxNzk2OSAyMS4wODIwMzEgMy43OTY4NzUgMjEuMDgyMDMxIDcuMzMyMDMxIEMgMjEuMDgyMDMxIDguNzUzOTA2IDIwLjM0Mzc1IDEwLjEwMTU2MiAxOC45ODgyODEgMTEuMjE4NzUgTCAxOS44Mzk4NDQgMTEuNjg3NSBDIDIxLjIyNjU2MiAxMC40Mzc1IDIyIDguOTEwMTU2IDIyIDcuMzMyMDMxIEMgMjIgMy4yODkwNjIgMTcuMDY2NDA2IDAgMTEgMCBaIE0gMTEgMCAiLz4KPC9nPgo8L3N2Zz4K), auto"),document.elementsFromPoint(j,I).map((t=>{switch(t.tagName){case"path":return t;case"use":return t.parentElement.parentElement;case"circle":return t.parentElement;default:return!1}})).filter((t=>{if(void 0===t||void 0===t.classList)return!1;var n=e.shiftKey;return t.classList.contains("relation")&&!t.classList.contains("relation--filtered")&&!t.classList.contains("selectedrelation")&&!t.classList.contains("extraselectedrelation")&&!n||t.classList.contains("note")&&!t.classList.contains("selectednote")&&!t.classList.contains("extraselectednote")||t.classList.contains("metarelation")&&!t.classList.contains("selectedrelation")&&!t.classList.contains("extraselectedrelation")&&!n})).forEach((t=>K(t))))})),drag_selector.subscribe("callback",(({items:t,event:e,isDragging:n})=>{document.getElementById("layers").style.cursor="default",$(".ds-selector-area").hide(),$("#load_save, #metadata_input, #relations_panel, .sidebar, #minimap").fadeIn(300)}))}function bt(){if(null!=j){var t=[document.elementFromPoint(j,I)].map((t=>{if(t)switch(t.tagName){case"path":return t;case"use":return t.parentElement.parentElement;case"circle":return t.parentElement;default:return!1}})).filter((t=>void 0!==t&&void 0!==t.classList&&(t.classList.contains("relation")&&!t.classList.contains("relation--filtered")||t.classList.contains("metarelation"))))[0];(t=t?t.getAttribute("type"):"")?($(".jBox-Mouse").show(),V.setContent(t)):$(".jBox-Mouse").hide()}}function _t(){void 0!==V&&V.destroy(),V=new(a())("Mouse",{attach:"#layers",trigger:"mouseenter",onPosition:bt})}function xt(){$("#custom_type, #meta_custom_type").on("select2:opening",(function(){ut()})),$("#custom_type").on("select2:closing",(function(){dt(),(0,h.i9)($("#custom_type :selected").text())})),$("#meta_custom_type").on("select2:closing",(function(t){dt(),(0,h.qG)($("#meta_custom_type :selected").text())}))}function wt(t){var e=t.svg_elem,n=t.id_prefix,i=e.getRootNode().getElementById("hier"+n);return(i||!!(i=e.getRootNode().getElementById("tree"+n)))&&(i.parentNode.removeChild(i),!0)}function St(t,e){var n,i,o,r,s=t.svg_elem,a=s.children[0].getAttribute("height"),l=s.getElementsByClassName("definition-scale")[0].getAttribute("viewBox");t.old_viewbox?([n,i,o,r]=t.old_viewbox.split(" "),a=t.old_height):([n,i,o,r]=l.split(" "),t.old_viewbox=l,t.old_height=a),s.getElementsByClassName("definition-scale")[0].setAttribute("viewBox",[n,Number(i)-e,o,Number(r)+e].join(" "));var c=Number(a.split("p")[0]);s.children[0].setAttribute("height",c*((r-(i-e))/(r-i))+"px")}function Et(){document.getElementById("minimap").width=100,r()(document.querySelector("#minimap"),{viewport:null,styles:{".svg_container":"rgba(0,0,0,0.30)",".layer":"rgba(0,0,0,0.00)"},back:"rgba(0,0,0,0.30)",view:"rgba(0,0,0,0.20)",drag:"rgba(0,0,0,0.30)",interval:null})}window.onmousedown=t=>{var e=document.elementFromPoint(j,I),n=(0,h.kg)().find((t=>t.view_elem.contains(e)));!navigation_conf.switch_context_on_hover&&n&&Ot(n),(0,p.indicate_current_context)()},window.onmousemove=t=>{j=t.clientX,I=t.clientY;var e=document.elementFromPoint(j,I),n=(0,h.kg)().find((t=>t.view_elem.contains(e)));navigation_conf.switch_context_on_hover&&n&&Ot(n),(0,p.indicate_current_context)(),""!=U&&(0,L.TU)()},document.getElementById("equalizebutton").addEventListener("click",st),document.getElementById("shadesbutton").addEventListener("click",ct),document.getElementById("relations_panel_toggle").addEventListener("click",ht);var At=[];function Tt(){if(!Y)return!1;if(!Y.classList.contains("note"))return!1;var t=Y,e=document.createElementNS("http://www.w3.org/2000/svg","rect"),n=M.id_prefix?M.id_prefix:"0";e.dataset.draw_context=n,e.classList.add("bookmark"),e.setAttribute("fill","red"),e.setAttribute("width","500px"),e.setAttribute("height","1500px"),e.setAttribute("transform","translate(-120 -750)"),e.setAttribute("x",t.children[0].children[0].getAttribute("x")),e.setAttribute("y",t.children[0].children[0].getAttribute("y")),$(M.svg_elem).find(".page-margin")[0].prepend(e),At.push(e),At.sort((function(t,e){return t.getAttribute("x")-e.getAttribute("x")}))}function kt(t=1){var e=Lt();if(e){var n=e.id_prefix?e.id_prefix:"0",i=At.filter((t=>t.dataset.draw_context==n)),o=i.map((t=>t.getBoundingClientRect().x)),r=o.findIndex((t=>t>=window.innerWidth)),s=o.filter((t=>t<=0)).length-1;if(1==t&&-1!=r)var a=i[r];else{if(-1!=t||-1==s)return!1;a=i[s]}a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}function Ct(t=1){var e,n=(0,h.kg)().sort(((t,e)=>t.view_elem.getBoundingClientRect().y-e.view_elem.getBoundingClientRect().y)),i=n.map((t=>t.view_elem.getBoundingClientRect().y)),o=n.map((t=>t.view_elem.getBoundingClientRect().bottom));if(1==t)e=o.findIndex((t=>t>window.innerHeight));else{if(-1!=t)return!1;e=i.filter((t=>t<0)).length-1}-1!=e&&n[e].view_elem.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}function Dt(){Array.from(document.querySelectorAll("g.note")).forEach((t=>t.classList.remove("hidden")))}document.getElementById("addbookmarkbutton").addEventListener("click",Tt),document.getElementById("previousbookmarkbutton").addEventListener("click",(()=>kt(-1))),document.getElementById("nextbookmarkbutton").addEventListener("click",(()=>kt(1))),document.getElementById("previouscontextbutton").addEventListener("click",(()=>Ct(-1))),document.getElementById("nextcontextbutton").addEventListener("click",(()=>Ct(1))),document.getElementById("orphannotesbutton").addEventListener("click",(function(){var t,e,n;(F=!F)?Dt():(t=(0,h.ro)(),e=Array.from(document.getElementsByClassName("note")).map((t=>t.id)),n=Array.from(t.getElementsByTagName("arc")).map((t=>t.getAttribute("to"))),e.forEach((t=>{var e=t.replace(/(^\d+-?)/,"");n.includes(`#gn-${e}`)||document.getElementById(t).classList.add("hidden")})),z||st())}));const Nt=()=>H,Mt=()=>V,jt=()=>U,It=t=>U=t,Lt=()=>M,Ot=t=>M=t},235:(t,e,n)=>{"use strict";n.d(e,{FB:()=>l,I$:()=>c,VJ:()=>u});var i=n(974),o=n(506),r=n(504),s=n(714),a=n(624);function l(){console.debug("Using globals: undo_actions, selected, extraselected, mei, rerendered_after_action");var t=(0,i.tu)();if(0==t.length)return void console.log("Nothing to undo");if(t.length==(0,i.jA)())return console.log("Cannot undo past a rerender"),void alert("Cannot undo past a rerender.");selected.forEach(s.dB),extraselected.forEach((t=>{(0,s.dB)(t,!0)}));var e=(0,i.kg)(),n=(0,i.LO)();const[o,r,l,c]=t.pop();if("edges"==o||"relation"==o||"metarelation"==o){var u=r;let t,d,h=u.flat().find((t=>"node"==t.tagName&&t.getAttribute("type")==o));if(!h)return void console.log("Could not find graph element of (meta)relation to undo: ",r);if(t=h.getAttribute("xml:id"),h.children.length>0&&(d=h.children[0].getAttribute("type")),"relation"==o)for(const t of e)(0,a.unmark_secondaries)(t,(0,i.ro)(),h);u.flat().forEach((t=>{(0,a.node_referred_to)(t.getAttribute("xml:id"))||t.parentNode.removeChild(t)})),Array.from(document.querySelectorAll('[oldid="'+t+'"]')).forEach((t=>t.parentNode.removeChild(t))),l.forEach((t=>{(0,s.dB)(document.getElementById(t.id))})),c.forEach((t=>{(0,s.dB)(document.getElementById(t.id),!0)})),n.push([o,[d,t],l,c])}else if("delete relation"==o)r.forEach((t=>{t[1].insertBefore(t[0],t[2]);let n=e.find((e=>e.svg_elem.contains(t[0]))),o="relation"==(0,a.get_class_from_classlist)(t[0]);if(n&&o){let e=(0,a.get_id)(t[0]),o=(0,a.get_by_id)(mei,e);(0,a.mark_secondaries)(n,(0,i.ro)(),o)}})),l.forEach((t=>{(0,s.dB)(t)})),c.forEach((t=>{(0,s.dB)(t,!0)})),n.push([o,[],l,c]);else if("change relation type"==o){var h=r;let t=r[0][1];l.concat(c).forEach((t=>{var[e,n]=h.pop(),i=(0,a.id_or_oldid)(t),o=[(0,a.get_by_id)(document,i)].concat((0,a.get_by_oldid)(document,i));o.forEach((t=>t.setAttribute("type",e))),(0,a.get_by_id)(mei,i).getElementsByTagName("label")[0].setAttribute("type",e),o.forEach(s.up)})),l.forEach((t=>{(0,s.dB)(t)})),c.forEach((t=>{(0,s.dB)(t,!0)})),n.push([o,t,l,c])}else if("add note"==o){var[p,f]=r;f.forEach((t=>t.parentNode.removeChild(t)));let t=p[0].getAttribute("pname"),e=p[0].getAttribute("oct"),i=p[0].getAttribute("xml:id"),s=l[0];if(p[0].parentNode.removeChild(p[0]),p.length>1){var g=p[1];g.parentNode.insertBefore(g.children[0],g),g.parentNode.removeChild(g)}n.push([o,[t,e,s,i],l,c])}(0,s.e6)(),d()}function c(){(0,i.Ln)([]),d()}function u(){var t=(0,i.LO)();if(0==t.length)return void console.log("Nothing to redo");selected.forEach(s.dB),extraselected.forEach((t=>{(0,s.dB)(t,!0)}));const[e,n,a,l]=t.pop();let c,u;switch(a.forEach((t=>(0,s.dB)(document.getElementById(t.id)))),l.forEach((t=>{(0,s.dB)(document.getElementById(t.id),!0)})),e){case"relation":[c,u]=n,(0,i.i9)(c,u,!0);break;case"metarelation":[c,u]=n,(0,i.qG)(c,u,!0);break;case"change relation type":c=n,(0,i.i9)(c,"",!0);break;case"delete relation":(0,r.x)(!0);break;case"add note":let[t,e,l,d]=n;(0,o.f5)(t,e,l,d,!0),(0,s.dB)(a[0])}d()}function d(){document.dispatchEvent(new CustomEvent("undoredo",{detail:{redoAbleCount:(0,i.LO)().length,undoAbleCount:(0,i.tu)().length}}))}},624:(t,e,n)=>{"use strict";n.r(e),n.d(e,{roundedHull:()=>h,line:()=>p,circle:()=>f,rect:()=>g,text:()=>m,tspan:()=>v,flip_to_bg:()=>y,add_to_svg_bg:()=>b,g:()=>_,random_id:()=>x,note_coords:()=>w,get_by_oldid:()=>S,get_by_id:()=>E,id_or_oldid:()=>A,get_id:()=>T,id_in_svg:()=>k,node_referred_to:()=>C,node_to_note_id:()=>D,mod:()=>N,average2:()=>M,relation_get_notes:()=>j,relation_get_notes_separated:()=>I,relation_allnodes:()=>L,relation_primaries:()=>O,relation_secondaries:()=>B,relation_type:()=>P,add_mei_node_for:()=>z,hide_note:()=>R,hide_note_hier:()=>H,hide_he:()=>U,hide_he_hier:()=>q,mark_secondaries:()=>W,unmark_secondaries:()=>V,get_class_from_classlist:()=>Y,get_metarelation_target:()=>F,average:()=>K,note_to_text:()=>X,to_text:()=>G,fix_synonyms:()=>Q,note_to_rest:()=>J,note_to_chord:()=>tt,prefix_ids:()=>et,clone_mei:()=>nt,get_id_pairs:()=>it,new_layer_element:()=>ot,new_view_elements:()=>rt,checkbox:()=>st,button:()=>at,indicate_current_context:()=>lt,matcher:()=>ct,arrayToSelect2:()=>ut,sanitize_xml:()=>dt,check_for_duplicate_relations:()=>ht,draw_context_of:()=>pt});var i=n(617),o=n(974),r=n(36),s=n(714),a=function(t,e){return[t*e[0],t*e[1]]},l=function(t,e){return[t[0]+e[0],t[1]+e[1]]},c=function(t,e){var n=[t[1]-e[1],e[0]-t[0]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/i,n[1]/i]},u=function(t,e){var n=[t[0][0],t[0][1]-e];return"M "+n+" A "+[e,e,"0,0,0",[t[0][0],parseInt(t[0][1])+parseInt(e)]].join(",")+" A "+[e,e,"0,0,0",n].join(",")},d=function(t,e){var n=a(e,c(t[0],t[1])),i=a(-1,n),o=l(t[0],n),r=l(t[1],n),s=l(t[1],i),u=l(t[0],i);return"M "+o+" L "+r+" A "+[e,e,"0,0,0",s].join(",")+" L "+u+" A "+[e,e,"0,0,0",o].join(",")};function h(t){var e=(0,o.kg)().hullPadding||200,n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("fill",function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(4+8*Math.random())];return t}()),1==t.length?n.setAttribute("d",u(t,e)):2==t.length?n.setAttribute("d",d(t,e)):n.setAttribute("d",function(t,e){if(!t||t.length<1)return"";if(1===t.length)return u(t,e);if(2===t.length)return d(t,e);for(var n=new Array(t.length),i=0;i<n.length;++i){var o=0===i?t[t.length-1]:t[i-1],r=t[i],s=a(e,c(o,r));n[i]=[l(o,s),l(r,s)]}var h="A "+[e,e,"0,0,0,"].join(",");return(n=n.map((function(t,e){var i="";return 0===e&&(i="M "+n[n.length-1][1]+" "),i+(h+t[0]+" L ")+t[1]}))).join(" ")}((0,i.WFE)(t),e)),n}function p(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","line");return n.setAttribute("x1",t[0]),n.setAttribute("y1",t[1]),n.setAttribute("x2",e[0]),n.setAttribute("y2",e[1]),n.style.stroke="#000",n.style.strokeWidth="15px",n}function f(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","circle");return n.setAttribute("cx",t[0]),n.setAttribute("cy",t[1]),n.setAttribute("r",e),n.style.stroke="#000",n.style.strokeWidth="15px",n}function g(t,e,n){var i=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.setAttribute("x",t[0]),i.setAttribute("y",t[1]),i.setAttribute("width",e),i.setAttribute("height",n),i.style.stroke="#000",i.style.fill="white",i.style.strokeWidth="15px",i}function m(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","text");return e&&(n.setAttribute("x",e[0]),n.setAttribute("y",e[1])),n.append(t),n}function v(t,e,n,i=0){var o=document.createElementNS("http://www.w3.org/2000/svg","tspan");return o.setAttribute("x",e[0]),o.setAttribute("dx",i),o.setAttribute("dy",n),o.append(t),o}function y(t){var e=(0,s.gB)(),n=t.parentElement;n.removeChild(t),n.insertBefore(t,n.children[0]),e.close(),e.open()}function b(t,e){var n=t.getElementsByClassName("system")[0];n.parentNode.insertBefore(e,n)}function _(){return document.createElementNS("http://www.w3.org/2000/svg","g")}function x(t=5){return Math.floor(Math.random()*(1<<4*t)).toString(16)}function w(t){return[t.getElementsByTagName("use")[0].x.animVal.value+100,t.getElementsByTagName("use")[0].y.animVal.value]}function S(t,e){"#"==e[0]&&(e=e.slice(1));var n=t.querySelectorAll("[*|oldid='"+e+"']");return n?Array.from(n):Array.from(t.all).find((t=>t.getAttribute("oldid")==e))}function E(t,e){return e?("#"==e[0]&&(e=e.slice(1)),t.querySelector("[*|id='"+e+"']")||Array.from(t.getElementsByTagName("*")).find((t=>t.getAttribute("id")==e||t.getAttribute("xml:id")==e))):null}function A(t){return t.hasAttribute("oldid")?t.getAttribute("oldid"):t.id}function T(t){if(document.contains(t))return t.hasAttribute("oldid")?T(document.getElementById(t.getAttribute("oldid"))):t.id;if(t.hasAttribute("xml:id")){if(t.hasAttribute("sameas"))return T(E(mei,t.getAttribute("sameas")));if(t.hasAttribute("corresp"))return T(E(mei,t.getAttribute("corresp")));if(t.hasAttribute("copyof"))return T(E(mei,t.getAttribute("copyof")));if(t.hasAttribute("xml:id"))return t.getAttribute("xml:id")}}function k(t,e){if(e){"#"==e[0]&&(e=e.slice(1));var n=function(t,e){"#"==e[0]&&(e=e.slice(1));var n=t.id_mapping.find((t=>t[1]==e));return n?n[0]:void 0}(t.layer,e),i=document.getElementById(n);return t.svg_elem.contains(i)?n:n?t.id_prefix+n:void 0}}function C(t){return console.debug("Using global: mei to find element"),Array.from(mei.getElementsByTagName("arc")).filter((e=>e.getAttribute("from")=="#"+t||e.getAttribute("to")=="#"+t)).length>0}function D(t){return t.getElementsByTagName("label")[0].getElementsByTagName("note")[0].getAttribute("sameas").replace("#","")}function N(t,e){return(t%e+e)%e}function M(t,e){return(t+e)/2}function j(t){return L((0,o.ro)(),t=E(mei,T(t))).map(D).map((t=>E(mei,t)))}function I(t){var e=(0,o.ro)();return[O(e,t=E(mei,T(t))).map(D).map((t=>E(mei,t))),B(e,t).map(D).map((t=>E(mei,t)))]}function L(t,e){var n=Array.from(t.getElementsByTagName("arc")),i=[];return n.forEach((n=>{n.getAttribute("from")=="#"+e.getAttribute("xml:id")&&i.push(E(t.getRootNode(),n.getAttribute("to")))})),i}function O(t,e){var n=Array.from(t.getElementsByTagName("arc")),i=[];return n.forEach((n=>{n.getAttribute("from")=="#"+e.getAttribute("xml:id")&&"primary"==n.getAttribute("type")&&i.push(E(t.getRootNode(),n.getAttribute("to")))})),i}function B(t,e){var n=Array.from(t.getElementsByTagName("arc")),i=[];return n.forEach((n=>{n.getAttribute("from")=="#"+e.getAttribute("xml:id")&&"secondary"==n.getAttribute("type")&&i.push(E(t.getRootNode(),n.getAttribute("to")))})),i}function P(t){return 0==t.children.length?"":t.children[0].getAttribute("type")}function z(t,e){var n=T(e),i=T(E(mei,n)),o=E(t.getRootNode(),"gn-"+i);if(null!=o)return o;o=t.getRootNode().createElement("node");var r=t.getRootNode().createElement("label");return(e=t.getRootNode().createElement("note")).setAttribute("sameas","#"+i),o.appendChild(r),r.appendChild(e),o.setAttribute("xml:id","gn-"+i),t.appendChild(o),o}function R(t,e){var n=E(t.svg_elem.getRootNode(),k(t,D(e)));return n&&t.svg_elem.contains(n)&&n.classList.add("hidden"),n}function H(t,e){var n=E(t.svg_elem.getRootNode(),"hier"+k(t,D(e)));return n&&t.svg_elem.contains(n)&&n.classList.add("hidden"),n}function U(t,e){var n=E(t.svg_elem.getRootNode(),t.id_prefix+e.getAttribute("xml:id"));return n&&t.svg_elem.contains(n)&&n.classList.add("hidden"),n}function q(t,e){var n=E(t.svg_elem.getRootNode(),"hier"+t.id_prefix+e.getAttribute("xml:id"));return n&&t.svg_elem.contains(n)&&n.classList.add("hidden"),n}function W(t,e,n){t.svg_elem,"node"!=n.tagName&&(n=E(e.getRootNode(),n.id)),B(e,n).forEach((e=>{!function(t){if(t)if(t.classList.contains("secondarynote")){var e=getComputedStyle(t).getPropertyValue("--how-secondary");t.style.setProperty("--how-secondary",2*e)}else t.classList.add("secondarynote"),t.style.setProperty("--how-secondary",2);else console.log("Not a note")}(document.getElementById(k(t,D(e))))}))}function V(t,e,n){t.svg_elem,"node"!=n.tagName&&(n=E(e.getRootNode(),n.id)),B(e,n).forEach((e=>{!function(t){if(t){var e=getComputedStyle(t).getPropertyValue("--how-secondary");t.style.setProperty("--how-secondary",e/2),e/2==1&&t.classList.remove("secondarynote")}else console.log("Not a note")}(document.getElementById(k(t,D(e))))}))}function Y(t){if(void 0!==t){var e="";return t.classList.contains("note")?e="note":t.classList.contains("relation")?e="relation":t.classList.contains("metarelation")&&(e="metarelation"),e}return!1}function F(t){if(t.classList.contains("metarelation")){var e=t.getElementsByTagName("circle")[0];return[e.cx.baseVal.value,e.cy.baseVal.value]}return t.classList.contains("relation")?function(t){var e=t.getBBox();return[e.x+e.width/2,e.y+e.height/2]}(t):(console.log("wtf"),console.log(t),[0,0])}function K(t){return t.reduce(((t,e)=>t+e),0)/t.length}function X(t){var e=E(mei,t),n=function(t){if(console.debug("Using globals: document, mei to find element"),document.contains(t)&&(t=E(mei,T(t))),t.hasAttribute("accid.ges"))return t.getAttribute("accid.ges");if(t.hasAttribute("accid"))return t.getAttribute("accid");if(0==t.children.length)return"";var e=t.getElementsByTagName("accid");if(0==e.length)return"";var n=e[0];return n.hasAttribute("accid.ges")?n.getAttribute("accid.ges"):n.hasAttribute("accid")?n.getAttribute("accid"):""}(e);return n=(n=(n=n.replace(/s/g,"#")).replace(/f/g,"b")).replace(/n/g,""),e.getAttribute("pname")+n+e.getAttribute("oct")}function G(t,e,n){return 0==n.length?"":n[0].classList.contains("note")?(n.sort(((t,e)=>{const[n,i]=w(t),[o,r]=w(e);return n-o==0?r-i:n-o})),"notes("+n.map((t=>X(T(t)))).join("; ")+")"):n[0].classList.contains("relation")?"relations("+n.map((t=>t.getAttribute("type"))).join("; ")+")":n[0].classList.contains("metarelation")?"metarelations("+n.map((t=>t.getAttribute("type"))).join("; ")+")":void 0}function Q(t){return Array.from(t.getElementsByTagName("node")).forEach((t=>{"hyperedge"==t.getAttribute("type")&&t.setAttribute("type","relation"),"metaedge"==t.getAttribute("type")&&t.setAttribute("type","metarelation")})),t}var Z=["dur","n","dots","when","layer","staff","tstamp.ges","tstamp.real","tstamp","loc","dur.ges","dots.ges","dur.metrical","dur.ppq","dur.real","dur.recip","beam","fermata","tuplet"];function J(t,e){var n=t.createElementNS("http://www.music-encoding.org/ns/mei","rest");n.setAttribute("xml:id","rest-"+e.getAttribute("xml:id"));for(let t of Z)e.hasAttribute(t)&&n.setAttribute(t,e.getAttribute(t));return n}function tt(t,e){var n=t.createElementNS("http://www.music-encoding.org/ns/mei","chord");n.setAttribute("xml:id","chord-"+e.getAttribute("xml:id"));for(const t of Z)e.hasAttribute(t)&&n.setAttribute(t,e.getAttribute(t));return n}function et(t,e){t.id&&(t.setAttribute("oldid",t.id),t.id=e+t.id),t.getAttribute("xml:id")&&t.setAttribute("xml:id",e+t.getAttribute("xml:id")),t.getAttribute("startid")&&t.setAttribute("startid",e+t.getAttribute("startid")),t.getAttribute("endid")&&t.setAttribute("endid",e+t.getAttribute("endid")),Array.from(t.children).forEach((t=>et(t,e)))}function nt(t){var e=t.implementation.createDocument(t.namespaceURI,null,null),n=e.importNode(t.documentElement,!0);return e.appendChild(n),e}function it(t){var e;return t.id?e=[t.id,T(t)]:t.hasAttribute("xml:id")&&(e=[t.getAttribute("xml:id"),T(t)]),e?[e].concat(Array.from(t.children).flatMap(it)):Array.from(t.children).flatMap(it)}function ot(){var t=document.getElementById("layers"),e=document.createElement("div");return e.id="layer"+t.children.length,e.classList.add("layer"),t.appendChild(e),e}function rt(t){var e=(0,o.kg)(),n=document.createElement("div");n.id="view"+e.length,n.classList.add("view");var i=document.createElement("div");return i.id="svg"+e.length,i.classList.add("svg_container"),n.appendChild(i),t.appendChild(n),[n,i]}function st(t){var e=document.createElement("input");return e.setAttribute("type","checkbox"),e.setAttribute("value",t),e}function at(t){var e=document.createElement("input");return e.setAttribute("type","button"),e.setAttribute("value",t),e}function lt(){var t=(0,s.c)();void 0!==t&&($(".view").removeClass("view_active"),t.view_elem.classList.add("view_active"),$(".sidebar").removeClass("sidebar_active"),t.view_elem.children[0].classList.add("sidebar_active"))}function ct(t,e){return""===$.trim(t.term)?e:void 0===e.text?null:function(t,e){var n=e.length,i=t.length;if(i>n)return!1;if(i===n)return t===e;t:for(var o=0,r=0;o<i;o++){for(var s=t.charCodeAt(o);r<n;)if(e.charCodeAt(r++)===s)continue t;return!1}return!0}(t.term.toUpperCase(),e.text.toUpperCase())?$.extend({},e,!0):null}function ut(t){return t.map((t=>({id:t,text:t})))}function dt(t){var e=t;return r.strip_xml_tags.forEach((e=>{Array.from(t.getElementsByTagName(e)).forEach((t=>{t.parentNode.removeChild(t)}))})),e}function ht(t,e,n){var i=(0,o.ro)(),r=e.map((t=>t.getAttribute("id").replace(/(^\d+-?)/,"gn-"))).sort(((t,e)=>t<e)),s=n.map((t=>t.getAttribute("id").replace(/(^\d+-?)/,"gn-"))).sort(((t,e)=>t<e));return Array.from(i.querySelectorAll("[type='relation']")).filter((e=>e.children[0].getAttribute("type")==t)).forEach((t=>{var e=I(t),n=e[0],i=e[1];if(n=n.map((t=>t.getAttribute("xml:id"))).sort(((t,e)=>t<e)),i=i.map((t=>t.getAttribute("xml:id"))).sort(((t,e)=>t<e)),JSON.stringify(r)==JSON.stringify(n)&&JSON.stringify(s)==JSON.stringify(i))return alert("Warning: This relation already exists.\nCreating a duplicate anyway."),!1})),!0}function pt(t){var e=(0,o.kg)().filter((e=>e.svg_elem.contains(t)));return 0==e.length?null:e[0]}},617:(t,e,n)=>{"use strict";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var o,r;n.d(e,{WFE:()=>Mn,K2I:()=>Bn}),1===(o=i).length&&(r=o,o=function(t,e){return i(r(t),e)});var s=Array.prototype;function a(){}function l(t){return null==t?a:function(){return this.querySelector(t)}}function c(){return[]}function u(t){return null==t?c:function(){return this.querySelectorAll(t)}}function d(t){return function(){return this.matches(t)}}function h(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function f(t,e,n,i,o,r){for(var s,a=0,l=e.length,c=r.length;a<c;++a)(s=e[a])?(s.__data__=r[a],i[a]=s):n[a]=new p(t,r[a]);for(;a<l;++a)(s=e[a])&&(o[a]=s)}function g(t,e,n,i,o,r,s){var a,l,c,u={},d=e.length,h=r.length,f=new Array(d);for(a=0;a<d;++a)(l=e[a])&&(f[a]=c="$"+s.call(l,l.__data__,a,e),c in u?o[a]=l:u[c]=l);for(a=0;a<h;++a)(l=u[c="$"+s.call(t,r[a],a,r)])?(i[a]=l,l.__data__=r[a],u[c]=null):n[a]=new p(t,r[a]);for(a=0;a<d;++a)(l=e[a])&&u[f[a]]===l&&(o[a]=l)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}s.slice,s.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2),Array.prototype.slice,p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var v="http://www.w3.org/1999/xhtml";const y={svg:"http://www.w3.org/2000/svg",xhtml:v,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function b(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),y.hasOwnProperty(e)?{space:y[e],local:t}:t}function _(t){return function(){this.removeAttribute(t)}}function x(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w(t,e){return function(){this.setAttribute(t,e)}}function S(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function E(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function T(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function k(t){return function(){this.style.removeProperty(t)}}function C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function D(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function N(t,e){return t.style.getPropertyValue(e)||T(t).getComputedStyle(t,null).getPropertyValue(e)}function M(t){return function(){delete this[t]}}function j(t,e){return function(){this[t]=e}}function I(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function O(t){return t.classList||new B(t)}function B(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function P(t,e){for(var n=O(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function z(t,e){for(var n=O(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function $(t){return function(){P(this,t)}}function R(t){return function(){z(this,t)}}function H(t,e){return function(){(e.apply(this,arguments)?P:z)(this,t)}}function U(){this.textContent=""}function q(t){return function(){this.textContent=t}}function W(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function V(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function F(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function K(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===v&&e.documentElement.namespaceURI===v?e.createElement(t):e.createElementNS(n,t)}}function Q(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Z(t){var e=b(t);return(e.local?Q:G)(e)}function J(){return null}function tt(){var t=this.parentNode;t&&t.removeChild(this)}function et(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}B.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var it={},ot=null;function rt(t,e,n){return t=st(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function st(t,e,n){return function(i){var o=ot;ot=i;try{t.call(this,this.__data__,e,n)}finally{ot=o}}}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function lt(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.capture);++o?e.length=o:delete this.__on}}}function ct(t,e,n){var i=it.hasOwnProperty(t.type)?rt:st;return function(o,r,s){var a,l=this.__on,c=i(e,r,s);if(l)for(var u=0,d=l.length;u<d;++u)if((a=l[u]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=e);this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(a):this.__on=[a]}}function ut(t,e,n){var i=T(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function dt(t,e){return function(){return ut(this,t,e)}}function ht(t,e){return function(){return ut(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(it={mouseenter:"mouseover",mouseleave:"mouseout"}));var pt=[null];function ft(t,e){this._groups=t,this._parents=e}function gt(){return new ft([[document.documentElement]],pt)}ft.prototype=gt.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=l(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s,a=e[o],c=a.length,u=i[o]=new Array(c),d=0;d<c;++d)(r=a[d])&&(s=t.call(r,r.__data__,d,a))&&("__data__"in r&&(s.__data__=r.__data__),u[d]=s);return new ft(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var s,a=e[r],l=a.length,c=0;c<l;++c)(s=a[c])&&(i.push(t.call(s,s.__data__,c,a)),o.push(s));return new ft(i,o)},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,l=i[o]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new ft(i,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),u=-1,this.each((function(t){m[++u]=t})),m;var n,i=e?g:f,o=this._parents,r=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=r.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],h=r[u],p=h.length,m=t.call(d,d&&d.__data__,u,o),v=m.length,y=l[u]=new Array(v),b=a[u]=new Array(v);i(d,h,y,b,c[u]=new Array(p),m,e);for(var _,x,w=0,S=0;w<v;++w)if(_=y[w]){for(w>=S&&(S=w+1);!(x=b[S])&&++S<v;);_._next=x||null}}return(a=new ft(a,o))._enter=l,a._exit=c,a},enter:function(){return new ft(this._enter||this._groups.map(h),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(h),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,r=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(o=e(o)),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var l,c=e[a],u=n[a],d=c.length,h=s[a]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;a<i;++a)s[a]=e[a];return new ft(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,s=o[r];--r>=0;)(i=o[r])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=m);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s,a=n[r],l=a.length,c=o[r]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(e)}return new ft(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],s=0,a=r.length;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this},attr:function(t,e){var n=b(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?x:_:"function"==typeof e?n.local?A:E:n.local?S:w)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?k:"function"==typeof e?D:C)(t,e,null==n?"":n)):N(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?M:"function"==typeof e?I:j)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var i=O(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?H:e?$:R)(n,e))},text:function(t){return arguments.length?this.each(null==t?U:("function"==typeof t?W:q)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?F:Y)(t)):this.node().innerHTML},raise:function(){return this.each(K)},lower:function(){return this.each(X)},append:function(t){var e="function"==typeof t?t:Z(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Z(t),i=null==e?J:"function"==typeof e?e:l(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(tt)},clone:function(t){return this.select(t?nt:et)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,o,r=at(t+""),s=r.length;if(!(arguments.length<2)){for(a=e?ct:lt,null==n&&(n=!1),i=0;i<s;++i)this.each(a(r[i],e,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(i=0,l=a[c];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?ht:dt)(t,e))}};const mt=gt;var vt={value:function(){}};function yt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new bt(i)}function bt(t){this._=t}function _t(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function xt(t,e){for(var n,i=0,o=t.length;i<o;++i)if((n=t[i]).name===e)return n.value}function wt(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=vt,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}bt.prototype=yt.prototype={constructor:bt,on:function(t,e){var n,i=this._,o=_t(t+"",i),r=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<s;)if(n=(t=o[r]).type)i[n]=wt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=wt(i[n],t.name,null);return this}for(;++r<s;)if((n=(t=o[r]).type)&&(n=xt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new bt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,o=new Array(n),r=0;r<n;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)}};const St=yt;var Et,At,Tt=0,kt=0,Ct=0,Dt=0,Nt=0,Mt=0,jt="object"==typeof performance&&performance.now?performance:Date,It="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Lt(){return Nt||(It(Ot),Nt=jt.now()+Mt)}function Ot(){Nt=0}function Bt(){this._call=this._time=this._next=null}function Pt(t,e,n){var i=new Bt;return i.restart(t,e,n),i}function zt(){Nt=(Dt=jt.now())+Mt,Tt=kt=0;try{!function(){Lt(),++Tt;for(var t,e=Et;e;)(t=Nt-e._time)>=0&&e._call.call(null,t),e=e._next;--Tt}()}finally{Tt=0,function(){for(var t,e,n=Et,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Et=e);At=t,Rt(i)}(),Nt=0}}function $t(){var t=jt.now(),e=t-Dt;e>1e3&&(Mt-=e,Dt=t)}function Rt(t){Tt||(kt&&(kt=clearTimeout(kt)),t-Nt>24?(t<1/0&&(kt=setTimeout(zt,t-jt.now()-Mt)),Ct&&(Ct=clearInterval(Ct))):(Ct||(Dt=jt.now(),Ct=setInterval($t,1e3)),Tt=1,It(zt)))}function Ht(t,e,n){var i=new Bt;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i}Bt.prototype=Pt.prototype={constructor:Bt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Lt():+n)+(null==e?0:+e),this._next||At===this||(At?At._next=this:Et=this,At=this),this._call=t,this._time=n,Rt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rt())}};var Ut=St("start","end","cancel","interrupt"),qt=[];function Wt(t,e,n,i,o,r){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var i,o=t.__transition;function r(l){var c,u,d,h;if(1!==n.state)return a();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return Ht(r);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[c]):+c<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[c])}if(Ht((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(l))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=h);i.length=u+1}}function s(e){for(var o=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),r=-1,s=i.length;++r<s;)i[r].call(t,o);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var i in n.state=6,n.timer.stop(),delete o[e],o)return;delete t.__transition}o[e]=n,n.timer=Pt((function(t){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:o,on:Ut,tween:qt,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function Vt(t,e){var n=Ft(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Yt(t,e){var n=Ft(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ft(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Kt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Xt,Gt,Qt,Zt,Jt=180/Math.PI,te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ee(t,e,n,i,o,r){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Jt,skewX:Math.atan(l)*Jt,scaleX:s,scaleY:a}}function ne(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}return function(r,s){var a=[],l=[];return r=t(r),s=t(s),function(t,i,o,r,s,a){if(t!==o||i!==r){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Kt(t,o)},{i:l-2,x:Kt(i,r)})}else(o||r)&&s.push("translate("+o+e+r+n)}(r.translateX,r.translateY,s.translateX,s.translateY,a,l),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Kt(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}(r.rotate,s.rotate,a,l),function(t,e,n,r){t!==e?r.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Kt(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}(r.skewX,s.skewX,a,l),function(t,e,n,i,r,s){if(t!==n||e!==i){var a=r.push(o(r)+"scale(",null,",",null,")");s.push({i:a-4,x:Kt(t,n)},{i:a-2,x:Kt(e,i)})}else 1===n&&1===i||r.push(o(r)+"scale("+n+","+i+")")}(r.scaleX,r.scaleY,s.scaleX,s.scaleY,a,l),r=s=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var ie=ne((function(t){return"none"===t?te:(Xt||(Xt=document.createElement("DIV"),Gt=document.documentElement,Qt=document.defaultView),Xt.style.transform=t,t=Qt.getComputedStyle(Gt.appendChild(Xt),null).getPropertyValue("transform"),Gt.removeChild(Xt),ee(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),oe=ne((function(t){return null==t?te:(Zt||(Zt=document.createElementNS("http://www.w3.org/2000/svg","g")),Zt.setAttribute("transform",t),(t=Zt.transform.baseVal.consolidate())?ee((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):te)}),", ",")",")");function re(t,e){var n,i;return function(){var o=Yt(this,t),r=o.tween;if(r!==n)for(var s=0,a=(i=n=r).length;s<a;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}o.tween=i}}function se(t,e,n){var i,o;if("function"!=typeof n)throw new Error;return function(){var r=Yt(this,t),s=r.tween;if(s!==i){o=(i=s).slice();for(var a={name:e,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===e){o[l]=a;break}l===c&&o.push(a)}r.tween=o}}function ae(t,e,n){var i=t._id;return t.each((function(){var t=Yt(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ft(t,i).value[e]}}function le(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ce(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ue(){}var de=.7,he=1/de,pe="\\s*([+-]?\\d+)\\s*",fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ge="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",me=/^#([0-9a-f]{3,8})$/,ve=new RegExp("^rgb\\("+[pe,pe,pe]+"\\)$"),ye=new RegExp("^rgb\\("+[ge,ge,ge]+"\\)$"),be=new RegExp("^rgba\\("+[pe,pe,pe,fe]+"\\)$"),_e=new RegExp("^rgba\\("+[ge,ge,ge,fe]+"\\)$"),xe=new RegExp("^hsl\\("+[fe,ge,ge]+"\\)$"),we=new RegExp("^hsla\\("+[fe,ge,ge,fe]+"\\)$"),Se={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ee(){return this.rgb().formatHex()}function Ae(){return this.rgb().formatRgb()}function Te(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=me.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ke(e):3===n?new Me(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ce(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ce(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ve.exec(t))?new Me(e[1],e[2],e[3],1):(e=ye.exec(t))?new Me(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=be.exec(t))?Ce(e[1],e[2],e[3],e[4]):(e=_e.exec(t))?Ce(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=xe.exec(t))?Oe(e[1],e[2]/100,e[3]/100,1):(e=we.exec(t))?Oe(e[1],e[2]/100,e[3]/100,e[4]):Se.hasOwnProperty(t)?ke(Se[t]):"transparent"===t?new Me(NaN,NaN,NaN,0):null}function ke(t){return new Me(t>>16&255,t>>8&255,255&t,1)}function Ce(t,e,n,i){return i<=0&&(t=e=n=NaN),new Me(t,e,n,i)}function De(t){return t instanceof ue||(t=Te(t)),t?new Me((t=t.rgb()).r,t.g,t.b,t.opacity):new Me}function Ne(t,e,n,i){return 1===arguments.length?De(t):new Me(t,e,n,null==i?1:i)}function Me(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function je(){return"#"+Le(this.r)+Le(this.g)+Le(this.b)}function Ie(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Le(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Oe(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pe(t,e,n,i)}function Be(t){if(t instanceof Pe)return new Pe(t.h,t.s,t.l,t.opacity);if(t instanceof ue||(t=Te(t)),!t)return new Pe;if(t instanceof Pe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,a=r-o,l=(r+o)/2;return a?(s=e===r?(n-i)/a+6*(n<i):n===r?(i-e)/a+2:(e-n)/a+4,a/=l<.5?r+o:2-r-o,s*=60):a=l>0&&l<1?0:s,new Pe(s,a,l,t.opacity)}function Pe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ze(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function $e(t,e,n,i,o){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*o)/6}function Re(t){return function(){return t}}function He(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Re(isNaN(t)?e:t)}le(ue,Te,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ee,formatHex:Ee,formatHsl:function(){return Be(this).formatHsl()},formatRgb:Ae,toString:Ae}),le(Me,Ne,ce(ue,{brighter:function(t){return t=null==t?he:Math.pow(he,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?de:Math.pow(de,t),new Me(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:je,formatHex:je,formatRgb:Ie,toString:Ie})),le(Pe,(function(t,e,n,i){return 1===arguments.length?Be(t):new Pe(t,e,n,null==i?1:i)}),ce(ue,{brighter:function(t){return t=null==t?he:Math.pow(he,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?de:Math.pow(de,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Me(ze(t>=240?t-240:t+120,o,i),ze(t,o,i),ze(t<120?t+240:t-120,o,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Ue=function t(e){var n=function(t){return 1==(t=+t)?He:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Re(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Ne(t)).r,(e=Ne(e)).r),o=n(t.g,e.g),r=n(t.b,e.b),s=He(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=o(e),t.b=r(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function qe(t){return function(e){var n,i,o=e.length,r=new Array(o),s=new Array(o),a=new Array(o);for(n=0;n<o;++n)i=Ne(e[n]),r[n]=i.r||0,s[n]=i.g||0,a[n]=i.b||0;return r=t(r),s=t(s),a=t(a),i.opacity=1,function(t){return i.r=r(t),i.g=s(t),i.b=a(t),i+""}}}qe((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],r=t[i+1],s=i>0?t[i-1]:2*o-r,a=i<e-1?t[i+2]:2*r-o;return $e((n-i/e)*e,s,o,r,a)}})),qe((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],r=t[i%e],s=t[(i+1)%e],a=t[(i+2)%e];return $e((n-i/e)*e,o,r,s,a)}}));var We=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(We.source,"g");function Ye(t,e){var n,i,o,r=We.lastIndex=Ve.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=We.exec(t))&&(i=Ve.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(n=n[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Kt(n,i)})),r=Ve.lastIndex;return r<e.length&&(o=e.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function Fe(t,e){var n;return("number"==typeof e?Kt:e instanceof Te?Ue:(n=Te(e))?(e=n,Ue):Ye)(t,e)}function Ke(t){return function(){this.removeAttribute(t)}}function Xe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ge(t,e,n){var i,o,r=n+"";return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function Qe(t,e,n){var i,o,r=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function Ze(t,e,n){var i,o,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===i&&a===o?r:(o=a,r=e(i=s,l));this.removeAttribute(t)}}function Je(t,e,n){var i,o,r;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===i&&a===o?r:(o=a,r=e(i=s,l));this.removeAttributeNS(t.space,t.local)}}function tn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function en(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function nn(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&en(t,o)),n}return o._value=e,o}function on(t,e){var n,i;function o(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&tn(t,o)),n}return o._value=e,o}function rn(t,e){return function(){Vt(this,t).delay=+e.apply(this,arguments)}}function sn(t,e){return e=+e,function(){Vt(this,t).delay=e}}function an(t,e){return function(){Yt(this,t).duration=+e.apply(this,arguments)}}function ln(t,e){return e=+e,function(){Yt(this,t).duration=e}}function cn(t,e){if("function"!=typeof e)throw new Error;return function(){Yt(this,t).ease=e}}function un(t,e,n){var i,o,r=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Vt:Yt;return function(){var s=r(this,t),a=s.on;a!==i&&(o=(i=a).copy()).on(e,n),s.on=o}}var dn=mt.prototype.constructor;function hn(t){return function(){this.style.removeProperty(t)}}function pn(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function fn(t,e,n){var i,o;function r(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&pn(t,r,n)),i}return r._value=e,r}function gn(t){return function(e){this.textContent=t.call(this,e)}}function mn(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&gn(i)),e}return i._value=t,i}var vn=0;function yn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function bn(){return++vn}var _n=mt.prototype;yn.prototype=function(t){return mt().transition(t)}.prototype={constructor:yn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=l(t));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var a,c,u=i[s],d=u.length,h=r[s]=new Array(d),p=0;p<d;++p)(a=u[p])&&(c=t.call(a,a.__data__,p,u))&&("__data__"in a&&(c.__data__=a.__data__),h[p]=c,Wt(h[p],e,n,p,h,Ft(a,n)));return new yn(r,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=u(t));for(var i=this._groups,o=i.length,r=[],s=[],a=0;a<o;++a)for(var l,c=i[a],d=c.length,h=0;h<d;++h)if(l=c[h]){for(var p,f=t.call(l,l.__data__,h,c),g=Ft(l,n),m=0,v=f.length;m<v;++m)(p=f[m])&&Wt(p,e,n,m,f,g);r.push(f),s.push(l)}return new yn(r,s,e,n)},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,s=e[o],a=s.length,l=i[o]=[],c=0;c<a;++c)(r=s[c])&&t.call(r,r.__data__,c,s)&&l.push(r);return new yn(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,r=Math.min(i,o),s=new Array(i),a=0;a<r;++a)for(var l,c=e[a],u=n[a],d=c.length,h=s[a]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;a<i;++a)s[a]=e[a];return new yn(s,this._parents,this._name,this._id)},selection:function(){return new dn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=bn(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=Ft(s,e);Wt(s,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new yn(i,this._parents,t,n)},call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:function(t,e){var n=this._id;return arguments.length<2?Ft(this.node(),n).on.on(t):this.each(un(n,t,e))},attr:function(t,e){var n=b(t),i="transform"===n?oe:Fe;return this.attrTween(t,"function"==typeof e?(n.local?Je:Ze)(n,i,ae(this,"attr."+t,e)):null==e?(n.local?Xe:Ke)(n):(n.local?Qe:Ge)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=b(t);return this.tween(n,(i.local?nn:on)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?ie:Fe;return null==e?this.styleTween(t,function(t,e){var n,i,o;return function(){var r=N(this,t),s=(this.style.removeProperty(t),N(this,t));return r===s?null:r===n&&s===i?o:o=e(n=r,i=s)}}(t,i)).on("end.style."+t,hn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,o,r;return function(){var s=N(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=N(this,t)),s===l?null:s===i&&l===o?r:(o=l,r=e(i=s,a))}}(t,i,ae(this,"style."+t,e))).each(function(t,e){var n,i,o,r,s="style."+e,a="end."+s;return function(){var l=Yt(this,t),c=l.on,u=null==l.value[s]?r||(r=hn(e)):void 0;c===n&&o===u||(i=(n=c).copy()).on(a,o=u),l.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,o,r=n+"";return function(){var s=N(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,fn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ae(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,mn(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,o=Ft(this.node(),n).tween,r=0,s=o.length;r<s;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((null==e?re:se)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rn:sn)(e,t)):Ft(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?an:ln)(e,t)):Ft(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(cn(e,t)):Ft(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,o=n.size();return new Promise((function(r,s){var a={value:s},l={value:function(){0==--o&&r()}};n.each((function(){var n=Yt(this,i),o=n.on;o!==t&&((e=(t=o).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e}))}))}};var xn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function wn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return xn.time=Lt(),xn;return n}function Sn(t){return{type:t}}mt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,o,r=t.__transition,s=!0;if(r){for(o in e=null==e?null:e+"",r)(n=r[o]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[o]):s=!1;s&&delete t.__transition}}(this,t)}))},mt.prototype.transition=function(t){var e,n;t instanceof yn?(e=t._id,t=t._name):(e=bn(),(n=xn).time=Lt(),t=null==t?null:t+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s,a=i[r],l=a.length,c=0;c<l;++c)(s=a[c])&&Wt(s,t,e,c,a,n||wn(s,e));return new yn(i,this._parents,t,e)},["w","e"].map(Sn),["n","s"].map(Sn),["n","w","e","s","nw","ne","sw","se"].map(Sn),Math.cos,Math.sin,Math.PI,Math.max,Array.prototype.slice;var En="$";function An(){}function Tn(t,e){var n=new An;if(t instanceof An)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,o=-1,r=t.length;if(null==e)for(;++o<r;)n.set(o,t[o]);else for(;++o<r;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}function kn(){}An.prototype=Tn.prototype={constructor:An,has:function(t){return En+t in this},get:function(t){return this[En+t]},set:function(t,e){return this[En+t]=e,this},remove:function(t){var e=En+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===En&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===En&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===En&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===En&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===En&&++t;return t},empty:function(){for(var t in this)if(t[0]===En)return!1;return!0},each:function(t){for(var e in this)e[0]===En&&t(this[e],e.slice(1),this)}};var Cn=Tn.prototype;function Dn(t,e){return t[0]-e[0]||t[1]-e[1]}function Nn(t){for(var e=t.length,n=[0,1],i=2,o=2;o<e;++o){for(;i>1&&(r=t[n[i-2]],s=t[n[i-1]],a=t[o],(s[0]-r[0])*(a[1]-r[1])-(s[1]-r[1])*(a[0]-r[0])<=0);)--i;n[i++]=o}var r,s,a;return n.slice(0,i)}function Mn(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),o=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(Dn),e=0;e<n;++e)o[e]=[i[e][0],-i[e][1]];var r=Nn(i),s=Nn(o),a=s[0]===r[0],l=s[s.length-1]===r[r.length-1],c=[];for(e=r.length-1;e>=0;--e)c.push(t[i[r[e]][2]]);for(e=+a;e<s.length-l;++e)c.push(t[i[s[e]][2]]);return c}function jn(){return Math.random()}kn.prototype=function(t,e){var n=new kn;if(t instanceof kn)t.each((function(t){n.add(t)}));else if(t){var i=-1,o=t.length;if(null==e)for(;++i<o;)n.add(t[i]);else for(;++i<o;)n.add(e(t[i],i,t))}return n}.prototype={constructor:kn,has:Cn.has,add:function(t){return this[En+(t+="")]=t,this},remove:Cn.remove,clear:Cn.clear,values:Cn.keys,size:Cn.size,empty:Cn.empty,each:Cn.each},Array.prototype.slice,Math.PI,Math.sqrt(5),function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(jn);const In=function t(e){function n(t,n){var i,o;return t=null==t?0:+t,n=null==n?1:+n,function(){var r;if(null!=i)r=i,i=null;else do{i=2*e()-1,r=2*e()-1,o=i*i+r*r}while(!o||o>1);return t+n*r*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(jn),Ln=(function t(e){function n(){var t=In.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(jn),function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(jn));(function t(e){function n(t){var n=Ln.source(e)(t);return function(){return n()/t}}return n.source=t,n})(jn),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(jn);var On=Array.prototype;On.map,On.slice;const Bn=function(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Pn(){this._=null}function zn(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function $n(t,e){var n=e,i=e.R,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Rn(t,e){var n=e,i=e.L,o=n.U;o?o.L===n?o.L=i:o.R=i:t._=i,i.U=o,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Hn(t){for(;t.L;)t=t.L;return t}Pn.prototype={constructor:Pn,insert:function(t,e){var n,i,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Hn(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(o=i.R)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.R&&($n(this,n),n=(t=n).U),n.C=!1,i.C=!0,Rn(this,i)):(o=i.L)&&o.C?(n.C=o.C=!1,i.C=!0,t=i):(t===n.L&&(Rn(this,n),n=(t=n).U),n.C=!1,i.C=!0,$n(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,o=t.U,r=t.L,s=t.R;if(n=r?s?Hn(s):r:s,o?o.L===t?o.L=n:o.R=n:this._=n,r&&s?(i=n.C,n.C=t.C,n.L=r,r.U=n,n!==s?(o=n.U,n.U=t.U,t=n.R,o.L=t,n.R=s,s.U=n):(n.U=o,o=n,t=n.R)):(i=t.C,t=n),t&&(t.U=o),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,$n(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Rn(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,$n(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,Rn(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,$n(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,Rn(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}};const Un=Pn;function qn(t,e,n,i){var o=[null,null],r=pi.push(o)-1;return o.left=t,o.right=e,n&&Vn(o,t,e,n),i&&Vn(o,e,t,i),di[t.index].halfedges.push(r),di[e.index].halfedges.push(r),o}function Wn(t,e,n){var i=[e,n];return i.left=t,i}function Vn(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Yn(t,e,n,i,o){var r,s=t[0],a=t[1],l=s[0],c=s[1],u=0,d=1,h=a[0]-l,p=a[1]-c;if(r=e-l,h||!(r>0)){if(r/=h,h<0){if(r<u)return;r<d&&(d=r)}else if(h>0){if(r>d)return;r>u&&(u=r)}if(r=i-l,h||!(r<0)){if(r/=h,h<0){if(r>d)return;r>u&&(u=r)}else if(h>0){if(r<u)return;r<d&&(d=r)}if(r=n-c,p||!(r>0)){if(r/=p,p<0){if(r<u)return;r<d&&(d=r)}else if(p>0){if(r>d)return;r>u&&(u=r)}if(r=o-c,p||!(r<0)){if(r/=p,p<0){if(r>d)return;r>u&&(u=r)}else if(p>0){if(r<u)return;r<d&&(d=r)}return!(u>0||d<1)||(u>0&&(t[0]=[l+u*h,c+u*p]),d<1&&(t[1]=[l+d*h,c+d*p]),!0)}}}}}function Fn(t,e,n,i,o){var r=t[1];if(r)return!0;var s,a,l=t[0],c=t.left,u=t.right,d=c[0],h=c[1],p=u[0],f=u[1],g=(d+p)/2,m=(h+f)/2;if(f===h){if(g<e||g>=i)return;if(d>p){if(l){if(l[1]>=o)return}else l=[g,n];r=[g,o]}else{if(l){if(l[1]<n)return}else l=[g,o];r=[g,n]}}else if(a=m-(s=(d-p)/(f-h))*g,s<-1||s>1)if(d>p){if(l){if(l[1]>=o)return}else l=[(n-a)/s,n];r=[(o-a)/s,o]}else{if(l){if(l[1]<n)return}else l=[(o-a)/s,o];r=[(n-a)/s,n]}else if(h<f){if(l){if(l[0]>=i)return}else l=[e,s*e+a];r=[i,s*i+a]}else{if(l){if(l[0]<e)return}else l=[i,s*i+a];r=[e,s*e+a]}return t[0]=l,t[1]=r,!0}function Kn(t,e){var n=t.site,i=e.left,o=e.right;return n===o&&(o=i,i=n),o?Math.atan2(o[1]-i[1],o[0]-i[0]):(n===i?(i=e[1],o=e[0]):(i=e[0],o=e[1]),Math.atan2(i[0]-o[0],o[1]-i[1]))}function Xn(t,e){return e[+(e.left!==t.site)]}function Gn(t,e){return e[+(e.left===t.site)]}var Qn,Zn=[];function Jn(){zn(this),this.x=this.y=this.arc=this.site=this.cy=null}function ti(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,o=t.site,r=n.site;if(i!==r){var s=o[0],a=o[1],l=i[0]-s,c=i[1]-a,u=r[0]-s,d=r[1]-a,h=2*(l*d-c*u);if(!(h>=-gi)){var p=l*l+c*c,f=u*u+d*d,g=(d*p-c*f)/h,m=(l*f-u*p)/h,v=Zn.pop()||new Jn;v.arc=t,v.site=o,v.x=g+s,v.y=(v.cy=m+a)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,b=hi._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}hi.insert(y,v),y||(Qn=v)}}}}function ei(t){var e=t.circle;e&&(e.P||(Qn=e.N),hi.remove(e),Zn.push(e),zn(e),t.circle=null)}var ni=[];function ii(){zn(this),this.edge=this.site=this.circle=null}function oi(t){var e=ni.pop()||new ii;return e.site=t,e}function ri(t){ei(t),ui.remove(t),ni.push(t),zn(t)}function si(t){var e=t.circle,n=e.x,i=e.cy,o=[n,i],r=t.P,s=t.N,a=[t];ri(t);for(var l=r;l.circle&&Math.abs(n-l.circle.x)<fi&&Math.abs(i-l.circle.cy)<fi;)r=l.P,a.unshift(l),ri(l),l=r;a.unshift(l),ei(l);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<fi&&Math.abs(i-c.circle.cy)<fi;)s=c.N,a.push(c),ri(c),c=s;a.push(c),ei(c);var u,d=a.length;for(u=1;u<d;++u)c=a[u],l=a[u-1],Vn(c.edge,l.site,c.site,o);l=a[0],(c=a[d-1]).edge=qn(l.site,c.site,null,o),ti(l),ti(c)}function ai(t){for(var e,n,i,o,r=t[0],s=t[1],a=ui._;a;)if((i=li(a,s)-r)>fi)a=a.L;else{if(!((o=r-ci(a,s))>fi)){i>-fi?(e=a.P,n=a):o>-fi?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){di[t.index]={site:t,halfedges:[]}}(t);var l=oi(t);if(ui.insert(e,l),e||n){if(e===n)return ei(e),n=oi(e.site),ui.insert(l,n),l.edge=n.edge=qn(e.site,l.site),ti(e),void ti(n);if(n){ei(e),ei(n);var c=e.site,u=c[0],d=c[1],h=t[0]-u,p=t[1]-d,f=n.site,g=f[0]-u,m=f[1]-d,v=2*(h*m-p*g),y=h*h+p*p,b=g*g+m*m,_=[(m*y-p*b)/v+u,(h*b-g*y)/v+d];Vn(n.edge,c,f,_),l.edge=qn(c,t,null,_),n.edge=qn(t,f,null,_),ti(e),ti(n)}else l.edge=qn(e.site,l.site)}}function li(t,e){var n=t.site,i=n[0],o=n[1],r=o-e;if(!r)return i;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],l=n[1],c=l-e;if(!c)return a;var u=a-i,d=1/r-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+o-r/2)))/d+i:(i+a)/2}function ci(t,e){var n=t.N;if(n)return li(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var ui,di,hi,pi,fi=1e-6,gi=1e-12;function mi(t,e){return e[1]-t[1]||e[0]-t[0]}function vi(t,e){var n,i,o,r=t.sort(mi).pop();for(pi=[],di=new Array(t.length),ui=new Un,hi=new Un;;)if(o=Qn,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))r[0]===n&&r[1]===i||(ai(r),n=r[0],i=r[1]),r=t.pop();else{if(!o)break;si(o.arc)}if(function(){for(var t,e,n,i,o=0,r=di.length;o<r;++o)if((t=di[o])&&(i=(e=t.halfedges).length)){var s=new Array(i),a=new Array(i);for(n=0;n<i;++n)s[n]=n,a[n]=Kn(t,pi[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<i;++n)a[n]=e[s[n]];for(n=0;n<i;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var o,r=pi.length;r--;)Fn(o=pi[r],t,e,n,i)&&Yn(o,t,e,n,i)&&(Math.abs(o[0][0]-o[1][0])>fi||Math.abs(o[0][1]-o[1][1])>fi)||delete pi[r]}(s,a,l,c),function(t,e,n,i){var o,r,s,a,l,c,u,d,h,p,f,g,m=di.length,v=!0;for(o=0;o<m;++o)if(r=di[o]){for(s=r.site,a=(l=r.halfedges).length;a--;)pi[l[a]]||l.splice(a,1);for(a=0,c=l.length;a<c;)f=(p=Gn(r,pi[l[a]]))[0],g=p[1],d=(u=Xn(r,pi[l[++a%c]]))[0],h=u[1],(Math.abs(f-d)>fi||Math.abs(g-h)>fi)&&(l.splice(a,0,pi.push(Wn(s,p,Math.abs(f-t)<fi&&i-g>fi?[t,Math.abs(d-t)<fi?h:i]:Math.abs(g-i)<fi&&n-f>fi?[Math.abs(h-i)<fi?d:n,i]:Math.abs(f-n)<fi&&g-e>fi?[n,Math.abs(d-n)<fi?h:e]:Math.abs(g-e)<fi&&f-t>fi?[Math.abs(h-e)<fi?d:t,e]:null))-1),++c);c&&(v=!1)}if(v){var y,b,_,x=1/0;for(o=0,v=null;o<m;++o)(r=di[o])&&(_=(y=(s=r.site)[0]-t)*y+(b=s[1]-e)*b)<x&&(x=_,v=r);if(v){var w=[t,e],S=[t,i],E=[n,i],A=[n,e];v.halfedges.push(pi.push(Wn(s=v.site,w,S))-1,pi.push(Wn(s,S,E))-1,pi.push(Wn(s,E,A))-1,pi.push(Wn(s,A,w))-1)}}for(o=0;o<m;++o)(r=di[o])&&(r.halfedges.length||delete di[o])}(s,a,l,c)}this.edges=pi,this.cells=di,ui=hi=pi=di=null}function yi(t,e,n){this.k=t,this.x=e,this.y=n}vi.prototype={constructor:vi,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Xn(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(r=(o=n.halfedges).length)for(var o,r,s,a=n.site,l=-1,c=e[o[r-1]],u=c.left===a?c.right:c.left;++l<r;)s=u,u=(c=e[o[l]]).left===a?c.right:c.left,s&&u&&i<s.index&&i<u.index&&(h=s,p=u,((d=a)[0]-p[0])*(h[1]-d[1])-(d[0]-h[0])*(p[1]-d[1])<0)&&t.push([a.data,s.data,u.data]);var d,h,p})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,o,r=this,s=r._found||0,a=r.cells.length;!(o=r.cells[s]);)if(++s>=a)return null;var l=t-o.site[0],c=e-o.site[1],u=l*l+c*c;do{o=r.cells[i=s],s=null,o.halfedges.forEach((function(n){var i=r.edges[n],a=i.left;if(a!==o.site&&a||(a=i.right)){var l=t-a[0],c=e-a[1],d=l*l+c*c;d<u&&(u=d,s=a.index)}}))}while(null!==s);return r._found=i,null==n||u<=n*n?o.site:null}},yi.prototype={constructor:yi,scale:function(t){return 1===t?this:new yi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new yi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new yi(1,0,0),yi.prototype},501:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,n){return c=l()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&a(o,n.prototype),o},c.apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return c(t,arguments,s(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,t)},u(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?d(t):e}function p(t){var e=l();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h(this,n)}}function f(t,e,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},f(t,e,n||t)}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var b=function(t,e,n){var i=t.x,o=t.y,r=n.x,s=n.y;return{"+":{x:i+r,y:o+s},"-":{x:i-r,y:o-s},"*":{x:i*r,y:o*s},"/":{x:i/r,y:o/s}}[e]},_=function(t){return{x:t.left,y:t.top}},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{left:t.x,top:t.y,right:t.x,bottom:t.y,width:e,height:e}},w=function(){var t,e,n,i;return{y:(null===(t=document.body)||void 0===t?void 0:t.scrollTop)||(null===(e=document.documentElement)||void 0===e?void 0:e.scrollTop)||0,x:(null===(n=document.body)||void 0===n?void 0:n.scrollLeft)||(null===(i=document.documentElement)||void 0===i?void 0:i.scrollLeft)||0}},S=function(t){return!t||t instanceof Document?w():{x:t.scrollLeft>=0?t.scrollLeft:w().x,y:t.scrollTop>=0?t.scrollTop:w().y}},E=function(t){var e=t.elementRect,n=t.containerRect,i=t.tolerance,o=void 0===i?{x:0,y:0}:i,r=[];return e.top-o.y<n.top&&r.push("top"),e.left-o.x<n.left&&r.push("left"),e.bottom+o.y>n.bottom&&r.push("bottom"),e.right+o.y>n.right&&r.push("right"),r},A=function(t){var e=t.event;return{x:e.clientX,y:e.clientY}},T=function(t){var e={x:0,y:0},n=window.getComputedStyle(t);if(!n.transform||"none"===n.transform)return e;if(n.transform.indexOf("3d")>=0){var i=n.transform.trim().match(/matrix3d\((.*?)\)/);if(i&&i.length){var o,r=null===(o=i[1])||void 0===o?void 0:o.split(",");e.x=parseInt(r[12])||0,e.y=parseInt(r[13])||0}return e}var s=n.transform.trim().match(/matrix\((.*?)\)/);if(s&&s.length){var a,l=null===(a=s[1])||void 0===a?void 0:a.split(",");e.x=parseInt(l[4])||0,e.y=parseInt(l[5])||0}return e},k=function(t,e){return e?function(t){var e=t.style.transform;if(!e||e.indexOf("translate")<0)return T(t);var n={x:0,y:0},i=e.trim().match(/translate[3dD]*?\(.*?\)/);if(i){var o,r=null===(o=i[0])||void 0===o?void 0:o.split("(");if(r){var s,a=null===(s=r[1])||void 0===s?void 0:s.split(",");n.x=parseInt(a[0])||0,n.y=parseInt(a[1])||0}}return n.x||n.x?n:T(t)}(t):function(t){var e=t.style,n={x:parseInt(e.left)||0,y:parseInt(e.top)||0};if(!n.x&&!n.x){var i=window.getComputedStyle(t);return{x:parseInt(i.left)||0,y:parseInt(i.top)||0}}return n}(t)},C=function(t){var e=t.computedStyle,n=t.node,i=e.position;n instanceof HTMLDocument||"absolute"===i||"relative"===i||"fixed"===i||(n.style.position="relative")},D=function(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top},N=function(t){var e=t.element,n=t.posDirection,i=t.containerRect,o=t.useTransform,r=k(e,o),s=b(r,"+",n);M(e,s,o);var a=e.getBoundingClientRect();!function(t){var e=t.element,n=t.edges,i=t.elementRect,o=t.containerRect,r=t.elementPos,s=t.useTransform;n.includes("top")&&M(e,{y:r.y+o.top-i.top,x:r.x},s),n.includes("left")&&M(e,{y:r.y,x:r.x+o.left-i.left},s),n.includes("bottom")&&M(e,{y:r.y+o.bottom-i.bottom,x:r.x},s),n.includes("right")&&M(e,{y:r.y,x:r.x+o.right-i.right},s)}({element:e,edges:E({elementRect:a,containerRect:i}),elementRect:a,containerRect:i,elementPos:s,useTransform:o})},M=function(t,e,n){if(n){var i=t.style.transform;t.style.transform="translate3d(".concat(e.x,"px,").concat(e.y,"px,1px) ").concat(i.replace(/translate.*?\)/g,""))}else t.style.left="".concat(e.x,"px"),t.style.top="".concat(e.y,"px");return t},j=function(t){for(var e=t.subscribe,n=t.publish,r=t.Interaction,s=t.SelectedSet,a=function(){var t=g(c[l],2),a=t[0],u=t[1];["pre",!1].forEach((function(t){return e(t?"".concat(a,":").concat(t):a,(function(e){return u.forEach((function(a){return(!a.condition||a.condition(e))&&n(t?"".concat(t).concat(a.name):a.name,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({items:s.elements,isDragging:r.isDragging},e))}))}))}))},l=0,c=Object.entries({"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(t){return t.event}}],"Interaction:end":[{name:"callback"}],"Drag:keyboardDrag":[{name:"dragstart"},{name:"dragmove"}]});l<c.length;l++)a()},I=function(t){return t?!Array.isArray(t)&&(t instanceof HTMLElement||t instanceof SVGElement)?[t]:m(t):[]},L=function(t,e){t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px"),t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px")},O=function(){function e(n){var o,r,s,a=this,l=n.area,c=n.PS,u=n.zoom;t(this,e),i(this,"_modificationCallback",void 0),i(this,"_modificationObserver",void 0),i(this,"_zoom",void 0),i(this,"_node",void 0),i(this,"_parentNodes",void 0),i(this,"_computedStyle",void 0),i(this,"_computedBorder",void 0),i(this,"_rect",void 0),i(this,"start",(function(){var t,e,n;t=a.parentNodes,e=a._modificationCallback,n=a._modificationObserver,window.addEventListener("resize",e),window.addEventListener("scroll",e),t.forEach((function(t,e){n.observe(t,{childList:0!==e,attributes:!0})}))})),i(this,"reset",(function(){a._computedStyle=void 0,a._rect=void 0,a._computedBorder=void 0,a._parentNodes=void 0})),i(this,"stop",(function(){var t,e;t=a._modificationObserver,e=a._modificationCallback,window.removeEventListener("resize",e),window.removeEventListener("scroll",e),t.disconnect(),a.reset()})),i(this,"scroll",(function(t,e){(function(t,e,n){if(e.length){var i=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,o=t instanceof HTMLDocument?i||document.body:t,r=e.includes("top")&&o.scrollTop>0,s=e.includes("bottom")&&o.scrollTop<o.scrollHeight,a=e.includes("left")&&o.scrollLeft>0,l=e.includes("right")&&o.scrollLeft<o.scrollWidth;r&&(o.scrollTop-=1*n),s&&(o.scrollTop+=1*n),a&&(o.scrollLeft-=1*n),l&&(o.scrollLeft+=1*n)}})(a._node,t,e),a.PubSub.publish("Area:scroll",{scroll_directions:t,scroll_multiplier:e})})),this._node=l,this._zoom=u,this.PubSub=c,C({computedStyle:this.computedStyle,node:this._node}),this._modificationCallback=(o=function(t){a.reset(),a.PubSub.publish("Area:modified",{event:t,item:a})},r=60,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=function(){s=null,o.apply(void 0,e)};clearTimeout(s),s=setTimeout(i,r)}),this._modificationObserver=new MutationObserver(this._modificationCallback),setTimeout((function(){a.reset(),a.PubSub.publish("Area:modified",{event,item:a})})),this.PubSub.subscribe("Interaction:init",this.start),this.PubSub.subscribe("Interaction:end",this.reset)}return n(e,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof HTMLDocument?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=function(t,e){if(t instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var n=t.getBoundingClientRect();return{top:n.top,left:n.left,bottom:n.bottom,right:n.right,width:(t.clientWidth||n.width)*e,height:(t.clientHeight||n.height)*e}}(this.HTMLNode,this._zoom)}},{key:"parentNodes",get:function(){if(this._parentNodes)return this._parentNodes;return this._parentNodes=function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=null===(n=e[i])||void 0===n?void 0:n.parentNode;return o?(e.push(o),t(e,++i)):e}([this.HTMLNode]),this._parentNodes}}]),e}(),B=function(){function e(n){var o=this,r=n.DS,s=n.dragKeys,a=n.draggability,l=n.keyboardDrag,c=n.keyboardDragSpeed,u=n.useTransform,d=n.zoom;t(this,e),i(this,"_useTransform",void 0),i(this,"_prevCursorPos",void 0),i(this,"_prevScrollPos",void 0),i(this,"_elements",[]),i(this,"_draggability",void 0),i(this,"_dragKeys",void 0),i(this,"_dragKeysFlat",void 0),i(this,"_keyboardDrag",void 0),i(this,"_keyboardDragSpeed",void 0),i(this,"_zoom",void 0),i(this,"keyboardDrag",(function(t){var e=t.event,n=t.key;if(o._keyboardDrag&&o._dragKeysFlat.includes(n)&&o.DS.SelectedSet.size&&o._draggability&&!o.DS.continue){o.DS.publish("Interaction:start",{event:e,isDragging:!0,isDraggingKeyboard:!0}),o._elements=o.DS.getSelection(),o.handleZIndex(!0);var i=function(t){var e=t.shiftKey,n=t.keyboardDragSpeed,i=t.zoom,o=t.key,r=t.dragKeys,s=t.scrollDiff,a=t.canScroll,l=t.scrollCallback,c={x:0,y:0},u=e?4*n*i:n*i;return r.left.includes(o)&&(c.x=s.x||-u,e||s.x||!a||l(["left"],n)),r.right.includes(o)&&(c.x=s.x||u,e||s.x||!a||l(["right"],n)),r.up.includes(o)&&(c.y=s.y||-u,e||s.y||!a||l(["top"],n)),r.down.includes(o)&&(c.y=s.y||u,e||s.y||!a||l(["bottom"],n)),c}({shiftKey:o.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:o._keyboardDragSpeed,zoom:o._zoom,key:n,scrollCallback:o.DS.Area.scroll,scrollDiff:o._scrollDiff,canScroll:o.DS.stores.ScrollStore.canScroll,dragKeys:o._dragKeys});o._elements.forEach((function(t){return N({element:t,posDirection:i,containerRect:o.DS.SelectorArea.rect,useTransform:o._useTransform})})),o.DS.publish("Interaction:update",{event:e,isDragging:!0,isDraggingKeyboard:!0})}})),i(this,"keyboardEnd",(function(t){var e=t.event,n=t.key;o._keyboardDrag&&o._dragKeysFlat.includes(n)&&o.DS.SelectedSet.size&&o._draggability&&o.DS.publish("Interaction:end",{event:e,isDragging:o._draggability,isDraggingKeyboard:!0})})),i(this,"start",(function(t){var e=t.isDragging,n=t.isDraggingKeyboard;e&&!n&&(o._prevCursorPos=null,o._prevScrollPos=null,o._elements=o.DS.getSelection(),o.handleZIndex(!0))})),i(this,"stop",(function(t){null!=t&&t.isKeyboard||(o._prevCursorPos=null,o._prevScrollPos=null,o.handleZIndex(!1),o._elements=[])})),i(this,"update",(function(t){var e=t.isDragging,n=t.isDraggingKeyboard;if(e&&o._elements.length&&!n&&!o.DS.continue){var i=b(o._cursorDiff,"+",o._scrollDiff);o._elements.forEach((function(t){return N({element:t,posDirection:i,containerRect:o.DS.SelectorArea.rect,useTransform:o._useTransform})}))}})),i(this,"handleZIndex",(function(t){o._elements.forEach((function(e){return e.style.zIndex="".concat((parseInt(e.style.zIndex)||0)+t?9999:-9998)}))})),this.DS=r,this._useTransform=u,this._keyboardDragSpeed=c,this._keyboardDrag=l,this._zoom=d,this._draggability=a,this._dragKeys={up:s.up.map((function(t){return t.toLowerCase()})),down:s.down.map((function(t){return t.toLowerCase()})),left:s.left.map((function(t){return t.toLowerCase()})),right:s.right.map((function(t){return t.toLowerCase()}))},this._dragKeysFlat=[].concat(m(this._dragKeys.up),m(this._dragKeys.down),m(this._dragKeys.left),m(this._dragKeys.right)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return n(e,[{key:"_cursorDiff",get:function(){var t=this.DS.stores.PointerStore.currentVal,e=this._prevCursorPos?b(t,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=t,e}},{key:"_scrollDiff",get:function(){var t=this.DS.stores.ScrollStore.currentVal,e=this._prevScrollPos?b(t,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=t,e}}]),e}(),P=function(){function e(n){var o=this,r=n.areaElement,s=n.DS,a=n.draggability,l=n.immediateDrag;t(this,e),i(this,"_areaElement",void 0),i(this,"_draggability",void 0),i(this,"_immediateDrag",void 0),i(this,"isInteracting",void 0),i(this,"isDragging",void 0),i(this,"init",(function(){o.stop(),o._areaElement.addEventListener("mousedown",o.start),o._areaElement.addEventListener("touchstart",o.start,{passive:!1}),o.DS.publish("Interaction:init",{})})),i(this,"start",(function(t){"touchstart"===t.type&&t.preventDefault(),o._canInteract(t)&&(o.isInteracting=!0,o.isDragging=o.isDragEvent(t),o.DS.publish("Interaction:start",{event:t,isDragging:o.isDragging}),document.addEventListener("mouseup",o.reset),document.addEventListener("touchend",o.reset))})),i(this,"isDragEvent",(function(t){return!(!o._draggability||o.DS.stores.KeyStore.isMultiSelectKeyPressed(t)||!o.DS.SelectableSet.has(t.target)||(o._immediateDrag&&(o.DS.SelectedSet.size?o.DS.SelectedSet.has(t.target)||(o.DS.SelectedSet.clear(),o.DS.SelectedSet.add(t.target)):o.DS.SelectedSet.add(t.target)),!o.DS.SelectedSet.has(t.target)))})),i(this,"onClick",(function(t){var e=t.event;if(o._canInteract(e)&&!(e.detail>0)){var n=o.DS,i=n.stores,r=i.PointerStore,s=i.KeyStore,a=n.SelectableSet,l=n.SelectedSet,c=n.publish;r.start(e);var u=e.target;a.has(u)&&(s.isMultiSelectKeyPressed(e)||l.clear(),l.toggle(u),c("Interaction:end",{event:e,isDragging:o.isDragging}))}})),i(this,"stop",(function(){o.isInteracting=!1,o.isDragging=!1,o._areaElement.removeEventListener("mousedown",o.start),o._areaElement.removeEventListener("touchstart",o.start,{passive:!1}),document.removeEventListener("mouseup",o.reset),document.removeEventListener("touchend",o.reset)})),i(this,"update",(function(t){var e=t.event,n=t.scroll_directions,i=t.scroll_multiplier;o.isInteracting&&o.DS.publish("Interaction:update",{event:e,scroll_directions:n,scroll_multiplier:i,isDragging:o.isDragging})})),i(this,"reset",(function(t){var e=o.isDragging;o.stop(),o.init(),o.DS.publish("Interaction:end",{event:t,isDragging:e})})),this._areaElement=r,this._draggability=a,this._immediateDrag=l,this.DS=s,this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",(function(t){var e=t.event;return o.start(e)})),this.DS.subscribe("Area:scroll",this.update)}return n(e,[{key:"_canInteract",value:function(t){return!(2===t.button||this.isInteracting||t.target&&!this.DS.SelectorArea.isInside(t.target))}}]),e}(),z=function e(){var n=this;t(this,e),i(this,"subscribers",{}),i(this,"subscribe",(function(t,e){return Array.isArray(n.subscribers[t])||(n.subscribers[t]=[]),n.subscribers[t].push(e),n.subscribers[t].length-1})),i(this,"unsubscribe",(function(t,e,i){i>=0?n.subscribers[t].splice(i,1):e&&(n.subscribers[t]=n.subscribers[t].filter((function(t){return t!==e})))})),i(this,"publish",(function(t,e){var i,o;Array.isArray(n.subscribers[t])&&(null===(i=n.subscribers["".concat(t,":pre")])||void 0===i||i.forEach((function(t){return t(e)})),null===(o=n.subscribers[t])||void 0===o||o.forEach((function(t){return t(e)})))}))},$=function(e){r(a,e);var o=p(a);function a(e){var n,r=e.elements,s=e.className,l=e.hoverClassName,c=e.draggability,u=e.useTransform,h=e.DS;return t(this,a),i(d(n=o.call(this)),"_initElements",void 0),i(d(n),"_className",void 0),i(d(n),"_hoverClassName",void 0),i(d(n),"_useTransform",void 0),i(d(n),"_draggability",void 0),i(d(n),"init",(function(){return n._initElements.forEach((function(t){return n.add(t)}))})),i(d(n),"clear",(function(){return n.forEach((function(t){return n.delete(t)}))})),i(d(n),"_onClick",(function(t){return n.DS.publish("Selectable:click",{event:t})})),i(d(n),"_onPointer",(function(t){return n.DS.publish("Selectable:pointer",{event:t})})),i(d(n),"addAll",(function(t){return t.forEach((function(t){return n.add(t)}))})),i(d(n),"deleteAll",(function(t){return t.forEach((function(t){return n.delete(t)}))})),n.DS=h,n._initElements=I(r),n._className=s,n._hoverClassName=l,n._useTransform=u,n._draggability=c,n.DS.subscribe("Interaction:init",n.init),n}return n(a,[{key:"add",value:function(t){return t.classList.add(this._className),t.addEventListener("click",this._onClick),t.addEventListener("mousedown",this._onPointer),t.addEventListener("touchstart",this._onPointer,{passive:!1}),this._draggability&&!this._useTransform&&C({computedStyle:window.getComputedStyle(t),node:t}),f(s(a.prototype),"add",this).call(this,t)}},{key:"delete",value:function(t){return t.classList.remove(this._className),t.classList.remove(this._hoverClassName),t.removeEventListener("click",this._onClick),t.removeEventListener("mousedown",this._onPointer),t.removeEventListener("touchstart",this._onPointer,{passive:!1}),f(s(a.prototype),"delete",this).call(this,t)}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(u(Set)),R=function(e){r(a,e);var o=p(a);function a(e){var n,r=e.className,s=e.DS;return t(this,a),i(d(n=o.call(this)),"_className",void 0),i(d(n),"clear",(function(){return n.forEach((function(t){return n.delete(t)}))})),i(d(n),"addAll",(function(t){return t.forEach((function(t){return n.add(t)}))})),i(d(n),"deleteAll",(function(t){return t.forEach((function(t){return n.delete(t)}))})),n.DS=s,n._className=r,n}return n(a,[{key:"add",value:function(t){if(!f(s(a.prototype),"has",this).call(this,t))return f(s(a.prototype),"add",this).call(this,t),t.classList.add(this._className),this.DS.publish("Selected:added",{items:this.elements,item:t}),t.style.zIndex="".concat((parseInt(t.style.zIndex)||0)+1),this}},{key:"delete",value:function(t){if(f(s(a.prototype),"has",this).call(this,t)){var e=f(s(a.prototype),"delete",this).call(this,t);return t.classList.remove(this._className),this.DS.publish("Selected:removed",{items:this.elements,item:t}),t.style.zIndex="".concat((parseInt(t.style.zIndex)||0)-1),e}}},{key:"toggle",value:function(t){return this.has(t)?this.delete(t):this.add(t),t}},{key:"elements",get:function(){return Array.from(this.values())}}]),a}(u(Set)),H=function(){function e(n){var o=this,r=n.DS,s=n.hoverClassName,a=n.multiSelectToggling;t(this,e),i(this,"_prevSelectedSet",void 0),i(this,"_hoverClassName",void 0),i(this,"_multiSelectToggling",void 0),i(this,"start",(function(t){var e=t.event;t.isDragging||(o._storePrevious(e),o._handleInsideSelection(!0,e))})),i(this,"update",(function(t){t.isDragging||o.DS.continue||o._handleInsideSelection()})),i(this,"_handleInsideSelection",(function(t,e){for(var n=o.DS,i=n.SelectableSet,r=n.SelectorArea,s=n.Selector,a=i.elements.map((function(t){return[t,t.getBoundingClientRect()]})),l=[],c=[],u=0,d=a.length;u<d;u++)r.isInside(a[u][0],a[u][1])&&(D(a[u][1],s.rect)?l.push(a[u][0]):c.push(a[u][0]));var h=o.DS.stores.KeyStore.isMultiSelectKeyPressed(e)&&o._multiSelectToggling;l.forEach((function(e){return function(t){var e=t.element,n=t.force,i=t.multiSelectionToggle,o=t.SelectedSet,r=t.hoverClassName;e.classList.contains(r)&&!n||(o.has(e)?i&&o.delete(e):o.add(e),e.classList.add(r))}({element:e,force:t,multiSelectionToggle:h,SelectedSet:o.DS.SelectedSet,hoverClassName:o._hoverClassName})})),c.forEach((function(e){return function(t){var e=t.element,n=t.force,i=t.SelectedSet,o=t.PrevSelectedSet,r=t.hoverClassName;if(!e.classList.contains(r)&&!n)return!1;var s=i.has(e),a=o.has(e);s&&!a?i.delete(e):!s&&a&&i.add(e),e.classList.remove(r)}({element:e,force:t,SelectedSet:o.DS.SelectedSet,hoverClassName:o._hoverClassName,PrevSelectedSet:o._prevSelectedSet})}))})),this._hoverClassName=s,this._multiSelectToggling=a,this.DS=r,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return n(e,[{key:"_storePrevious",value:function(t){var e=this.DS,n=e.stores.KeyStore,i=e.SelectedSet;n.isMultiSelectKeyPressed(t)?this._prevSelectedSet=new Set(i):this._prevSelectedSet=new Set}}]),e}(),U=function(){function e(n){var o=this,r=n.DS,s=n.selector,a=n.selectorClass,l=n.customStyles;t(this,e),i(this,"_rect",void 0),i(this,"start",(function(t){if(!t.isDragging){var e=o.DS.stores.PointerStore.initialValArea;L(o.HTMLNode,x(e,1)),o.HTMLNode.style.display="block",o._rect=null}})),i(this,"stop",(function(){o.HTMLNode.style.width="0",o.HTMLNode.style.height="0",o.HTMLNode.style.display="none"})),i(this,"update",(function(t){if(!t.isDragging&&!o.DS.continue){var e=o.DS.stores,n=e.ScrollStore,i=e.PointerStore,r=function(t){var e=t.scrollAmount,n=t.initialPointerPos,i=t.pointerPos,o={};return i.x>n.x-e.x?(o.left=n.x-e.x,o.width=i.x-n.x+e.x):(o.left=i.x,o.width=n.x-i.x-e.x),i.y>n.y-e.y?(o.top=n.y-e.y,o.height=i.y-n.y+e.y):(o.top=i.y,o.height=n.y-i.y-e.y),o}({scrollAmount:n.scrollAmount,initialPointerPos:i.initialValArea,pointerPos:i.currentValArea});L(o.HTMLNode,r),o._rect=null}})),this.DS=r,this.HTMLNode=s||function(t){var e=document.createElement("div");return e.style.position="absolute",t||(e.style.background="rgba(0, 0, 255, 0.1)",e.style.border="1px solid rgba(0, 0, 255, 0.45)",e.style.display="none",e.style.pointerEvents="none"),e}(l),this.HTMLNode.classList.add(a),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return n(e,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),e}(),q=function(){function e(n){var o=this,r=n.DS,s=n.selectorAreaClass,a=n.autoScrollSpeed,l=n.overflowTolerance;t(this,e),i(this,"_autoScrollSpeed",void 0),i(this,"_scrollInterval",void 0),i(this,"_rect",void 0),i(this,"currentEdges",[]),i(this,"_overflowTolerance",void 0),i(this,"start",(function(){return o.applyElements("append")})),i(this,"applyElements",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"append",e=document.body?"body":"documentElement",n="".concat(t,"Child");o.HTMLNode[n](o.DS.Selector.HTMLNode),document[e][n](o.HTMLNode)})),i(this,"updatePos",(function(){o._rect=null;var t=o.DS.Area.rect,e=o.DS.Area.computedBorder,n=o.HTMLNode.style,i="".concat(t.top+e.top,"px"),r="".concat(t.left+e.left,"px"),s="".concat(t.width,"px"),a="".concat(t.height,"px");n.top!==i&&(n.top=i),n.left!==r&&(n.left=r),n.width!==s&&(n.width=s),n.height!==a&&(n.height=a)})),i(this,"stop",(function(t){o.stopAutoScroll(),t&&o.applyElements("remove")})),i(this,"startAutoScroll",(function(){o.currentEdges=[],o._scrollInterval=setInterval((function(){return o.handleAutoScroll()}),16)})),i(this,"handleAutoScroll",(function(){if(!o.DS.continue){var t=o.DS,e=t.stores.PointerStore,n=t.Area;o.currentEdges=E({elementRect:x(e.currentVal),containerRect:o.rect,tolerance:o._overflowTolerance}),o.currentEdges.length&&n.scroll(o.currentEdges,o._autoScrollSpeed)}})),i(this,"stopAutoScroll",(function(){o.currentEdges=[],clearInterval(o._scrollInterval)})),i(this,"isInside",(function(t,e){return!(!o.DS.Area.HTMLNode.contains(t)||!o.DS.stores.ScrollStore.canScroll)||D(o.rect,e||t.getBoundingClientRect())})),this._autoScrollSpeed=a,this._overflowTolerance=l,this.DS=r,this.HTMLNode=function(t){var e=document.createElement("div");return e.style.position="fixed",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="999999999999999999",e.classList.add(t),e}(s),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",(function(){o.updatePos(),o.stopAutoScroll()}))}return n(e,[{key:"isClicked",value:function(){var t=this.DS.stores.PointerStore;return D({left:t.initialVal.x,top:t.initialVal.y,right:t.initialVal.x,bottom:t.initialVal.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),e}(),W=function(){function e(n){var o=this,r=n.DS,s=n.multiSelectKeys,a=n.multiSelectMode;t(this,e),i(this,"_multiSelectMode",void 0),i(this,"_multiSelectKeys",void 0),i(this,"_currentValues",new Set),i(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),i(this,"init",(function(){document.addEventListener("keydown",o.keydown),document.addEventListener("keyup",o.keyup),window.addEventListener("blur",o.reset)})),i(this,"keydown",(function(t){var e=t.key.toLowerCase();o._currentValues.add(e),o.DS.publish("KeyStore:down",{event:t,key:e})})),i(this,"keyup",(function(t){var e=t.key.toLowerCase();o._currentValues.delete(e),o.DS.publish("KeyStore:up",{event:t,key:e})})),i(this,"stop",(function(){document.removeEventListener("keydown",o.keydown),document.removeEventListener("keyup",o.reset),window.removeEventListener("blur",o.reset),o.reset()})),i(this,"reset",(function(){return o._currentValues.clear()})),this.DS=r,this._multiSelectMode=a,this._multiSelectKeys=s.map((function(t){var e={ctrlKey:"Control",shiftKey:"Shift",metaKey:"Meta"}[t];return e?(console.warn("[DragSelect] ".concat(t,' is deprecated. Use "').concat(e,'" instead. Act Now!. See docs for more info')),e.toLowerCase()):t.toLowerCase()})),this.DS.subscribe("Interaction:init",this.init)}return n(e,[{key:"isMultiSelectKeyPressed",value:function(t){var e=this;return!!this._multiSelectMode||!!this.currentValues.some((function(t){return e._multiSelectKeys.includes(t)}))||!(!t||!this._multiSelectKeys.some((function(n){return t[e._keyMapping[n]]})))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),e}(),V=function(){function e(n){var o=this,r=n.DS;t(this,e),i(this,"_isMouseInteraction",!1),i(this,"_initialValArea",void 0),i(this,"_currentValArea",void 0),i(this,"_lastValArea",void 0),i(this,"_initialVal",void 0),i(this,"_currentVal",void 0),i(this,"_lastVal",void 0),i(this,"_lastTouch",void 0),i(this,"init",(function(){document.addEventListener("mousemove",o.update),document.addEventListener("touchmove",o.update,{passive:!1})})),i(this,"update",(function(t){t&&(o.currentVal=A({event:o._normalizedEvent(t)}),o._isMouseInteraction&&o.DS.publish("PointerStore:updated",{event:t}))})),i(this,"stop",(function(){document.removeEventListener("mousemove",o.update),document.removeEventListener("touchmove",o.update,{passive:!1}),setTimeout((function(){return o._isMouseInteraction=!1}),100)})),i(this,"reset",(function(t){t&&(o.currentVal=o.lastVal=A({event:o._normalizedEvent(t)}),o.stop(),o.init())})),this.DS=r,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",(function(t){var e=t.event;return o.start(e)})),this.DS.subscribe("Interaction:end",(function(t){var e=t.event;return o.reset(e)}))}return n(e,[{key:"start",value:function(t){t&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=A({event:this._normalizedEvent(t)}))}},{key:"_normalizedEvent",value:function(t){return"touches"in t&&"touchend"!==t.type&&(this._lastTouch=t),"touches"in t?this._lastTouch.touches[0]:t}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(t){this._initialVal=t,this._initialValArea=t&&b(t,"-",b(_(this.DS.Area.rect),"+",_(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(t){this._currentVal=t,this._currentValArea=t&&b(t,"-",b(_(this.DS.Area.rect),"+",_(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(t){this._lastVal=t,this._lastValArea=t&&b(t,"-",b(_(this.DS.Area.rect),"+",_(this.DS.Area.computedBorder)))}}]),e}(),Y=function(){function e(n){var o=this,r=n.DS,s=n.areaElement,a=n.zoom;t(this,e),i(this,"_initialVal",void 0),i(this,"_currentVal",void 0),i(this,"_areaElement",void 0),i(this,"_canScroll",void 0),i(this,"init",(function(){return o._areaElement.addEventListener("scroll",o.update)})),i(this,"start",(function(){o._currentVal=o._initialVal=S(o._areaElement),o._areaElement.addEventListener("scroll",o.update)})),i(this,"update",(function(){return o._currentVal=S(o._areaElement)})),i(this,"stop",(function(){o._areaElement.removeEventListener("scroll",o.update),o._initialVal={x:0,y:0},o._canScroll=null})),i(this,"reset",(function(){o.stop(),o.start()})),this._areaElement=s,this.DS=r,this.zoom=a,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",(function(){return o.start()})),this.DS.subscribe("Interaction:end",(function(){return o.reset()}))}return n(e,[{key:"canScroll",get:function(){return"boolean"==typeof this._canScroll?this._canScroll:this._canScroll=(t=this._areaElement,!!((e=S(t)).x||e.y||(t instanceof HTMLDocument?t.body?t.body.scrollTop=1:t.documentElement.scrollTop=1:t.scrollTop=1)));var t,e}},{key:"scrollAmount",get:function(){var t,e=b(this.currentVal,"-",this.initialVal),n={x:t=this.zoom,y:t},i=b(b(e,"*",n),"-",e);return{x:e.x+i.x,y:e.y+i.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=S(this._areaElement)),this._currentVal}}]),e}(),F=function(){function e(n){var o=this,r=n.area,s=void 0===r?document:r,a=n.selectables,l=void 0===a?[]:a,c=n.autoScrollSpeed,u=void 0===c?5:c,d=n.overflowTolerance,h=void 0===d?{x:25,y:25}:d,p=n.zoom,f=void 0===p?1:p,g=n.customStyles,m=void 0!==g&&g,v=n.multiSelectMode,y=void 0!==v&&v,b=n.multiSelectToggling,_=void 0===b||b,x=n.multiSelectKeys,w=void 0===x?["Control","Shift","Meta"]:x,S=n.selector,E=void 0===S?void 0:S,A=n.draggability,T=void 0===A||A,k=n.immediateDrag,C=void 0===k||k,D=n.keyboardDrag,N=void 0===D||D,M=n.dragKeys,I=n.keyboardDragSpeed,L=void 0===I?10:I,F=n.useTransform,K=void 0===F||F,X=n.hoverClass,G=void 0===X?"ds-hover":X,Q=n.selectableClass,Z=void 0===Q?"ds-selectable":Q,J=n.selectedClass,tt=void 0===J?"ds-selected":J,et=n.selectorClass,nt=void 0===et?"ds-selector":et,it=n.selectorAreaClass,ot=void 0===it?"ds-selector-area":it,rt=n.callback,st=n.onDragMove,at=n.onDragStartBegin,lt=n.onDragStart,ct=n.onElementSelect,ut=n.onElementUnselect;t(this,e),i(this,"continue",!1),i(this,"start",(function(){return o.Interaction.init()})),i(this,"break",(function(){return o.continue=!0})),i(this,"getSelection",(function(){return o.SelectedSet.elements})),i(this,"getSelectables",(function(){return o.SelectableSet.elements})),i(this,"getInitialCursorPosition",(function(){return o.stores.PointerStore.initialVal})),i(this,"getCurrentCursorPosition",(function(){return o.stores.PointerStore.currentVal})),i(this,"getPreviousCursorPosition",(function(){return o.stores.PointerStore.lastVal})),i(this,"getInitialCursorPositionArea",(function(){return o.stores.PointerStore.initialValArea})),i(this,"getCurrentCursorPositionArea",(function(){return o.stores.PointerStore.currentValArea})),i(this,"getPreviousCursorPositionArea",(function(){return o.stores.PointerStore.lastValArea})),i(this,"isMultiSelect",(function(t){return o.stores.KeyStore.isMultiSelectKeyPressed(t)})),i(this,"isDragging",(function(){return o.Interaction.isDragging})),this.PubSub=new z,this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this._callbacksTemp({callback:rt,onDragMove:st,onDragStart:lt,onDragStartBegin:at,onElementSelect:ct,onElementUnselect:ut}),this.stores={PointerStore:new V({DS:this}),ScrollStore:new Y({DS:this,areaElement:s,zoom:f}),KeyStore:new W({DS:this,multiSelectKeys:w,multiSelectMode:y})},this.Area=new O({area:s,PS:this.PubSub,zoom:f}),this.Selector=new U({DS:this,selector:E,selectorClass:nt,customStyles:m}),this.SelectorArea=new q({DS:this,selectorAreaClass:ot,autoScrollSpeed:u,overflowTolerance:h}),this.SelectableSet=new $({elements:l,DS:this,className:Z,hoverClassName:G,useTransform:K,draggability:T}),this.SelectedSet=new R({DS:this,className:tt}),this.Selection=new H({DS:this,hoverClassName:G,multiSelectToggling:_}),this.Drag=new B({DS:this,draggability:T,useTransform:K,keyboardDrag:N,dragKeys:Object.assign({up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]},M),zoom:f,keyboardDragSpeed:L}),this.Interaction=new P({areaElement:s,DS:this,draggability:T,immediateDrag:C}),j({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction}),this.subscribe("Interaction:end",(function(){return o.continue=!1})),this.start()}return n(e,[{key:"_callbacksTemp",value:function(t){var e=t.callback,n=t.onDragMove,i=t.onDragStart,o=t.onDragStartBegin,r=t.onElementSelect,s=t.onElementUnselect,a=function(t,e){return console.warn("[DragSelect] ".concat(t,' is deprecated. Use DragSelect.subscribe("').concat(e,'", (callbackObject) => {}) instead. Act Now! See docs for more info'))};e&&(a("callback","callback"),this.subscribe("callback",(function(t){var n=t.items,i=(t.item,t.event);return e(n,i)}))),n&&(a("onDragMove","dragmove"),this.subscribe("dragmove",(function(t){t.items,t.item;var e=t.event;return n(e)}))),i&&(a("onDragStart","dragstart"),this.subscribe("dragstart",(function(t){t.items,t.item;var e=t.event;return i(e)}))),o&&(a("onDragStartBegin","dragstart"),this.subscribe("dragstart",(function(t){t.items,t.item;var e=t.event;return o(e)}))),r&&(a("onElementSelect","elementselect"),this.subscribe("elementselect",(function(t){t.items;var e=t.item,n=t.event;return r(e,n)}))),s&&(a("onElementUnselect","elementunselect"),this.subscribe("elementunselect",(function(t){t.items;var e=t.item,n=t.event;return s(e,n)})))}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(t),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),t&&this.SelectableSet.clear(),e&&this.SelectedSet.clear()}},{key:"addSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.addAll(I(t)),n||this.addSelectables(t),e&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.deleteAll(I(t)),n&&this.removeSelectables(t),e&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I(t).forEach((function(o){return e.SelectedSet.has(o)?e.removeSelection(t,n,i):e.addSelection(t,n,i)})),n&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.clearSelection(),this.addSelection(t,e,n),this.getSelection()}},{key:"clearSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.SelectedSet.clear(),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=I(t);return this.SelectableSet.addAll(n),e&&this.SelectedSet.addAll(n),t}},{key:"setSelectables",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.removeSelectables(t,e),this.addSelectables(t,n)}},{key:"removeSelectables",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.SelectableSet.deleteAll(I(t)),e&&this.removeSelection(t),t}},{key:"getCursorPositionDifference",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.warn("[DragSelect] Using .getCursorPositionDifference is deprecated. Calculate yourself instead. i.e. `.getCurrentCursorPosition().x - .getInitialCursorPosition().x`");var n=e?this.getCurrentCursorPositionArea():this.getCurrentCursorPosition(),i=t?e?this.getPreviousCursorPositionArea():this.getPreviousCursorPosition():e?this.getInitialCursorPositionArea():this.getInitialCursorPosition();return b(n,"-",i)}}]),e}();return F}()},865:(t,e,n)=>{var i=n(755),o=n(672);void 0===o.$&&(o.$=i),void 0===o.jQuery&&(o.jQuery=i),t.exports=i},803:(t,e,n)=>{var i=n(36),o=n(672),r=i.action_conf;void 0===o.action_conf&&(o.action_conf=r),t.exports=i},359:(t,e,n)=>{var i=n(36),o=n(672),r=i.combo_conf;void 0===o.combo_conf&&(o.combo_conf=r),t.exports=i},787:(t,e,n)=>{var i=n(36),o=n(672),r=i.custom_conf;void 0===o.custom_conf&&(o.custom_conf=r),t.exports=i},360:(t,e,n)=>{var i=n(36),o=n(672),r=i.meta_conf;void 0===o.meta_conf&&(o.meta_conf=r),t.exports=i},863:(t,e,n)=>{var i=n(36),o=n(672),r=i.meta_full_conf;void 0===o.meta_full_conf&&(o.meta_full_conf=r),t.exports=i},83:(t,e,n)=>{var i=n(36),o=n(672),r=i.navigation_conf;void 0===o.navigation_conf&&(o.navigation_conf=r),t.exports=i},879:(t,e,n)=>{var i=n(624),o=n(672),r=i.relation_get_notes_separated;void 0===o.relation_get_notes_separated&&(o.relation_get_notes_separated=r),t.exports=i},121:(t,e,n)=>{var i=n(624),o=n(672),r=i.relation_get_notes;void 0===o.relation_get_notes&&(o.relation_get_notes=r),t.exports=i},944:(t,e,n)=>{var i=n(36),o=n(672),r=i.type_conf;void 0===o.type_conf&&(o.type_conf=r),t.exports=i},480:(t,e,n)=>{var i=n(36),o=n(672),r=i.type_full_conf;void 0===o.type_full_conf&&(o.type_full_conf=r),t.exports=i},672:(t,e,n)=>{"use strict";t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return t}()},238:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;function jBoxWrapper(t){function e(n,i){return this.options={id:null,width:"auto",height:"auto",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,responsiveWidth:!0,responsiveHeight:!0,responsiveMinWidth:100,responsiveMinHeight:100,attach:null,trigger:"click",preventDefault:!1,content:null,getContent:null,title:null,getTitle:null,footer:null,isolateScroll:!0,ajax:{url:null,data:"",reload:!1,getURL:"data-url",getData:"data-ajax",setContent:!0,loadingClass:!0,spinner:!0,spinnerDelay:300,spinnerReposition:!0},cancelAjaxOnClose:!0,target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},fixed:!1,adjustPosition:!0,adjustTracker:!1,adjustDistance:5,reposition:!0,repositionOnOpen:!0,repositionOnContent:!0,holdPosition:!0,pointer:!1,pointTo:"target",fade:180,animation:null,theme:"Default",addClass:null,overlay:!1,overlayClass:null,zIndex:1e4,delayOpen:0,delayClose:0,closeOnEsc:!1,closeOnClick:!1,closeOnMouseleave:!1,closeButton:!1,appendTo:t("body"),createOnInit:!1,blockScroll:!1,blockScrollAdjust:!0,draggable:!1,dragOver:!0,autoClose:!1,delayOnHover:!1,showCountdown:!1,preloadAudio:!0,audio:null,volume:100,onInit:null,onAttach:null,onPosition:null,onCreated:null,onOpen:null,onOpenComplete:null,onClose:null,onCloseComplete:null,onDragStart:null,onDragEnd:null},this._pluginOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:!0},Mouse:{responsiveWidth:!1,responsiveHeight:!1,adjustPosition:"flip",target:"mouse",trigger:"mouseenter",position:{x:"right",y:"bottom"},outside:"xy",offset:5},Modal:{target:t(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:!0,overlay:!0,animation:"zoomIn"}},this.options=t.extend(!0,this.options,this._pluginOptions[n]||e._pluginOptions[n],i),"string"==t.type(n)&&(this.type=n),this.isTouchDevice=function(){var t,e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||(t=e=["(",e.join("touch-enabled),("),"heartz",")"].join(""),window.matchMedia(t).matches)}(),this.isTouchDevice&&"mouseenter"===this.options.trigger&&!1===this.options.closeOnClick&&(this.options.closeOnClick="body"),this._fireEvent=function(t,e){this.options["_"+t]&&this.options["_"+t].bind(this)(e),this.options[t]&&this.options[t].bind(this)(e)},null===this.options.id&&(this.options.id="jBox"+e._getUniqueID()),this.id=this.options.id,("center"==this.options.position.x&&"x"==this.options.outside||"center"==this.options.position.y&&"y"==this.options.outside)&&(this.options.outside=null),"target"!=this.options.pointTo||this.options.outside&&"xy"!=this.options.outside||(this.options.pointer=!1),"object"!=t.type(this.options.offset)?this.options.offset={x:this.options.offset,y:this.options.offset}:this.options.offset=t.extend({x:0,y:0},this.options.offset),"object"!=t.type(this.options.adjustDistance)?this.options.adjustDistance={top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}:this.options.adjustDistance=t.extend({top:5,left:5,right:5,bottom:5},this.options.adjustDistance),this.outside=!(!this.options.outside||"xy"==this.options.outside)&&this.options.position[this.options.outside],this.align=this.outside||("center"!=this.options.position.y&&"number"!=t.type(this.options.position.y)?this.options.position.x:"center"!=this.options.position.x&&"number"!=t.type(this.options.position.x)?this.options.position.y:this.options.attributes.x),e.zIndexMax=Math.max(e.zIndexMax||0,"auto"===this.options.zIndex?1e4:this.options.zIndex),"auto"===this.options.zIndex&&(this.adjustZIndexOnOpen=!0,this.options.zIndex=e.zIndexMax+=2,this.trueModal=this.options.overlay),this._getOpp=function(t){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[t]},this._getXY=function(t){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[t]},this._getTL=function(t){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[t]},this._getInt=function(e,n){return"auto"==e?"auto":e&&"string"==t.type(e)&&"%"==e.slice(-1)?t(window)["height"==n?"innerHeight":"innerWidth"]()*parseInt(e.replace("%",""))/100:e},this._createSVG=function(e,n){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return t.each(n,(function(t,e){i.setAttribute(e[0],e[1]||"")})),i},this._isolateScroll=function(t){t&&t.length&&t.on("DOMMouseScroll.jBoxIsolateScroll mousewheel.jBoxIsolateScroll",(function(e){var n=e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail,i=0<=this.scrollTop+t.outerHeight()-this.scrollHeight,o=this.scrollTop<=0;(n<0&&i||0<n&&o)&&e.preventDefault()}))},this._setTitleWidth=function(){if(!this.titleContainer||"auto"==this.content[0].style.width&&!this.content[0].style.maxWidth)return null;var t;"none"==this.wrapper.css("display")?(this.wrapper.css("display","block"),t=this.content.outerWidth(),this.wrapper.css("display","none")):t=this.content.outerWidth(),this.titleContainer.css({maxWidth:Math.max(t,parseInt(this.content[0].style.maxWidth))||null})},this._draggable=function(){if(!this.options.draggable)return!1;var n="title"==this.options.draggable?this.titleContainer:this.options.draggable instanceof t?this.options.draggable:"string"==t.type(this.options.draggable)?t(this.options.draggable):this.wrapper;return!(!(n&&n instanceof t&&n.length)||n.data("jBox-draggable"))&&(n.addClass("jBox-draggable").data("jBox-draggable",!0).on("touchstart mousedown",function(n){var i,o,r,s,a,l;2==n.button||t(n.target).hasClass("jBox-noDrag")||t(n.target).parents(".jBox-noDrag").length?"touchstart"==n.type&&(t(n.target).hasClass("jBox-closeButton")||t(n.target).parents(".jBox-closeButton").length)&&this.close({ignoreDelay:!0}):(o="touchstart"==n.type&&n.touches&&n.touches[0]?(i=n.touches[0].pageX,n.touches[0].pageY):(i=n.pageX,n.pageY),this.draggingStartX=i,this.draggingStartY=o,this.options.dragOver&&!this.trueModal&&parseInt(this.wrapper.css("zIndex"),10)<=e.zIndexMaxDragover&&(e.zIndexMaxDragover+=1,this.wrapper.css("zIndex",e.zIndexMaxDragover)),r=this.wrapper.outerHeight(),s=this.wrapper.outerWidth(),a=this.wrapper.offset().top+r-o,l=this.wrapper.offset().left+s-i,t(document).on("touchmove.jBox-draggable-"+this.id+" mousemove.jBox-draggable-"+this.id,function(t){var e;t="touchmove"==t.type&&t.touches&&t.touches[0]?(e=t.touches[0].pageX,t.touches[0].pageY):(e=t.pageX,t.pageY),this.dragging||this.draggingStartX==e||this.draggingStartY==t||(this._fireEvent("onDragStart"),this.dragging=!0),this.wrapper.offset({top:t+a-r,left:e+l-s})}.bind(this)),n.preventDefault())}.bind(this)).on("touchend mouseup",function(){var e;t(document).off("touchmove.jBox-draggable-"+this.id+" mousemove.jBox-draggable-"+this.id),this.dragging&&this._fireEvent("onDragEnd"),this.dragging=!1,"Modal"!=this.type&&"Confirm"!=this.type||!this.options.holdPosition||(e={x:(e=t("#"+this.id).offset()).left-t(document).scrollLeft(),y:e.top-t(document).scrollTop()},this.position({position:e,offset:{x:0,y:0}}))}.bind(this)),this.trueModal||(e.zIndexMaxDragover=e.zIndexMaxDragover?Math.max(e.zIndexMaxDragover,this.options.zIndex):this.options.zIndex),this)},this._create=function(){var e;this.wrapper||(this.wrapper=t("<div/>",{id:this.id,class:"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")}).css({position:this.options.fixed?"fixed":"absolute",display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this),this.options.closeOnMouseleave&&this.wrapper.on("mouseleave",function(e){!this.source||e.relatedTarget!=this.source[0]&&-1===t.inArray(this.source[0],t(e.relatedTarget).parents("*"))&&this.close()}.bind(this)),"box"==this.options.closeOnClick&&this.wrapper.on("click tap",function(){this.close({ignoreDelay:!0})}.bind(this)),this.container=t('<div class="jBox-container"/>').appendTo(this.wrapper),this.content=t('<div class="jBox-content"/>').appendTo(this.container),this.options.footer&&(this.footer=t('<div class="jBox-footer"/>').append(this.options.footer).appendTo(this.container)),this.options.isolateScroll&&this._isolateScroll(this.content),this.options.closeButton&&((e=this._createSVG("svg",[["viewBox","0 0 24 24"]])).appendChild(this._createSVG("path",[["d","M22.2,4c0,0,0.5,0.6,0,1.1l-6.8,6.8l6.9,6.9c0.5,0.5,0,1.1,0,1.1L20,22.3c0,0-0.6,0.5-1.1,0L12,15.4l-6.9,6.9c-0.5,0.5-1.1,0-1.1,0L1.7,20c0,0-0.5-0.6,0-1.1L8.6,12L1.7,5.1C1.2,4.6,1.7,4,1.7,4L4,1.7c0,0,0.6-0.5,1.1,0L12,8.5l6.8-6.8c0.5-0.5,1.1,0,1.1,0L22.2,4z"]])),this.closeButton=t('<div class="jBox-closeButton jBox-noDrag"/>').on("click tap",function(t){this.close({ignoreDelay:!0})}.bind(this)).append(e),"box"!=this.options.closeButton&&(!0!==this.options.closeButton||this.options.overlay||this.options.title||this.options.getTitle)||(this.wrapper.addClass("jBox-closeButton-box"),this.closeButton.appendTo(this.container))),this.wrapper.appendTo(this.options.appendTo),this.wrapper.find(".jBox-closeButton").length&&t.each(["top","right","bottom","left"],function(t,e){this.wrapper.find(".jBox-closeButton").css(e)&&"auto"!=this.wrapper.find(".jBox-closeButton").css(e)&&(this.options.adjustDistance[e]=Math.max(this.options.adjustDistance[e],this.options.adjustDistance[e]+-1*((parseInt(this.wrapper.find(".jBox-closeButton").css(e))||0)+(parseInt(this.container.css("border-"+e+"-width"))||0))))}.bind(this)),this.options.pointer&&(this.pointer={position:"target"!=this.options.pointTo?this.options.pointTo:this._getOpp(this.outside),xy:"target"!=this.options.pointTo?this._getXY(this.options.pointTo):this._getXY(this.outside),align:"center",offset:0},this.pointer.element=t('<div class="jBox-pointer jBox-pointer-'+this.pointer.position+'"/>').appendTo(this.wrapper),this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()},"string"==t.type(this.options.pointer)&&((e=this.options.pointer.split(":"))[0]&&(this.pointer.align=e[0]),e[1]&&(this.pointer.offset=parseInt(e[1]))),this.pointer.alignAttribute="x"==this.pointer.xy?"bottom"==this.pointer.align?"bottom":"top":"right"==this.pointer.align?"right":"left",this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]),this.pointer.element.css(this.pointer.alignAttribute,"center"==this.pointer.align?"50%":0).css("margin-"+this.pointer.alignAttribute,this.pointer.offset),this.pointer.margin={},this.pointer.margin["margin-"+this.pointer.alignAttribute]=this.pointer.offset,"center"==this.pointer.align&&this.pointer.element.css("transform","translate("+("y"==this.pointer.xy?-.5*this.pointer.dimensions.x+"px":0)+", "+("x"==this.pointer.xy?-.5*this.pointer.dimensions.y+"px":0)+")"),this.pointer.element.css("x"==this.pointer.xy?"width":"height",parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width"))),this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position)),this.setContent(this.options.content,!0),this.setTitle(this.options.title,!0),this.options.draggable&&this._draggable(),this._fireEvent("onCreated"))},this.options.createOnInit&&this._create(),this.options.attach&&this.attach(),this._attachEvents=function(){this.options.delayOnHover&&t("#"+this.id).on("mouseenter",function(t){this.isHovered=!0}.bind(this)),this.options.delayOnHover&&t("#"+this.id).on("mouseleave",function(t){this.isHovered=!1}.bind(this)),(this.options.adjustPosition||this.options.reposition)&&!this.fixed&&this.outside&&(this.options.adjustTracker&&t(window).on("scroll.jBox-"+this.id,function(t){this.position()}.bind(this)),(this.options.adjustPosition||this.options.reposition)&&t(window).on("resize.jBox-"+this.id,function(t){this.position()}.bind(this))),"mouse"==this.options.target&&t("body").on("mousemove.jBox-"+this.id,function(t){this.position({mouseTarget:{top:t.pageY,left:t.pageX}})}.bind(this))},this._detachEvents=function(){this.options.closeOnEsc&&t(document).off("keyup.jBox-"+this.id),!0!==this.options.closeOnClick&&"body"!=this.options.closeOnClick||t(document).off("click.jBox-"+this.id+" tap.jBox-"+this.id),this.options.adjustTracker&&t(window).off("scroll.jBox-"+this.id),(this.options.adjustPosition||this.options.reposition)&&t(window).off("resize.jBox-"+this.id),"mouse"==this.options.target&&t("body").off("mousemove.jBox-"+this.id)},this._showOverlay=function(){this.overlay||(this.overlay=t('<div id="'+this.id+'-overlay"/>').addClass("jBox-overlay"+(this.type?" jBox-overlay-"+this.type:"")).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(this.options.appendTo),this.options.overlayClass&&this.overlay.addClass(this.options.overlayClass),"overlay"!=this.options.closeButton&&!0!==this.options.closeButton||this.overlay.append(this.closeButton),"overlay"==this.options.closeOnClick&&this.overlay.on("click tap",function(){this.close({ignoreDelay:!0})}.bind(this)),t("#"+this.id+"-overlay .jBox-closeButton").length&&(this.options.adjustDistance.top=Math.max(t("#"+this.id+"-overlay .jBox-closeButton").outerHeight(),this.options.adjustDistance.top))),!0===this.adjustZIndexOnOpen&&this.overlay.css("zIndex",parseInt(this.wrapper.css("zIndex"),10)-1),"block"!=this.overlay.css("display")&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.overlay.css({display:"block"})}.bind(this)}):this.overlay.css({display:"block",opacity:1}))},this._hideOverlay=function(){this.overlay&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:!1,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"})}.bind(this)}):this.overlay.css({display:"none",opacity:0}))},this._exposeDimensions=function(){this.wrapper.css({top:-1e4,left:-1e4,right:"auto",bottom:"auto"});var t={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()};return this.wrapper.css({top:"auto",left:"auto"}),t},this._generateAnimationCSS=function(){if("object"!=t.type(this.options.animation)&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]),!this.options.animation)return null;this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":")),this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":")),this.options.animation.openDirection=this.options.animation.open[1]||null,this.options.animation.closeDirection=this.options.animation.close[1]||null,this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]),this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]),this.options.animation.open&&(this.options.animation.open+="Open"),this.options.animation.close&&(this.options.animation.close+="Close");var e={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:this.options.fade||180,css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:this.options.fade||180,css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:this.options.fade||180,positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:this.options.fade||180,timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:this.options.fade||300,css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};t.each(["pulse","tada"],(function(t,n){e[n+"Open"]=e[n+"Close"]=e[n]}));var n=function(n,i){var o="@keyframes jBox-"+this.id+"-animation-"+this.options.animation[n]+"-"+n+(i?"-"+i:"")+" {";return t.each(e[this.options.animation[n]].css,function(t,r){var s=i?r[1].replace("%XY",this._getXY(i).toUpperCase()):r[1];e[this.options.animation[n]].positions&&(s=s.replace("%V",e[this.options.animation[n]].positions[i][r[0]])),o+=r[0]+" {transform:"+s+";}"}.bind(this)),o+="}",o+=".jBox-"+this.id+"-animation-"+this.options.animation[n]+"-"+n+(i?"-"+i:"")+" {",o+="animation-duration: "+e[this.options.animation[n]].duration+"ms;",o+="animation-name: jBox-"+this.id+"-animation-"+this.options.animation[n]+"-"+n+(i?"-"+i:"")+";",o+=e[this.options.animation[n]].timing?"animation-timing-function: "+e[this.options.animation[n]].timing+";":"",o+="}"}.bind(this);this._animationCSS="",t.each(["open","close"],function(i,o){if(!this.options.animation[o]||!e[this.options.animation[o]]||"close"==o&&!this.options.fade)return"";e[this.options.animation[o]].positions?t.each(["top","right","bottom","left"],function(t,e){this._animationCSS+=n(o,e)}.bind(this)):this._animationCSS+=n(o)}.bind(this))},this.options.animation&&this._generateAnimationCSS(),this._blockBodyClick=function(){this.blockBodyClick=!0,setTimeout(function(){this.blockBodyClick=!1}.bind(this),10)},this._animate=function(t){if(t=t||(this.isOpen?"open":"close"),!this.options.fade&&"close"==t)return null;var e=this.options.animation[t+"Direction"]||("center"!=this.align?this.align:this.options.attributes.x);this.flipped&&this._getXY(e)==this._getXY(this.align)&&(e=this._getOpp(e));var n="jBox-"+this.id+"-animation-"+this.options.animation[t]+"-"+t+" jBox-"+this.id+"-animation-"+this.options.animation[t]+"-"+t+"-"+e;this.wrapper.addClass(n),e=1e3*parseFloat(this.wrapper.css("animation-duration")),"close"==t&&(e=Math.min(e,this.options.fade)),setTimeout(function(){this.wrapper&&this.wrapper.removeClass(n)}.bind(this),e)},this._abortAnimation=function(){var t=this.wrapper.attr("class").split(" ").filter(function(t){return 0!==t.lastIndexOf("jBox-"+this.id+"-animation",0)}.bind(this));this.wrapper.attr("class",t.join(" "))},(this.options.responsiveWidth||this.options.responsiveHeight)&&t(window).on("resize.responsivejBox-"+this.id,function(t){this.isOpen&&this.position()}.bind(this)),"string"===t.type(this.options.preloadAudio)&&(this.options.preloadAudio=[this.options.preloadAudio]),"string"===t.type(this.options.audio)&&(this.options.audio={open:this.options.audio}),"number"===t.type(this.options.volume)&&(this.options.volume={open:this.options.volume,close:this.options.volume}),!0===this.options.preloadAudio&&this.options.audio&&(this.options.preloadAudio=[],t.each(this.options.audio,function(t,e){this.options.preloadAudio.push(e+".mp3"),this.options.preloadAudio.push(e+".ogg")}.bind(this))),this.options.preloadAudio.length&&t.each(this.options.preloadAudio,(function(t,e){var n=new Audio;n.src=e,n.preload="auto"})),this._fireEvent("onInit"),this}var n,i;return e.prototype.attach=function(e,n){return e=e||this.options.attach,"string"==t.type(e)&&(e=t(e)),n=n||this.options.trigger,e&&e.length&&t.each(e,function(e,i){(i=t(i)).data("jBox-attached-"+this.id)||("title"==this.options.getContent&&null!=i.attr("title")&&i.data("jBox-getContent",i.attr("title")).removeAttr("title"),this.attachedElements||(this.attachedElements=[]),this.attachedElements.push(i[0]),i.on(n+".jBox-attach-"+this.id,function(t){var e;this.timer&&clearTimeout(this.timer),"mouseenter"==n&&this.isOpen&&this.source[0]==i[0]||(this.isOpen&&this.source&&this.source[0]!=i[0]&&(e=!0),this.source=i,this.options.target||(this.target=i),"click"==n&&this.options.preventDefault&&t.preventDefault(),this["click"!=n||e?"open":"toggle"]())}.bind(this)),"mouseenter"==this.options.trigger&&i.on("mouseleave",function(e){if(!this.wrapper)return null;this.options.closeOnMouseleave&&(e.relatedTarget==this.wrapper[0]||t(e.relatedTarget).parents("#"+this.id).length)||this.close()}.bind(this)),i.data("jBox-attached-"+this.id,n),this._fireEvent("onAttach",i))}.bind(this)),this},e.prototype.detach=function(e){return(e=e||this.attachedElements||[])&&e.length&&t.each(e,function(e,n){(n=t(n)).data("jBox-attached-"+this.id)&&(n.off(n.data("jBox-attached-"+this.id)+".jBox-attach-"+this.id),n.data("jBox-attached-"+this.id,null)),this.attachedElements=t.grep(this.attachedElements,(function(t){return t!=n[0]}))}.bind(this)),this},e.prototype.setTitle=function(e,n){if(null==e||null==e)return this;this.wrapper||this._create();var i=this.wrapper.outerHeight(),o=this.wrapper.outerWidth();return this.title||(this.titleContainer=t('<div class="jBox-title"/>'),this.title=t("<div/>").appendTo(this.titleContainer),"title"!=this.options.closeButton&&(!0!==this.options.closeButton||this.options.overlay)||(this.wrapper.addClass("jBox-closeButton-title"),this.closeButton.appendTo(this.titleContainer)),this.titleContainer.insertBefore(this.content),this._setTitleWidth()),this.wrapper[e?"addClass":"removeClass"]("jBox-hasTitle"),this.title.html(e),o!=this.wrapper.outerWidth()&&this._setTitleWidth(),this.options.draggable&&this._draggable(),n||!this.options.repositionOnContent||i==this.wrapper.outerHeight()&&o==this.wrapper.outerWidth()||this.position(),this},e.prototype.setContent=function(e,n){if(null==e||null==e)return this;this.wrapper||this._create();var i=this.wrapper.outerHeight(),o=this.wrapper.outerWidth();switch(this.content.children("[data-jbox-content-appended]").appendTo("body").css({display:"none"}),t.type(e)){case"string":this.content.html(e);break;case"object":e&&(e instanceof t||e.constructor.prototype.jquery)?(this.content.html(""),e.attr("data-jbox-content-appended",1).appendTo(this.content).css({display:"block"})):this.content.html(JSON.stringify(e))}return o!=this.wrapper.outerWidth()&&this._setTitleWidth(),this.options.draggable&&this._draggable(),n||!this.options.repositionOnContent||i==this.wrapper.outerHeight()&&o==this.wrapper.outerWidth()||this.position(),this},e.prototype.setDimensions=function(t,e,n){this.wrapper||this._create(),this.content.css(t,this._getInt(e=null==e?"auto":e)),"width"==t&&this._setTitleWidth(),this.options[t]=e,null!=n&&!n||this.position()},e.prototype.setWidth=function(t,e){this.setDimensions("width",t,e)},e.prototype.setHeight=function(t,e){this.setDimensions("height",t,e)},e.prototype.position=function(e){if(e=t.extend(!0,this.options,e=e||{}),this.target=e.target||this.target||t(window),this.target instanceof t||"mouse"==this.target||(this.target=t(this.target)),!this.target.length)return this;this.content.css({width:this._getInt(e.width,"width"),height:this._getInt(e.height,"height"),minWidth:this._getInt(e.minWidth,"width"),minHeight:this._getInt(e.minHeight,"height"),maxWidth:this._getInt(e.maxWidth,"width"),maxHeight:this._getInt(e.maxHeight,"height")}),this._setTitleWidth();var n=this._exposeDimensions();"mouse"==this.target||this.target.data("jBox-"+this.id+"-fixed")||this.target.data("jBox-"+this.id+"-fixed",this.target[0]!=t(window)[0]&&("fixed"==this.target.css("position")||0<this.target.parents().filter((function(){return"fixed"==t(this).css("position")})).length)?"fixed":"static");var i={x:t(window).outerWidth(),y:t(window).outerHeight(),top:e.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:t(window).scrollTop(),left:e.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:t(window).scrollLeft()};i.bottom=i.top+i.y,i.right=i.left+i.x;try{var o=this.target.offset()}catch(i){o={top:0,left:0}}"mouse"!=this.target&&"fixed"==this.target.data("jBox-"+this.id+"-fixed")&&e.fixed&&(o.top=o.top-t(window).scrollTop(),o.left=o.left-t(window).scrollLeft());var r={x:"mouse"==this.target?12:this.target.outerWidth(),y:"mouse"==this.target?20:this.target.outerHeight(),top:"mouse"==this.target&&e.mouseTarget?e.mouseTarget.top:o?o.top:0,left:"mouse"==this.target&&e.mouseTarget?e.mouseTarget.left:o?o.left:0},s=e.outside&&!("center"==e.position.x&&"center"==e.position.y),a={x:i.x-e.adjustDistance.left-e.adjustDistance.right,y:i.y-e.adjustDistance.top-e.adjustDistance.bottom,left:s?r.left-t(window).scrollLeft()-e.adjustDistance.left:0,right:s?i.x-r.left+t(window).scrollLeft()-r.x-e.adjustDistance.right:0,top:s?r.top-t(window).scrollTop()-this.options.adjustDistance.top:0,bottom:s?i.y-r.top+t(window).scrollTop()-r.y-e.adjustDistance.bottom:0},l={x:"x"!=e.outside&&"xy"!=e.outside||"number"==t.type(e.position.x)?null:e.position.x,y:"y"!=e.outside&&"xy"!=e.outside||"number"==t.type(e.position.y)?null:e.position.y},c={x:!1,y:!1};l.x&&n.x>a[l.x]&&a[this._getOpp(l.x)]>a[l.x]&&(l.x=this._getOpp(l.x))&&(c.x=!0),l.y&&n.y>a[l.y]&&a[this._getOpp(l.y)]>a[l.y]&&(l.y=this._getOpp(l.y))&&(c.y=!0),(e.responsiveWidth||e.responsiveHeight)&&(m=function(){var t;e.responsiveWidth&&n.x>a[l.x||"x"]&&(t=a[l.x||"x"]-(this.pointer&&s&&"x"==e.outside?this.pointer.dimensions.x:0)-parseInt(this.container.css("border-left-width"))-parseInt(this.container.css("border-right-width")),this.content.css({width:t>this.options.responsiveMinWidth?t:null,minWidth:t<parseInt(this.content.css("minWidth"))?0:null}),this._setTitleWidth()),n=this._exposeDimensions()}.bind(this),e.responsiveWidth&&m(),e.responsiveWidth&&!c.y&&l.y&&n.y>a[l.y]&&a[this._getOpp(l.y)]>a[l.y]&&(l.y=this._getOpp(l.y))&&(c.y=!0),v=function(){var t;e.responsiveHeight&&n.y>a[l.y||"y"]&&(t=function(){return this.titleContainer||this.footer?("none"==this.wrapper.css("display")?(this.wrapper.css("display","block"),t=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0),this.wrapper.css("display","none")):t=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0),t||0):0;var t}.bind(this),t=a[l.y||"y"]-(this.pointer&&s&&"y"==e.outside?this.pointer.dimensions.y:0)-t()-parseInt(this.container.css("border-top-width"))-parseInt(this.container.css("border-bottom-width")),this.content.css({height:t>this.options.responsiveMinHeight?t:null}),this._setTitleWidth()),n=this._exposeDimensions()}.bind(this),e.responsiveHeight&&v(),e.responsiveHeight&&!c.x&&l.x&&n.x>a[l.x]&&a[this._getOpp(l.x)]>a[l.x]&&(l.x=this._getOpp(l.x))&&(c.x=!0),e.adjustPosition&&"move"!=e.adjustPosition&&(c.x&&m(),c.y&&v()));var u={},d=function(i){if("number"!=t.type(e.position[i])){var o=e.attributes[i]="x"==i?"left":"top";if(u[o]=r[o],"center"==e.position[i])return u[o]+=Math.ceil((r[i]-n[i])/2),void("mouse"!=this.target&&this.target[0]&&this.target[0]==t(window)[0]&&(u[o]+=.5*(e.adjustDistance[o]-e.adjustDistance[this._getOpp(o)])));o!=e.position[i]&&(u[o]+=r[i]-n[i]),e.outside!=i&&"xy"!=e.outside||(u[o]+=n[i]*(o!=e.position[i]?1:-1))}else u[e.attributes[i]]=e.position[i]}.bind(this);if(d("x"),d("y"),this.pointer&&"target"==e.pointTo&&"number"!=t.type(e.position.x)&&"number"!=t.type(e.position.y)&&(y=0,"center"===this.pointer.align?"center"!=e.position[this._getOpp(e.outside)]&&(y+=n[this._getOpp(e.outside)]/2):"center"===e.position[this._getOpp(e.outside)]?y+=(n[this._getOpp(e.outside)]/2-this.pointer.dimensions[this._getOpp(e.outside)]/2)*(this.pointer.align==this._getTL(this.pointer.align)?1:-1):y+=this.pointer.align!=e.position[this._getOpp(e.outside)]?n[this._getOpp(e.outside)]*(-1!==t.inArray(this.pointer.align,["top","left"])?1:-1)+this.pointer.dimensions[this._getOpp(e.outside)]/2*(-1!==t.inArray(this.pointer.align,["top","left"])?-1:1):this.pointer.dimensions[this._getOpp(e.outside)]/2*(-1!==t.inArray(this.pointer.align,["top","left"])?1:-1),y*=e.position[this._getOpp(e.outside)]==this.pointer.alignAttribute?-1:1,y+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1),u[this._getTL(this._getOpp(this.pointer.xy))]+=y),u[e.attributes.x]+=e.offset.x,u[e.attributes.y]+=e.offset.y,this.wrapper.css(u),e.adjustPosition){this.positionAdjusted&&(this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin),this.positionAdjusted=!1,this.flipped=!1);var h=i.top>u.top-(e.adjustDistance.top||0),p=i.right<u.left+n.x+(e.adjustDistance.right||0),f=i.bottom<u.top+n.y+(e.adjustDistance.bottom||0),g=i.left>u.left-(e.adjustDistance.left||0),m=h?"top":f?"bottom":null;if((o=g?"left":p?"right":null)||m){if(("Modal"==this.type||"Confirm"==this.type)&&"number"==t.type(this.options.position.x)&&"number"==t.type(this.options.position.y)){var v=0,y=0;return this.options.holdPosition&&(g?v=i.left-(u.left-(e.adjustDistance.left||0)):p&&(v=i.right-(u.left+n.x+(e.adjustDistance.right||0))),h?y=i.top-(u.top-(e.adjustDistance.top||0)):f&&(y=i.bottom-(u.top+n.y+(e.adjustDistance.bottom||0))),this.options.position.x=Math.max(i.top,this.options.position.x+v),this.options.position.y=Math.max(i.left,this.options.position.y+y),d("x"),d("y"),this.wrapper.css(u)),this._fireEvent("onPosition"),this}!0!==e.adjustPosition&&"flip"!==e.adjustPosition||(b=function(t){this.wrapper.css(this._getTL(t),u[this._getTL(t)]+(n[this._getXY(t)]+e.offset[this._getXY(t)]*("top"==t||"left"==t?-2:2)+r[this._getXY(t)])*("top"==t||"left"==t?1:-1)),this.pointer&&this.wrapper.removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).css("padding",0).css("padding-"+t,this.pointer.dimensions[this._getXY(t)]),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+t),this.positionAdjusted=!0,this.flipped=!0}.bind(this),c.x&&b(this.options.position.x),c.y&&b(this.options.position.y));var b="x"==this._getXY(this.outside)?m:o;this.pointer&&"target"==e.pointTo&&"flip"!=e.adjustPosition&&this._getXY(b)==this._getOpp(this._getXY(this.outside))&&(m="center"==this.pointer.align?n[this._getXY(b)]/2-this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(b!=this._getTL(b)?-1:1):b==this.pointer.alignAttribute?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):n[this._getXY(b)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(b)],o=b==this._getTL(b)?i[this._getTL(b)]-u[this._getTL(b)]+e.adjustDistance[b]:-1*(i[this._getOpp(this._getTL(b))]-u[this._getTL(b)]-e.adjustDistance[b]-n[this._getXY(b)]),b==this._getOpp(this._getTL(b))&&u[this._getTL(b)]-o<i[this._getTL(b)]+e.adjustDistance[this._getTL(b)]&&(o-=i[this._getTL(b)]+e.adjustDistance[this._getTL(b)]-(u[this._getTL(b)]-o)),(o=Math.min(o,m))<=m&&0<o&&(this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-o*(b!=this.pointer.alignAttribute?-1:1)),this.wrapper.css(this._getTL(b),u[this._getTL(b)]+o*(b!=this._getTL(b)?-1:1)),this.positionAdjusted=!0))}}return this._fireEvent("onPosition"),this},(e.prototype.unscroll=function(t){if(this.set=function(t,e){window.unscrollStore||(window.unscrollStore={}),window.unscrollStore[t]=e},this.get=function(t){return window.unscrollStore?window.unscrollStore[t]:null},this.getScrollbarWidth=function(){if(this.get("scrollbarWidth"))return this.get("scrollbarWidth")+"px";var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-10000",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),this.set("scrollbarWidth",e),e+"px"},this.getElementsToAdjust=function(t){(t="string"==typeof(t=t||[])?[[t,"padding-right"]]:t).forEach((function(e,n){"string"==typeof e&&(t[n]=[e,"padding-right"])}));for(var e=!1,n=0;n<t.length;n++)-1!==t[n][0].indexOf("body")&&(e=!0);return!1===e&&t.push(["body","padding-right"]),t},this.pageHasScrollbar=function(){return this.getScrollbarWidth()&&document.body.offsetHeight>window.innerHeight},this.pageHasScrollbar()){t=this.getElementsToAdjust(t);for(var e=0;e<t.length;e++)for(var n=document.querySelectorAll(t[e][0]),i=0;i<n.length;i++){if(n[i].getAttribute("data-unscroll"))return;var o=t[e][1],r=window.getComputedStyle(n[i]).getPropertyValue(o);n[i].setAttribute("data-unscroll",o),n[i].style[o]="calc("+(r=r||"0px")+" "+("padding-right"==o||"right"==o?"+":"-")+" "+this.getScrollbarWidth()+")"}}var s,a;document.getElementById("unscroll-class-name")||(s=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css",a.setAttribute("id","unscroll-class-name"),a.appendChild(document.createTextNode(".unscrollable { overflow: hidden !important; }")),s.appendChild(a)),document.body.classList.add("unscrollable")}).reset=function(){for(var t=document.querySelectorAll("[data-unscroll]"),e=0;e<t.length;e++){var n=t[e].getAttribute("data-unscroll");t[e].style[n]=null,t[e].removeAttribute("data-unscroll")}document.body.classList.remove("unscrollable")},e.prototype.open=function(n){if(n=n||{},this.isDestroyed)return this;if(this.wrapper||this._create(),this._styles||(this._styles=t("<style/>").append(this._animationCSS).appendTo(t("head"))),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;this.options.closeOnEsc&&t(document).on("keyup.jBox-"+this.id,function(t){27==t.keyCode&&this.close({ignoreDelay:!0})}.bind(this)),!0!==this.options.closeOnClick&&"body"!==this.options.closeOnClick||(t("body").on("click.jBox-"+this.id+" tap.jBox-"+this.id,function(t){this.blockBodyClick||"body"==this.options.closeOnClick&&(t.target==this.wrapper[0]||this.wrapper.has(t.target).length)||this.close({ignoreDelay:!0})}.bind(this)),this.isTouchDevice&&t("body > *").on("click.jBox-"+this.id+" tap.jBox-"+this.id,(function(){return!0})));var i=function(){!0===this.adjustZIndexOnOpen&&(e.zIndexMax=Math.max(parseInt(this.wrapper.css("zIndex"),10),this.options.zIndex,e.zIndexMax||0,e.zIndexMaxDragover||0)+2,this.wrapper.css("zIndex",e.zIndexMax),this.options.zIndex=e.zIndexMax),this.source&&this.options.getTitle&&this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle),!0),this.source&&this.options.getContent&&(this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent"),!0):this.source.attr(this.options.getContent)?this.setContent(this.source.attr(this.options.getContent),!0):"html"==this.options.getContent&&this.setContent(this.source.html(),!0)),this._fireEvent("onOpen"),(this.options.ajax&&(this.options.ajax.url||this.source&&this.source.attr(this.options.ajax.getURL))&&(!this.ajaxLoaded||this.options.ajax.reload)||n.ajax&&(n.ajax.url||n.ajax.data))&&("strict"==this.options.ajax.reload||!this.source||!this.source.data("jBox-ajax-data")||n.ajax&&(n.ajax.url||n.ajax.data)?this.ajax(n.ajax||null,!0):this.setContent(this.source.data("jBox-ajax-data"))),this.positionedOnOpen&&!this.options.repositionOnOpen||!this.position(n)||(this.positionedOnOpen=!0),this.isClosing&&this._abortAnimation(),this.isOpen||(this.isOpen=!0,this.options.autoClose&&(this.options.delayClose=this.options.autoClose)&&this.close(),this._attachEvents(),this.options.blockScroll&&(this.options.blockScrollAdjust?e.blockScrollScopes?e.blockScrollScopes++:(e.blockScrollScopes=1,this.unscroll(Array.isArray(this.options.blockScrollAdjust)||"string"==typeof this.options.blockScrollAdjust?this.options.blockScrollAdjust:null)):t("body").addClass("jBox-blockScroll-"+this.id)),this.options.overlay&&(this._showOverlay(),this.position()),this.options.animation&&!this.isClosing&&this._animate("open"),this.options.audio&&this.options.audio.open&&this.audio(this.options.audio.open,this.options.volume.open),this.options.fade?this.wrapper.stop().animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.isOpening=!0,this.wrapper.css({display:"block"})}.bind(this),complete:function(){this._fireEvent("onOpenComplete")}.bind(this),always:function(){this.isOpening=!1,setTimeout(function(){this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=!1)}.bind(this),10)}.bind(this)}):(this.wrapper.css({display:"block",opacity:1}),this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=!1),this._fireEvent("onOpenComplete")))}.bind(this);return!this.options.delayOpen||this.isOpen||this.isClosing||n.ignoreDelay?i():this.timer=setTimeout(i,this.options.delayOpen),this},e.prototype.close=function(n){if(n=n||{},t("body").off("click.jBox-"+this.id+" tap.jBox-"+this.id),this.isTouchDevice&&t("body > *").off("click.jBox-"+this.id+" tap.jBox-"+this.id),this.isDestroyed||this.isClosing)return this;if(this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled)return this;var i,o,r,s=function(){var n;this._fireEvent("onClose"),this.options.cancelAjaxOnClose&&this.cancelAjax(),this.isOpen&&(this.isOpen=!1,this._detachEvents(),this.options.blockScroll&&(this.options.blockScrollAdjust?(e.blockScrollScopes=e.blockScrollScopes?--e.blockScrollScopes:0)||this.unscroll.reset():t("body").removeClass("jBox-blockScroll-"+this.id)),this.options.overlay&&this._hideOverlay(),this.options.animation&&!this.isOpening&&this._animate("close"),this.options.audio&&this.options.audio.close&&this.audio(this.options.audio.close,this.options.volume.close),(n=this.isTouchDevice&&"mouse"==this.options.target?0:this.options.fade)?this.wrapper.stop().animate({opacity:0},{queue:!1,duration:n,start:function(){this.isClosing=!0}.bind(this),complete:function(){this.wrapper.css({display:"none"}),this._fireEvent("onCloseComplete")}.bind(this),always:function(){this.isClosing=!1}.bind(this)}):(this.wrapper.css({display:"none",opacity:0}),this._fireEvent("onCloseComplete")))}.bind(this);return n.ignoreDelay||this.isTouchDevice&&"mouse"==this.options.target?s():(this.options.delayOnHover||this.options.showCountdown)&&10<this.options.delayClose?(o=(i=this).options.delayClose,r=Date.now(),this.options.showCountdown&&!this.inner&&(n=t('<div class="jBox-countdown" />'),this.inner=t('<div class="jBox-countdown-inner" />'),n.prepend(this.inner),t("#"+this.id).append(n)),this.countdown=function(){var t=Date.now();i.isHovered||(o-=t-r),r=t,0<o?(i.options.showCountdown&&i.inner.css("width",100*o/i.options.delayClose+"%"),window.requestAnimationFrame(i.countdown)):s()},window.requestAnimationFrame(this.countdown)):this.timer=setTimeout(s,Math.max(this.options.delayClose,10)),this},e.prototype.toggle=function(t){return this[this.isOpen?"close":"open"](t),this},e.prototype.disable=function(){return this.isDisabled=!0,this},e.prototype.enable=function(){return this.isDisabled=!1,this},e.prototype.hide=function(){return this.disable(),this.wrapper&&(this.cacheWrapperDisplay=this.wrapper.css("display"),this.wrapper.css({display:"none"})),this.overlay&&(this.cacheOverlayDisplay=this.overlay.css("display"),this.overlay.css({display:"none"})),this},e.prototype.show=function(){return this.enable(),this.wrapper&&this.cacheWrapperDisplay&&(this.wrapper.css({display:this.cacheWrapperDisplay}),this.cacheWrapperDisplay=null),this.overlay&&this.cacheOverlayDisplay&&(this.overlay.css({display:this.cacheOverlayDisplay}),this.cacheOverlayDisplay=null),this},e.prototype.ajax=function(e,n){e=e||{},t.each([["getData","data"],["getURL","url"]],function(t,n){this.options.ajax[n[0]]&&!e[n[1]]&&this.source&&null!=this.source.attr(this.options.ajax[n[0]])&&(e[n[1]]=this.source.attr(this.options.ajax[n[0]])||"")}.bind(this));var i=t.extend(!0,{},this.options.ajax);this.cancelAjax();var o=e.beforeSend||i.beforeSend||function(){},r=e.complete||i.complete||function(){},s=e.success||i.success||function(){},a=e.error||i.error||function(){},l=t.extend(!0,i,e);return l.beforeSend=function(e){l.loadingClass&&this.wrapper.addClass(!0===l.loadingClass?"jBox-loading":l.loadingClass),l.spinner&&(this.spinnerDelay=setTimeout(function(){this.wrapper.addClass("jBox-loading-spinner"),l.spinnerReposition&&(n?this.positionOnFadeComplete=!0:this.position()),this.spinner=t(!0!==l.spinner?l.spinner:'<div class="jBox-spinner"></div>').appendTo(this.container),this.titleContainer&&"absolute"==this.spinner.css("position")&&this.spinner.css({transform:"translateY("+.5*this.titleContainer.outerHeight()+"px)"})}.bind(this),""!=this.content.html()&&l.spinnerDelay||0)),o.bind(this)(e)}.bind(this),l.complete=function(t){this.spinnerDelay&&clearTimeout(this.spinnerDelay),this.wrapper.removeClass("jBox-loading jBox-loading-spinner jBox-loading-spinner-delay"),this.spinner&&this.spinner.length&&this.spinner.remove()&&l.spinnerReposition&&(n?this.positionOnFadeComplete=!0:this.position()),this.ajaxLoaded=!0,r.bind(this)(t)}.bind(this),l.success=function(t){l.setContent&&this.setContent(t,!0)&&(n?this.positionOnFadeComplete=!0:this.position()),l.setContent&&this.source&&this.source.data("jBox-ajax-data",t),s.bind(this)(t)}.bind(this),l.error=function(t){a.bind(this)(t)}.bind(this),this.ajaxRequest=t.ajax(l),this},e.prototype.cancelAjax=function(){this.ajaxRequest&&(this.ajaxRequest.abort(),this.ajaxLoaded=!1)},e.prototype.audio=function(n,i){if(!n)return this;var o;(e._audio=e._audio?e._audio:{})[n]||(o=t("<audio/>"),t("<source/>",{src:n+".mp3"}).appendTo(o),t("<source/>",{src:n+".ogg"}).appendTo(o),e._audio[n]=o[0]),e._audio[n].volume=Math.min((null!=i?i:100)/100,1);try{e._audio[n].pause(),e._audio[n].currentTime=0}catch(n){}return e._audio[n].play(),this},e._animationSpeeds={tada:1e3,tadaSmall:1e3,flash:500,shake:400,pulseUp:250,pulseDown:250,popIn:250,popOut:250,fadeIn:200,fadeOut:200,slideUp:400,slideRight:400,slideLeft:400,slideDown:400},e.prototype.animate=function(t,n){n=n||{},this.animationTimeout||(this.animationTimeout={}),n.element||(n.element=this.wrapper),n.element.data("jBox-animating-id")||n.element.data("jBox-animating-id",e._getUniqueElementID()),n.element.data("jBox-animating")&&(n.element.removeClass(n.element.data("jBox-animating")).data("jBox-animating",null),this.animationTimeout[n.element.data("jBox-animating-id")]&&clearTimeout(this.animationTimeout[n.element.data("jBox-animating-id")])),n.element.addClass("jBox-animated-"+t).data("jBox-animating","jBox-animated-"+t),this.animationTimeout[n.element.data("jBox-animating-id")]=setTimeout((function(){n.element.removeClass(n.element.data("jBox-animating")).data("jBox-animating",null),n.complete&&n.complete()}),e._animationSpeeds[t])},e.prototype.swipeDetector=function(e,n){var i=0,o=0,r=0,s=0,a=0;return n=t.extend({swipeThreshold:70,useOnlyTouch:!1},n),e.on("mousedown touchstart",(function(t){n.useOnlyTouch&&!t.originalEvent.touches||(t.originalEvent.touches&&(t=t.originalEvent.touches[0]),0===i&&(i=1,o=t.clientX,r=t.clientY))})),t("html").on("mouseup touchend",(function(o){2===i&&(i=0,Math.abs(s)>Math.abs(a)&&Math.abs(s)>n.swipeThreshold?s<0?e.trigger(t.Event("swipeLeft.sd")):e.trigger(t.Event("swipeRight.sd")):Math.abs(a)>n.swipeThreshold&&(a<0?e.trigger(t.Event("swipeUp.sd")):e.trigger(t.Event("swipeDown.sd"))))})),t("html").on("mousemove touchmove",(function(t){var e;1===i&&(e=(t=t.originalEvent.touches?t.originalEvent.touches[0]:t).clientX-o,t=t.clientY-r,(Math.abs(e)>n.swipeThreshold||Math.abs(t)>n.swipeThreshold)&&(i=2,s=e,a=t))})),e},e.prototype.destroy=function(){return this.detach(),this.isOpen&&this.close({ignoreDelay:!0}),this.wrapper&&this.wrapper.remove(),this.overlay&&this.overlay.remove(),this._styles&&this._styles.remove(),this.isDestroyed=!0,this},e._getUniqueID=(n=1,function(){return n++}),e._getUniqueElementID=(i=1,function(){return i++}),e._pluginOptions={},e.plugin=function(t,n){e._pluginOptions[t]=n},t.fn.jBox=function(n,i){return new e(n=n||{},t.extend(i=i||{},{attach:this}))},e}function jBoxConfirmWrapper(jBox,jQuery){new jBox.plugin("Confirm",{confirmButton:"Submit",cancelButton:"Cancel",confirm:null,cancel:null,closeOnConfirm:!0,target:window,fixed:!0,attach:"[data-confirm]",getContent:"data-confirm",content:"Do you really want to do this?",minWidth:360,maxWidth:500,blockScroll:!0,closeOnEsc:!0,closeOnClick:!1,closeButton:!1,overlay:!0,animation:"zoomIn",preventDefault:!0,_onAttach:function(t){var e;this.options.confirm||(e=t.attr("onclick")?t.attr("onclick"):t.attr("href")?t.attr("target")?'window.open("'+t.attr("href")+'", "'+t.attr("target")+'");':'window.location.href = "'+t.attr("href")+'";':"",t.prop("onclick",null).data("jBox-Confirm-submit",e))},_onCreated:function(){this.wrapper.addClass("jBox-Modal"),this.footer=jQuery('<div class="jBox-Confirm-footer"/>'),jQuery('<div class="jBox-Confirm-button jBox-Confirm-button-cancel"/>').html(this.options.cancelButton).on("click tap",function(){this.options.cancel&&this.options.cancel(this.source),this.close()}.bind(this)).appendTo(this.footer),this.submitButton=jQuery('<div class="jBox-Confirm-button jBox-Confirm-button-submit"/>').html(this.options.confirmButton).appendTo(this.footer),this.footer.appendTo(this.container)},_onOpen:function(){this.submitButton.off("click.jBox-Confirm"+this.id+" tap.jBox-Confirm"+this.id).on("click.jBox-Confirm"+this.id+" tap.jBox-Confirm"+this.id,function(){this.options.confirm?this.options.confirm(this.source):eval(this.source.data("jBox-Confirm-submit")),this.options.closeOnConfirm&&this.close()}.bind(this))}})}function jBoxImageWrapper(t,e){new t.plugin("Image",{src:"href",gallery:"data-jbox-image",imageLabel:"title",imageFade:360,imageSize:"contain",imageCounter:!1,imageCounterSeparator:"/",downloadButton:!1,downloadButtonText:null,downloadButtonUrl:null,mobileImageAttr:null,mobileImageBreakpoint:null,preloadFirstImage:!1,target:window,attach:"[data-jbox-image]",fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"button",closeButton:!0,overlay:!0,animation:"zoomIn",preventDefault:!0,width:"100%",height:"100%",adjustDistance:{top:40,right:0,bottom:40,left:0},_onInit:function(){this.images=this.currentImage={},this.imageZIndex=1,this.initImage=function(t){var n,i;(t=e(t)).data("jBox-image-gallery")||(n=t.attr(this.options.src),this.options.mobileImageAttr&&this.options.mobileImageBreakpoint&&t.attr(this.options.mobileImageAttr)&&e(window).width()<=this.options.mobileImageBreakpoint&&(n=t.attr(this.options.mobileImageAttr)),i=t.attr(this.options.gallery)||"default",this.images[i]||(this.images[i]=[]),this.images[i].push({src:n,label:t.attr(this.options.imageLabel)||"",downloadUrl:this.options.downloadButtonUrl&&t.attr(this.options.downloadButtonUrl)?t.attr(this.options.downloadButtonUrl):null}),"title"==this.options.imageLabel&&t.removeAttr("title"),t.data("jBox-image-gallery",i),t.data("jBox-image-id",this.images[i].length-1))}.bind(this),this.attachedElements&&this.attachedElements.length&&e.each(this.attachedElements,function(t,e){this.initImage(e)}.bind(this));var t=function(t,n,i,o){if(!e("#jBox-image-"+t+"-"+n).length){var r=e("<div/>",{id:"jBox-image-"+t+"-"+n,class:"jBox-image-container"+(i?" jBox-image-"+t+"-current":"")}).css({backgroundSize:this.options.imageSize,opacity:o?1:0,zIndex:i?this.imageZIndex++:0}).appendTo(this.content);return this.swipeDetector(r).on("swipeLeft.sd swipeRight.sd",function(t){"swipeLeft"===t.type?this.showImage("next"):"swipeRight"===t.type&&this.showImage("prev")}.bind(this)),e("<div/>",{id:"jBox-image-label-"+t+"-"+n,class:"jBox-image-label"+(i?" active":"")}).html(this.images[t][n].label).on("click tap",(function(){e(this).toggleClass("expanded")})).appendTo(this.imageLabelContainer),i&&r.animate({opacity:1},o?0:this.options.imageFade),r}}.bind(this);this.downloadImage=function(t){var e=document.createElement("a");e.href=t,e.setAttribute("download",t.substring(t.lastIndexOf("/")+1)),document.body.appendChild(e),e.click()};var n=function(n,i,o,r){var s=t(n,i,o,r);s.addClass("jBox-image-loading"),e('<img src="'+this.images[n][i].src+'" />').each(function(){var t=new Image;t.onload=function(){s.removeClass("jBox-image-loading"),s.css({backgroundImage:'url("'+this.images[n][i].src+'")'})}.bind(this),t.onerror=function(){s.removeClass("jBox-image-loading"),s.addClass("jBox-image-not-found")}.bind(this),t.src=this.images[n][i].src}.bind(this))}.bind(this);this.showImage=function(t){var i,o,r;if("open"!=t)i=this.currentImage.gallery,r=(r=this.currentImage.id+(+("prev"==t)?-1:1))>this.images[i].length-1?0:r<0?this.images[i].length-1:r;else{if(this.source)i=this.source.data("jBox-image-gallery"),r=this.source.data("jBox-image-id");else{if(!this.attachedElements||!this.attachedElements.length)return;i=e(this.attachedElements[0]).data("jBox-image-gallery"),r=e(this.attachedElements[0]).data("jBox-image-id")}this.images&&this.images[i]&&e(".jBox-image-pointer-prev, .jBox-image-pointer-next").css({display:1<this.images[i].length?"block":"none"})}e(".jBox-image-"+i+"-current").length&&e(".jBox-image-"+i+"-current").removeClass("jBox-image-"+i+"-current").animate({opacity:0},"open"==t?0:this.options.imageFade),this.currentImage={gallery:i,id:r},e("#jBox-image-"+i+"-"+r).length?e("#jBox-image-"+i+"-"+r).addClass("jBox-image-"+i+"-current").css({zIndex:this.imageZIndex++,opacity:0}).animate({opacity:1},"open"==t?0:this.options.imageFade):n(i,r,!0,"open"===t),o=i,t=r,e(".jBox-image-label.active").removeClass("active expanded"),e("#jBox-image-label-"+o+"-"+t).addClass("active"),this.imageCounter&&(this.images[i]&&1<this.images[i].length?(this.wrapper.addClass("jBox-image-has-counter"),this.imageCounter.find(".jBox-image-counter-all").html(this.images[i].length),this.imageCounter.find(".jBox-image-counter-current").html(r+1)):this.wrapper.removeClass("jBox-image-has-counter")),this.images[i]&&this.images[i].length-1&&(r=(r+=1)>this.images[i].length-1?0:r<0?this.images[i].length-1:r,e("#jBox-image-"+i+"-"+r).length||n(i,r,!1,!1))},this.options.preloadFirstImage&&e(window).on("load",function(){this.showImage("open")}.bind(this))},_onAttach:function(t){this.initImage&&this.initImage(t)},_onCreated:function(){this.imageLabelWrapper=e('<div class="jBox-image-label-wrapper"/>').appendTo(this.wrapper),this.imagePrevButton=e('<div class="jBox-image-pointer-prev"/>').on("click tap",function(){this.showImage("prev")}.bind(this)),this.imageNextButton=e('<div class="jBox-image-pointer-next"/>').on("click tap",function(){this.showImage("next")}.bind(this)),this.imageLabelContainer=e('<div class="jBox-image-label-container"/>'),this.imageLabelWrapper.append(this.imagePrevButton).append(this.imageLabelContainer).append(this.imageNextButton),this.options.downloadButton&&(this.downloadButton=e("<div/>",{class:"jBox-image-download-button-wrapper"}).appendTo(this.wrapper).append(this.options.downloadButtonText?e("<div/>",{class:"jBox-image-download-button-text"}).html(this.options.downloadButtonText):null).append(e("<div/>",{class:"jBox-image-download-button-icon"})).on("click tap",function(){var t;t=this.images[this.currentImage.gallery][this.currentImage.id].downloadUrl||this.wrapper.find(".jBox-image-"+this.currentImage.gallery+"-current")[0].style.backgroundImage.slice(4,-1).replace(/["']/g,""),this.downloadImage(t)}.bind(this))),this.options.imageCounter&&(this.imageCounter=e("<div/>",{class:"jBox-image-counter-container"}).insertAfter(this.imageLabelContainer),this.imageCounter.append(e("<span/>",{class:"jBox-image-counter-current"})).append(e("<span/>").html(this.options.imageCounterSeparator)).append(e("<span/>",{class:"jBox-image-counter-all"})))},_onOpen:function(){e(document).on("keyup.jBox-Image-"+this.id,function(t){37==t.keyCode&&this.showImage("prev"),39==t.keyCode&&this.showImage("next")}.bind(this)),this.showImage("open")},_onClose:function(){e(document).off("keyup.jBox-Image-"+this.id)},_onCloseComplete:function(){this.wrapper.find(".jBox-image-container").css("opacity",0)}})}function jBoxNoticeWrapper(t,e){new t.plugin("Notice",{color:null,stack:!0,stackSpacing:10,autoClose:6e3,attributes:{x:"right",y:"top"},position:{x:15,y:15},responsivePositions:{500:{x:5,y:5},768:{x:10,y:10}},target:window,fixed:!0,animation:"zoomIn",closeOnClick:"box",zIndex:12e3,_onInit:function(){this.defaultNoticePosition=e.extend({},this.options.position),this._adjustNoticePositon=function(){var t=e(window),n=t.width();t.height(),this.options.position=e.extend({},this.defaultNoticePosition),e.each(this.options.responsivePositions,function(t,e){if(n<=t)return this.options.position=e,!1}.bind(this)),this.options.adjustDistance={top:this.options.position.y,right:this.options.position.x,bottom:this.options.position.y,left:this.options.position.x}},this.options.content instanceof e&&(this.options.content=this.options.content.clone().attr("id","")),e(window).on("resize.responsivejBoxNotice-"+this.id,function(t){this.isOpen&&this._adjustNoticePositon()}.bind(this)),this.open()},_onCreated:function(){this.wrapper.addClass("jBox-Notice-color jBox-Notice-"+(this.options.color||"gray")),this.wrapper.data("jBox-Notice-position",this.options.attributes.x+"-"+this.options.attributes.y)},_onOpen:function(){this.options.stack||(this._adjustNoticePositon(),e.each(e(".jBox-Notice"),function(t,n){(n=e(n)).attr("id")!=this.id&&n.data("jBox-Notice-position")==this.options.attributes.x+"-"+this.options.attributes.y&&(this.options.stack||n.data("jBox").close({ignoreDelay:!0}))}.bind(this)))},_onPosition:function(){var t,n={};for(t in e.each(e(".jBox-Notice"),(function(t,i){var o=(i=e(i)).data("jBox-Notice-position");n[o]||(n[o]=[]),n[o].push(i)})),n){var i=t.split("-")[1];n[t].reverse();var o,r=0;for(o in n[t]){var s=e(n[t][o]);s.css("margin-"+i,r),r+=s.outerHeight()+this.options.stackSpacing}}},_onCloseComplete:function(){this.destroy(),this.options._onPosition.bind(this).call()}})}!function(t,e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(755)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return t.jBox=function(t){var e=jBoxWrapper(t);try{void 0!==jBoxConfirmWrapper&&jBoxConfirmWrapper&&jBoxConfirmWrapper(e,t)}catch(t){console.error(t)}try{void 0!==jBoxImageWrapper&&jBoxImageWrapper&&jBoxImageWrapper(e,t)}catch(t){console.error(t)}try{void 0!==jBoxNoticeWrapper&&jBoxNoticeWrapper&&jBoxNoticeWrapper(e,t)}catch(t){console.error(t)}return e}(e)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(this)},755:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,o){"use strict";var r=[],s=Object.getPrototypeOf,a=r.slice,l=r.flat?function(t){return r.flat.call(t)}:function(t){return r.concat.apply([],t)},c=r.push,u=r.indexOf,d={},h=d.toString,p=d.hasOwnProperty,f=p.toString,g=f.call(Object),m={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=i.document,_={type:!0,src:!0,nonce:!0,noModule:!0};function x(t,e,n){var i,o,r=(n=n||b).createElement("script");if(r.text=t,e)for(i in _)(o=e[i]||e.getAttribute&&e.getAttribute(i))&&r.setAttribute(i,o);n.head.appendChild(r).parentNode.removeChild(r)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[h.call(t)]||"object":typeof t}var S="3.6.0",E=function(t,e){return new E.fn.init(t,e)};function A(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!v(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}E.fn=E.prototype={jquery:S,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:r.sort,splice:r.splice},E.extend=E.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||v(s)||(s={}),a===l&&(s=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&s!==i&&(c&&i&&(E.isPlainObject(i)||(o=Array.isArray(i)))?(n=s[e],r=o&&!Array.isArray(n)?[]:o||E.isPlainObject(n)?n:{},o=!1,s[e]=E.extend(c,r,i)):void 0!==i&&(s[e]=i));return s},E.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==h.call(t)||(e=s(t))&&("function"!=typeof(n=p.call(e,"constructor")&&e.constructor)||f.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){x(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(A(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(A(Object(t))?E.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;i<n;i++)t[o++]=e[i];return t.length=o,t},grep:function(t,e,n){for(var i=[],o=0,r=t.length,s=!n;o<r;o++)!e(t[o],o)!==s&&i.push(t[o]);return i},map:function(t,e,n){var i,o,r=0,s=[];if(A(t))for(i=t.length;r<i;r++)null!=(o=e(t[r],r,n))&&s.push(o);else for(r in t)null!=(o=e(t[r],r,n))&&s.push(o);return l(s)},guid:1,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=r[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var T=function(t){var e,n,i,o,r,s,a,l,c,u,d,h,p,f,g,m,v,y,b,_="sizzle"+1*new Date,x=t.document,w=0,S=0,E=lt(),A=lt(),T=lt(),k=lt(),C=function(t,e){return t===e&&(d=!0),0},D={}.hasOwnProperty,N=[],M=N.pop,j=N.push,I=N.push,L=N.slice,O=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="[\\x20\\t\\r\\n\\f]",z="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\[[\\x20\\t\\r\\n\\f]*("+z+")(?:"+P+"*([*^$|!~]?=)"+P+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+P+"*\\]",R=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",H=new RegExp(P+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),V=new RegExp(P+"|>"),Y=new RegExp(R),F=new RegExp("^"+z+"$"),K={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){h()},st=_t((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{I.apply(N=L.call(x.childNodes),x.childNodes),N[x.childNodes.length].nodeType}catch(t){I={apply:N.length?function(t,e){j.apply(t,L.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function at(t,e,i,o){var r,a,c,u,d,f,v,y=e&&e.ownerDocument,x=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==x&&9!==x&&11!==x)return i;if(!o&&(h(e),e=e||p,g)){if(11!==x&&(d=J.exec(t)))if(r=d[1]){if(9===x){if(!(c=e.getElementById(r)))return i;if(c.id===r)return i.push(c),i}else if(y&&(c=y.getElementById(r))&&b(e,c)&&c.id===r)return i.push(c),i}else{if(d[2])return I.apply(i,e.getElementsByTagName(t)),i;if((r=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return I.apply(i,e.getElementsByClassName(r)),i}if(n.qsa&&!k[t+" "]&&(!m||!m.test(t))&&(1!==x||"object"!==e.nodeName.toLowerCase())){if(v=t,y=e,1===x&&(V.test(t)||W.test(t))){for((y=tt.test(t)&&vt(e.parentNode)||e)===e&&n.scope||((u=e.getAttribute("id"))?u=u.replace(it,ot):e.setAttribute("id",u=_)),a=(f=s(t)).length;a--;)f[a]=(u?"#"+u:":scope")+" "+bt(f[a]);v=f.join(",")}try{return I.apply(i,y.querySelectorAll(v)),i}catch(e){k(t,!0)}finally{u===_&&e.removeAttribute("id")}}}return l(t.replace(U,"$1"),e,i,o)}function lt(){var t=[];return function e(n,o){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function ct(t){return t[_]=!0,t}function ut(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),o=n.length;o--;)i.attrHandle[n[o]]=e}function ht(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function mt(t){return ct((function(e){return e=+e,ct((function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))}))}))}function vt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=at.support={},r=at.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!X.test(e||n&&n.nodeName||"HTML")},h=at.setDocument=function(t){var e,o,s=t?t.ownerDocument||t:x;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!r(p),x!=p&&(o=p.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),n.scope=ut((function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Z.test(p.getElementsByClassName),n.getById=ut((function(t){return f.appendChild(t).id=_,!p.getElementsByName||!p.getElementsByName(_).length})),n.getById?(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,i,o,r=e.getElementById(t);if(r){if((n=r.getAttributeNode("id"))&&n.value===t)return[r];for(o=e.getElementsByName(t),i=0;r=o[i++];)if((n=r.getAttributeNode("id"))&&n.value===t)return[r]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},v=[],m=[],(n.qsa=Z.test(p.querySelectorAll))&&(ut((function(t){var e;f.appendChild(t).innerHTML="<a id='"+_+"'></a><select id='"+_+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+B+")"),t.querySelectorAll("[id~="+_+"-]").length||m.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+_+"+*").length||m.push(".#.+[+~]"),t.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Z.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),v.push("!=",R)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),e=Z.test(f.compareDocumentPosition),b=e||Z.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return d=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t==p||t.ownerDocument==x&&b(x,t)?-1:e==p||e.ownerDocument==x&&b(x,e)?1:u?O(u,t)-O(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r)return t==p?-1:e==p?1:o?-1:r?1:u?O(u,t)-O(u,e):0;if(o===r)return ht(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[i]===a[i];)i++;return i?ht(s[i],a[i]):s[i]==x?-1:a[i]==x?1:0},p):p},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if(h(t),n.matchesSelector&&g&&!k[e+" "]&&(!v||!v.test(e))&&(!m||!m.test(e)))try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){k(e,!0)}return at(e,p,null,[t]).length>0},at.contains=function(t,e){return(t.ownerDocument||t)!=p&&h(t),b(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!=p&&h(t);var o=i.attrHandle[e.toLowerCase()],r=o&&D.call(i.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==r?r:n.attributes||!g?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(it,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,i=[],o=0,r=0;if(d=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(C),d){for(;e=t[r++];)e===t[r]&&(o=i.push(r));for(;o--;)t.splice(i[o],1)}return u=null,t},o=at.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=o(e);return n},i=at.selectors={cacheLength:50,createPseudo:ct,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Y.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=E[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+P+"|$)"))&&E(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var o=at.attr(i,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var c,u,d,h,p,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=!1;if(m){if(r){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(p=(c=(u=(d=(h=m)[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===w&&c[1])&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(b=p=0)||f.pop();)if(1===h.nodeType&&++b&&h===e){u[t]=[w,p,b];break}}else if(y&&(b=p=(c=(u=(d=(h=e)[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]||[])[0]===w&&c[1]),!1===b)for(;(h=++p&&h&&h[g]||(b=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++b||(y&&((u=(d=h[_]||(h[_]={}))[h.uniqueID]||(d[h.uniqueID]={}))[t]=[w,b]),h!==e)););return(b-=o)===i||b%i==0&&b/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return o[_]?o(e):o.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ct((function(t,n){for(var i,r=o(t,e),s=r.length;s--;)t[i=O(t,r[s])]=!(n[i]=r[s])})):function(t){return o(t,0,n)}):o}},pseudos:{not:ct((function(t){var e=[],n=[],i=a(t.replace(U,"$1"));return i[_]?ct((function(t,e,n,o){for(var r,s=i(t,null,o,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))})):function(t,o,r){return e[0]=t,i(e,null,r,n),e[0]=null,!n.pop()}})),has:ct((function(t){return function(e){return at(t,e).length>0}})),contains:ct((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||o(e)).indexOf(t)>-1}})),lang:ct((function(t){return F.test(t||"")||at.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:mt((function(){return[0]})),last:mt((function(t,e){return[e-1]})),eq:mt((function(t,e,n){return[n<0?n+e:n]})),even:mt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:mt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:mt((function(t,e,n){for(var i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:mt((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function yt(){}function bt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function _t(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&"parentNode"===r,a=S++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,l){var c,u,d,h=[w,a];if(l){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(u=(d=e[_]||(e[_]={}))[e.uniqueID]||(d[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[i]||e;else{if((c=u[r])&&c[0]===w&&c[1]===a)return h[2]=c[2];if(u[r]=h,h[2]=t(e,n,l))return!0}return!1}}function xt(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function wt(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(n&&!n(r,i,o)||(s.push(r),c&&e.push(a)));return s}function St(t,e,n,i,o,r){return i&&!i[_]&&(i=St(i)),o&&!o[_]&&(o=St(o,r)),ct((function(r,s,a,l){var c,u,d,h=[],p=[],f=s.length,g=r||function(t,e,n){for(var i=0,o=e.length;i<o;i++)at(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!r&&e?g:wt(g,h,t,a,l),v=n?o||(r?t:f||i)?[]:s:m;if(n&&n(m,v,a,l),i)for(c=wt(v,p),i(c,[],a,l),u=c.length;u--;)(d=c[u])&&(v[p[u]]=!(m[p[u]]=d));if(r){if(o||t){if(o){for(c=[],u=v.length;u--;)(d=v[u])&&c.push(m[u]=d);o(null,v=[],c,l)}for(u=v.length;u--;)(d=v[u])&&(c=o?O(r,d):h[u])>-1&&(r[c]=!(s[c]=d))}}else v=wt(v===s?v.splice(f,v.length):v),o?o(null,s,v,l):I.apply(s,v)}))}function Et(t){for(var e,n,o,r=t.length,s=i.relative[t[0].type],a=s||i.relative[" "],l=s?1:0,u=_t((function(t){return t===e}),a,!0),d=_t((function(t){return O(e,t)>-1}),a,!0),h=[function(t,n,i){var o=!s&&(i||n!==c)||((e=n).nodeType?u(t,n,i):d(t,n,i));return e=null,o}];l<r;l++)if(n=i.relative[t[l].type])h=[_t(xt(h),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[_]){for(o=++l;o<r&&!i.relative[t[o].type];o++);return St(l>1&&xt(h),l>1&&bt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(U,"$1"),n,l<o&&Et(t.slice(l,o)),o<r&&Et(t=t.slice(o)),o<r&&bt(t))}h.push(n)}return xt(h)}return yt.prototype=i.filters=i.pseudos,i.setFilters=new yt,s=at.tokenize=function(t,e){var n,o,r,s,a,l,c,u=A[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=i.preFilter;a;){for(s in n&&!(o=q.exec(a))||(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),n=!1,(o=W.exec(a))&&(n=o.shift(),r.push({value:n,type:o[0].replace(U," ")}),a=a.slice(n.length)),i.filter)!(o=K[s].exec(a))||c[s]&&!(o=c[s](o))||(n=o.shift(),r.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return e?a.length:a?at.error(t):A(t,l).slice(0)},a=at.compile=function(t,e){var n,o=[],r=[],a=T[t+" "];if(!a){for(e||(e=s(t)),n=e.length;n--;)(a=Et(e[n]))[_]?o.push(a):r.push(a);a=T(t,function(t,e){var n=e.length>0,o=t.length>0,r=function(r,s,a,l,u){var d,f,m,v=0,y="0",b=r&&[],_=[],x=c,S=r||o&&i.find.TAG("*",u),E=w+=null==x?1:Math.random()||.1,A=S.length;for(u&&(c=s==p||s||u);y!==A&&null!=(d=S[y]);y++){if(o&&d){for(f=0,s||d.ownerDocument==p||(h(d),a=!g);m=t[f++];)if(m(d,s||p,a)){l.push(d);break}u&&(w=E)}n&&((d=!m&&d)&&v--,r&&b.push(d))}if(v+=y,n&&y!==v){for(f=0;m=e[f++];)m(b,_,s,a);if(r){if(v>0)for(;y--;)b[y]||_[y]||(_[y]=M.call(l));_=wt(_)}I.apply(l,_),u&&!r&&_.length>0&&v+e.length>1&&at.uniqueSort(l)}return u&&(w=E,c=x),b};return n?ct(r):r}(r,o)),a.selector=t}return a},l=at.select=function(t,e,n,o){var r,l,c,u,d,h="function"==typeof t&&t,p=!o&&s(t=h.selector||t);if(n=n||[],1===p.length){if((l=p[0]=p[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&g&&i.relative[l[1].type]){if(!(e=(i.find.ID(c.matches[0].replace(et,nt),e)||[])[0]))return n;h&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=K.needsContext.test(t)?0:l.length;r--&&(c=l[r],!i.relative[u=c.type]);)if((d=i.find[u])&&(o=d(c.matches[0].replace(et,nt),tt.test(l[0].type)&&vt(e.parentNode)||e))){if(l.splice(r,1),!(t=o.length&&bt(l)))return I.apply(n,o),n;break}}return(h||a(t,p))(o,e,!g,n,!e||tt.test(t)&&vt(e.parentNode)||e),n},n.sortStable=_.split("").sort(C).join("")===_,n.detectDuplicates=!!d,h(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||dt(B,(function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null})),at}(i);E.find=T,E.expr=T.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=T.uniqueSort,E.text=T.getText,E.isXMLDoc=T.isXML,E.contains=T.contains,E.escapeSelector=T.escape;var k=function(t,e,n){for(var i=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&E(t).is(n))break;i.push(t)}return i},C=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},D=E.expr.match.needsContext;function N(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(t,e,n){return v(e)?E.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return u.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,i=this.length,o=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<i;e++)if(E.contains(o[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,o[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(j(this,t||[],!1))},not:function(t){return this.pushStack(j(this,t||[],!0))},is:function(t){return!!j(this,"string"==typeof t&&D.test(t)?E(t):t||[],!1).length}});var I,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,o;if(!t)return this;if(n=n||I,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),M.test(i[1])&&E.isPlainObject(e))for(i in e)v(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(o=b.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,I=E(b);var O=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function P(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,o=this.length,r=[],s="string"!=typeof t&&E(t);if(!D.test(t))for(;i<o;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?E.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?u.call(E(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,n){return k(t,"parentNode",n)},next:function(t){return P(t,"nextSibling")},prev:function(t){return P(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,n){return k(t,"nextSibling",n)},prevUntil:function(t,e,n){return k(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(N(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,i){var o=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=E.filter(i,o)),this.length>1&&(B[t]||E.uniqueSort(o),O.test(t)&&o.reverse()),this.pushStack(o)}}));var z=/[^\x20\t\r\n\f]+/g;function $(t){return t}function R(t){throw t}function H(t,e,n,i){var o;try{t&&v(o=t.promise)?o.call(t).done(e).fail(n):t&&v(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(z)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,i,o,r=[],s=[],a=-1,l=function(){for(o=o||t.once,i=e=!0;s.length;a=-1)for(n=s.shift();++a<r.length;)!1===r[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=r.length,n=!1);t.memory||(n=!1),e=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!e&&(a=r.length-1,s.push(n)),function e(n){E.each(n,(function(n,i){v(i)?t.unique&&c.has(i)||r.push(i):i&&i.length&&"string"!==w(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,r,n))>-1;)r.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=s=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=s=[],n||e||(r=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,i){var o=v(t[i[4]])&&t[i[4]];r[i[1]]((function(){var t=o&&o.apply(this,arguments);t&&v(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,o){var r=0;function s(t,e,n,o){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(t<r)){if((i=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?o?c.call(i,s(r,e,$,o),s(r,e,R,o)):(r++,c.call(i,s(r,e,$,o),s(r,e,R,o),s(r,e,$,e.notifyWith))):(n!==$&&(a=void 0,l=[i]),(o||e.resolveWith)(a,l))}},u=o?c:function(){try{c()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,u.stackTrace),t+1>=r&&(n!==R&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?u():(E.Deferred.getStackHook&&(u.stackTrace=E.Deferred.getStackHook()),i.setTimeout(u))}}return E.Deferred((function(i){e[0][3].add(s(0,i,v(o)?o:$,i.notifyWith)),e[1][3].add(s(0,i,v(t)?t:$)),e[2][3].add(s(0,i,v(n)?n:R))})).promise()},promise:function(t){return null!=t?E.extend(t,o):o}},r={};return E.each(e,(function(t,i){var s=i[2],a=i[5];o[i[1]]=s.add,a&&s.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=s.fireWith})),o.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=a.call(arguments),r=E.Deferred(),s=function(t){return function(n){i[t]=this,o[t]=arguments.length>1?a.call(arguments):n,--e||r.resolveWith(i,o)}};if(e<=1&&(H(t,r.done(s(n)).resolve,r.reject,!e),"pending"===r.state()||v(o[n]&&o[n].then)))return r.then();for(;n--;)H(o[n],s(n),r.reject);return r.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&U.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout((function(){throw t}))};var q=E.Deferred();function W(){b.removeEventListener("DOMContentLoaded",W),i.removeEventListener("load",W),E.ready()}E.fn.ready=function(t){return q.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||q.resolveWith(b,[E]))}}),E.ready.then=q.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(E.ready):(b.addEventListener("DOMContentLoaded",W),i.addEventListener("load",W));var V=function(t,e,n,i,o,r,s){var a=0,l=t.length,c=null==n;if("object"===w(n))for(a in o=!0,n)V(t,e,a,n[a],!0,r,s);else if(void 0!==i&&(o=!0,v(i)||(s=!0),c&&(s?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(E(t),n)})),e))for(;a<l;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:c?e.call(t):l?e(t[0],n):r},Y=/^-ms-/,F=/-([a-z])/g;function K(t,e){return e.toUpperCase()}function X(t){return t.replace(Y,"ms-").replace(F,K)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=E.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,o=this.cache(t);if("string"==typeof e)o[X(e)]=n;else for(i in e)o[X(i)]=e[i];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][X(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(X):(e=X(e))in i?[e]:e.match(z)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var Z=new Q,J=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}J.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return J.hasData(t)||Z.hasData(t)},data:function(t,e,n){return J.access(t,e,n)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,n){return Z.access(t,e,n)},_removeData:function(t,e){Z.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=J.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=X(i.slice(5)),nt(r,i,o[i]));Z.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof t?this.each((function(){J.set(this,t)})):V(this,(function(e){var n;if(r&&void 0===e)return void 0!==(n=J.get(r,t))||void 0!==(n=nt(r,t))?n:void 0;this.each((function(){J.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){J.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Z.get(t,e),n&&(!i||Array.isArray(n)?i=Z.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,o=n.shift(),r=E._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,(function(){E.dequeue(t,e)}),r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Z.get(t,n)||Z.access(t,n,{empty:E.Callbacks("once memory").add((function(){Z.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=E.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Z.get(r[s],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],st=b.documentElement,at=function(t){return E.contains(t.ownerDocument,t)},lt={composed:!0};st.getRootNode&&(at=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(lt)===t.ownerDocument});var ct=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&at(t)&&"none"===E.css(t,"display")};function ut(t,e,n,i){var o,r,s=20,a=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=a(),c=n&&n[3]||(E.cssNumber[e]?"":"px"),u=t.nodeType&&(E.cssNumber[e]||"px"!==c&&+l)&&ot.exec(E.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;s--;)E.style(t,e,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(s=0),u/=r;u*=2,E.style(t,e,u+c),n=n||[]}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}var dt={};function ht(t){var e,n=t.ownerDocument,i=t.nodeName,o=dt[i];return o||(e=n.body.appendChild(n.createElement(i)),o=E.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),dt[i]=o,o)}function pt(t,e){for(var n,i,o=[],r=0,s=t.length;r<s;r++)(i=t[r]).style&&(n=i.style.display,e?("none"===n&&(o[r]=Z.get(i,"display")||null,o[r]||(i.style.display="")),""===i.style.display&&ct(i)&&(o[r]=ht(i))):"none"!==n&&(o[r]="none",Z.set(i,"display",n)));for(r=0;r<s;r++)null!=o[r]&&(t[r].style.display=o[r]);return t}E.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ct(this)?E(this).show():E(this).hide()}))}});var ft,gt,mt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;ft=b.createDocumentFragment().appendChild(b.createElement("div")),(gt=b.createElement("input")).setAttribute("type","radio"),gt.setAttribute("checked","checked"),gt.setAttribute("name","t"),ft.appendChild(gt),m.checkClone=ft.cloneNode(!0).cloneNode(!0).lastChild.checked,ft.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!ft.cloneNode(!0).lastChild.defaultValue,ft.innerHTML="<option></option>",m.option=!!ft.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&N(t,e)?E.merge([t],n):n}function xt(t,e){for(var n=0,i=t.length;n<i;n++)Z.set(t[n],"globalEval",!e||Z.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,m.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var wt=/<|&#?\w+;/;function St(t,e,n,i,o){for(var r,s,a,l,c,u,d=e.createDocumentFragment(),h=[],p=0,f=t.length;p<f;p++)if((r=t[p])||0===r)if("object"===w(r))E.merge(h,r.nodeType?[r]:r);else if(wt.test(r)){for(s=s||d.appendChild(e.createElement("div")),a=(vt.exec(r)||["",""])[1].toLowerCase(),l=bt[a]||bt._default,s.innerHTML=l[1]+E.htmlPrefilter(r)+l[2],u=l[0];u--;)s=s.lastChild;E.merge(h,s.childNodes),(s=d.firstChild).textContent=""}else h.push(e.createTextNode(r));for(d.textContent="",p=0;r=h[p++];)if(i&&E.inArray(r,i)>-1)o&&o.push(r);else if(c=at(r),s=_t(d.appendChild(r),"script"),c&&xt(s),n)for(u=0;r=s[u++];)yt.test(r.type||"")&&n.push(r);return d}var Et=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function Tt(){return!1}function kt(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function Ct(t,e,n,i,o,r){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Ct(t,a,n,i,e[a],r);return t}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),!1===o)o=Tt;else if(!o)return t;return 1===r&&(s=o,o=function(t){return E().off(t),s.apply(this,arguments)},o.guid=s.guid||(s.guid=E.guid++)),t.each((function(){E.event.add(this,e,o,i,n)}))}function Dt(t,e,n){n?(Z.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var i,o,r=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(r.length)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),Z.set(this,e,r),i=n(this,e),this[e](),r!==(o=Z.get(this,e))||i?Z.set(this,e,!1):o={},r!==o)return t.stopImmediatePropagation(),t.preventDefault(),o&&o.value}else r.length&&(Z.set(this,e,{value:E.event.trigger(E.extend(r[0],E.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&E.event.add(t,e,At)}E.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,c,u,d,h,p,f,g,m=Z.get(t);if(G(t))for(n.handler&&(n=(r=n).handler,o=r.selector),o&&E.find.matchesSelector(st,o),n.guid||(n.guid=E.guid++),(l=m.events)||(l=m.events=Object.create(null)),(s=m.handle)||(s=m.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(z)||[""]).length;c--;)p=g=(a=Et.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p&&(d=E.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=E.event.special[p]||{},u=E.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&E.expr.match.needsContext.test(o),namespace:f.join(".")},r),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,i,f,s)||t.addEventListener&&t.addEventListener(p,s)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),E.event.global[p]=!0)},remove:function(t,e,n,i,o){var r,s,a,l,c,u,d,h,p,f,g,m=Z.hasData(t)&&Z.get(t);if(m&&(l=m.events)){for(c=(e=(e||"").match(z)||[""]).length;c--;)if(p=g=(a=Et.exec(e[c])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=E.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=r=h.length;r--;)u=h[r],!o&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(r,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(t,u));s&&!h.length&&(d.teardown&&!1!==d.teardown.call(t,f,m.handle)||E.removeEvent(t,p,m.handle),delete l[p])}else for(p in l)E.event.remove(t,p+e[c],n,i,!0);E.isEmptyObject(l)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,n,i,o,r,s,a=new Array(arguments.length),l=E.event.fix(t),c=(Z.get(this,"events")||Object.create(null))[l.type]||[],u=E.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(s=E.event.handlers.call(this,l,c),e=0;(o=s[e++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,n=0;(r=o.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(i=((E.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,o,r,s,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],s={},n=0;n<l;n++)void 0===s[o=(i=e[n]).selector+" "]&&(s[o]=i.needsContext?E(o,this).index(c)>-1:E.find(o,this,null,[c]).length),s[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return mt.test(e.type)&&e.click&&N(e,"input")&&Dt(e,"click",At),!1},trigger:function(t){var e=this||t;return mt.test(e.type)&&e.click&&N(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return mt.test(e.type)&&e.click&&N(e,"input")&&Z.get(e,"click")||N(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:Tt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:Tt,isPropagationStopped:Tt,isImmediatePropagationStopped:Tt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){E.event.special[t]={setup:function(){return Dt(this,t,kt),!1},trigger:function(){return Dt(this,t),!0},_default:function(){return!0},delegateType:e}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return o&&(o===i||E.contains(i,o))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,i){return Ct(this,t,e,n,i)},one:function(t,e,n,i){return Ct(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Tt),this.each((function(){E.event.remove(this,t,n,e)}))}});var Nt=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function It(t,e){return N(t,"table")&&N(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ot(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,i,o,r,s,a;if(1===e.nodeType){if(Z.hasData(t)&&(a=Z.get(t).events))for(o in Z.remove(e,"handle events"),a)for(n=0,i=a[o].length;n<i;n++)E.event.add(e,o,a[o][n]);J.hasData(t)&&(r=J.access(t),s=E.extend({},r),J.set(e,s))}}function Pt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&mt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function zt(t,e,n,i){e=l(e);var o,r,s,a,c,u,d=0,h=t.length,p=h-1,f=e[0],g=v(f);if(g||h>1&&"string"==typeof f&&!m.checkClone&&Mt.test(f))return t.each((function(o){var r=t.eq(o);g&&(e[0]=f.call(this,o,r.html())),zt(r,e,n,i)}));if(h&&(r=(o=St(e,t[0].ownerDocument,!1,t,i)).firstChild,1===o.childNodes.length&&(o=r),r||i)){for(a=(s=E.map(_t(o,"script"),Lt)).length;d<h;d++)c=o,d!==p&&(c=E.clone(c,!0,!0),a&&E.merge(s,_t(c,"script"))),n.call(t[d],c,d);if(a)for(u=s[s.length-1].ownerDocument,E.map(s,Ot),d=0;d<a;d++)c=s[d],yt.test(c.type||"")&&!Z.access(c,"globalEval")&&E.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?E._evalUrl&&!c.noModule&&E._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):x(c.textContent.replace(jt,""),c,u))}return t}function $t(t,e,n){for(var i,o=e?E.filter(e,t):t,r=0;null!=(i=o[r]);r++)n||1!==i.nodeType||E.cleanData(_t(i)),i.parentNode&&(n&&at(i)&&xt(_t(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(!0),l=at(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(s=_t(a),i=0,o=(r=_t(t)).length;i<o;i++)Pt(r[i],s[i]);if(e)if(n)for(r=r||_t(t),s=s||_t(a),i=0,o=r.length;i<o;i++)Bt(r[i],s[i]);else Bt(t,a);return(s=_t(a,"script")).length>0&&xt(s,!l&&_t(t,"script")),a},cleanData:function(t){for(var e,n,i,o=E.event.special,r=0;void 0!==(n=t[r]);r++)if(G(n)){if(e=n[Z.expando]){if(e.events)for(i in e.events)o[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[Z.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),E.fn.extend({detach:function(t){return $t(this,t,!0)},remove:function(t){return $t(this,t)},text:function(t){return V(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return zt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||It(this,t).appendChild(t)}))},prepend:function(){return zt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=It(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return zt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return zt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return V(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Nt.test(t)&&!bt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return zt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(_t(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,i=[],o=E(t),r=o.length-1,s=0;s<=r;s++)n=s===r?this:this.clone(!0),E(o[s])[e](n),c.apply(i,n.get());return this.pushStack(i)}}));var Rt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Ht=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Ut=function(t,e,n){var i,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];for(o in i=n.call(t),e)t.style[o]=r[o];return i},qt=new RegExp(rt.join("|"),"i");function Wt(t,e,n){var i,o,r,s,a=t.style;return(n=n||Ht(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||at(t)||(s=E.style(t,e)),!m.pixelBoxStyles()&&Rt.test(s)&&qt.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0!==s?s+"":s}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",st.appendChild(c).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",s=36===e(t.right),o=36===e(t.width),u.style.position="absolute",r=12===e(u.offsetWidth/3),st.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var n,o,r,s,a,l,c=b.createElement("div"),u=b.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r},reliableTrDimensions:function(){var t,e,n,o;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",st.appendChild(t).appendChild(e).appendChild(n),o=i.getComputedStyle(e),a=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===e.offsetHeight,st.removeChild(t)),a}}))}();var Yt=["Webkit","Moz","ms"],Ft=b.createElement("div").style,Kt={};function Xt(t){return E.cssProps[t]||Kt[t]||(t in Ft?t:Kt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Yt.length;n--;)if((t=Yt[n]+e)in Ft)return t}(t)||t)}var Gt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Zt={position:"absolute",visibility:"hidden",display:"block"},Jt={letterSpacing:"0",fontWeight:"400"};function te(t,e,n){var i=ot.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function ee(t,e,n,i,o,r){var s="width"===e?1:0,a=0,l=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(l+=E.css(t,n+rt[s],!0,o)),i?("content"===n&&(l-=E.css(t,"padding"+rt[s],!0,o)),"margin"!==n&&(l-=E.css(t,"border"+rt[s]+"Width",!0,o))):(l+=E.css(t,"padding"+rt[s],!0,o),"padding"!==n?l+=E.css(t,"border"+rt[s]+"Width",!0,o):a+=E.css(t,"border"+rt[s]+"Width",!0,o));return!i&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))||0),l}function ne(t,e,n){var i=Ht(t),o=(!m.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),r=o,s=Wt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&N(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(o="border-box"===E.css(t,"boxSizing",!1,i),(r=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ee(t,e,n||(o?"border":"content"),r,i,s)+"px"}function ie(t,e,n,i,o){return new ie.prototype.init(t,e,n,i,o)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=X(e),l=Qt.test(e),c=t.style;if(l||(e=Xt(a)),s=E.cssHooks[e]||E.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:c[e];"string"==(r=typeof n)&&(o=ot.exec(n))&&o[1]&&(n=ut(t,e,o),r="number"),null!=n&&n==n&&("number"!==r||l||(n+=o&&o[3]||(E.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,i))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,i){var o,r,s,a=X(e);return Qt.test(e)||(e=Xt(a)),(s=E.cssHooks[e]||E.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=Wt(t,e,i)),"normal"===o&&e in Jt&&(o=Jt[e]),""===n||n?(r=parseFloat(o),!0===n||isFinite(r)?r||0:o):o}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!Gt.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ne(t,e,i):Ut(t,Zt,(function(){return ne(t,e,i)}))},set:function(t,n,i){var o,r=Ht(t),s=!m.scrollboxSize()&&"absolute"===r.position,a=(s||i)&&"border-box"===E.css(t,"boxSizing",!1,r),l=i?ee(t,e,i,a,r):0;return a&&s&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-ee(t,e,"border",!1,r)-.5)),l&&(o=ot.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),te(0,n,l)}}})),E.cssHooks.marginLeft=Vt(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];i<4;i++)o[t+rt[i]+e]=r[i]||r[i-2]||r[0];return o}},"margin"!==t&&(E.cssHooks[t+e].set=te)})),E.fn.extend({css:function(t,e){return V(this,(function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){for(i=Ht(t),o=e.length;s<o;s++)r[e[s]]=E.css(t,e[s],!1,i);return r}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(E.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[Xt(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ie.prototype.init,E.fx.step={};var oe,re,se=/^(?:toggle|show|hide)$/,ae=/queueHooks$/;function le(){re&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(le):i.setTimeout(le,E.fx.interval),E.fx.tick())}function ce(){return i.setTimeout((function(){oe=void 0})),oe=Date.now()}function ue(t,e){var n,i=0,o={height:t};for(e=e?1:0;i<4;i+=2-e)o["margin"+(n=rt[i])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function de(t,e,n){for(var i,o=(he.tweeners[e]||[]).concat(he.tweeners["*"]),r=0,s=o.length;r<s;r++)if(i=o[r].call(n,e,t))return i}function he(t,e,n){var i,o,r=0,s=he.prefilters.length,a=E.Deferred().always((function(){delete l.elem})),l=function(){if(o)return!1;for(var e=oe||ce(),n=Math.max(0,c.startTime+c.duration-e),i=1-(n/c.duration||0),r=0,s=c.tweens.length;r<s;r++)c.tweens[r].run(i);return a.notifyWith(t,[c,i,n]),i<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:oe||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(function(t,e){var n,i,o,r,s;for(n in t)if(o=e[i=X(n)],r=t[n],Array.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),(s=E.cssHooks[i])&&"expand"in s)for(n in r=s.expand(r),delete t[i],r)n in t||(t[n]=r[n],e[n]=o);else e[i]=o}(u,c.opts.specialEasing);r<s;r++)if(i=he.prefilters[r].call(c,t,u,c.opts))return v(i.stop)&&(E._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return E.map(u,de,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}E.Animation=E.extend(he,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,ot.exec(e),n),n}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(z);for(var n,i=0,o=t.length;i<o;i++)n=t[i],he.tweeners[n]=he.tweeners[n]||[],he.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,o,r,s,a,l,c,u,d="width"in e||"height"in e,h=this,p={},f=t.style,g=t.nodeType&&ct(t),m=Z.get(t,"fxshow");for(i in n.queue||(null==(s=E._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,h.always((function(){h.always((function(){s.unqueued--,E.queue(t,"fx").length||s.empty.fire()}))}))),e)if(o=e[i],se.test(o)){if(delete e[i],r=r||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[i])continue;g=!0}p[i]=m&&m[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(p))for(i in d&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=m&&m.display)&&(c=Z.get(t,"display")),"none"===(u=E.css(t,"display"))&&(c?u=c:(pt([t],!0),c=t.style.display||c,u=E.css(t,"display"),pt([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===E.css(t,"float")&&(l||(h.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Z.access(t,"fxshow",{display:c}),r&&(m.hidden=!g),g&&pt([t],!0),h.done((function(){for(i in g||pt([t]),Z.remove(t,"fxshow"),p)E.style(t,i,p[i])}))),l=de(g?m[i]:0,i,h),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?he.prefilters.unshift(t):he.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||v(t)&&t,duration:t,easing:n&&e||e&&!v(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){v(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(ct).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=E.isEmptyObject(t),r=E.speed(e,n,i),s=function(){var e=he(this,E.extend({},t),r);(o||Z.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===r.queue?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",r=E.timers,s=Z.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ae.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Z.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=E.timers,s=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,i,o)}})),E.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(oe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),oe=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){re||(re=!0,le())},E.fx.stop=function(){re=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var o=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(o)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var pe,fe=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return V(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?E.prop(t,e,n):(1===r&&E.isXMLDoc(t)||(o=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(i=o.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&N(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(z);if(o&&1===t.nodeType)for(;n=o[i++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=fe[e]||E.find.attr;fe[e]=function(t,e,i){var o,r,s=e.toLowerCase();return i||(r=fe[s],fe[s]=o,o=null!=n(t,e,i)?s:null,fe[s]=r),o}}));var ge=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ve(t){return(t.match(z)||[]).join(" ")}function ye(t){return t.getAttribute&&t.getAttribute("class")||""}function be(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(z)||[]}E.fn.extend({prop:function(t,e){return V(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&E.isXMLDoc(t)||(e=E.propFix[e]||e,o=E.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):ge.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,l=0;if(v(t))return this.each((function(e){E(this).addClass(t.call(this,e,ye(this)))}));if((e=be(t)).length)for(;n=this[l++];)if(o=ye(n),i=1===n.nodeType&&" "+ve(o)+" "){for(s=0;r=e[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o!==(a=ve(i))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,o,r,s,a,l=0;if(v(t))return this.each((function(e){E(this).removeClass(t.call(this,e,ye(this)))}));if(!arguments.length)return this.attr("class","");if((e=be(t)).length)for(;n=this[l++];)if(o=ye(n),i=1===n.nodeType&&" "+ve(o)+" "){for(s=0;r=e[s++];)for(;i.indexOf(" "+r+" ")>-1;)i=i.replace(" "+r+" "," ");o!==(a=ve(i))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):v(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,ye(this),e),e)})):this.each((function(){var e,o,r,s;if(i)for(o=0,r=E(this),s=be(t);e=s[o++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||((e=ye(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ve(ye(n))+" ").indexOf(e)>-1)return!0;return!1}});var _e=/\r/g;E.fn.extend({val:function(t){var e,n,i,o=this[0];return arguments.length?(i=v(t),this.each((function(n){var o;1===this.nodeType&&(null==(o=i?t.call(this,n,E(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=E.map(o,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=E.valHooks[o.type]||E.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(_e,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:ve(E.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,s="select-one"===t.type,a=s?null:[],l=s?r+1:o.length;for(i=r<0?l:s?r:0;i<l;i++)if(((n=o[i]).selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(e=E(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,i,o=t.options,r=E.makeArray(e),s=o.length;s--;)((i=o[s]).selected=E.inArray(E.valHooks.option.get(i),r)>-1)&&(n=!0);return n||(t.selectedIndex=-1),r}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},m.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),m.focusin="onfocusin"in i;var xe=/^(?:focusinfocus|focusoutblur)$/,we=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,o){var r,s,a,l,c,u,d,h,f=[n||b],g=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=h=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!xe.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),d=E.event.special[g]||{},o||!d.trigger||!1!==d.trigger.apply(n,e))){if(!o&&!d.noBubble&&!y(n)){for(l=d.delegateType||g,xe.test(l+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(n.ownerDocument||b)&&f.push(a.defaultView||a.parentWindow||i)}for(r=0;(s=f[r++])&&!t.isPropagationStopped();)h=s,t.type=r>1?l:d.bindType||g,(u=(Z.get(s,"events")||Object.create(null))[t.type]&&Z.get(s,"handle"))&&u.apply(s,e),(u=c&&s[c])&&u.apply&&G(s)&&(t.result=u.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!G(n)||c&&v(n[g])&&!y(n)&&((a=n[c])&&(n[c]=null),E.event.triggered=g,t.isPropagationStopped()&&h.addEventListener(g,we),n[g](),t.isPropagationStopped()&&h.removeEventListener(g,we),E.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}}),m.focusin||E.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){E.event.simulate(e,t.target,E.event.fix(t))};E.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,o=Z.access(i,e);o||i.addEventListener(t,n,!0),Z.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,o=Z.access(i,e)-1;o?Z.access(i,e,o):(i.removeEventListener(t,n,!0),Z.remove(i,e))}}}));var Se=i.location,Ee={guid:Date.now()},Ae=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Te=/\[\]$/,ke=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Ne(t,e,n,i){var o;if(Array.isArray(e))E.each(e,(function(e,o){n||Te.test(t)?i(t,o):Ne(t+"["+("object"==typeof o&&null!=o?e:"")+"]",o,n,i)}));else if(n||"object"!==w(e))i(t,e);else for(o in e)Ne(t+"["+o+"]",e[o],n,i)}E.param=function(t,e){var n,i=[],o=function(t,e){var n=v(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){o(this.name,this.value)}));else for(n in t)Ne(n,t[n],e,o);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&De.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!mt.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})):{name:e.name,value:n.replace(ke,"\r\n")}})).get()}});var Me=/%20/g,je=/#.*$/,Ie=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Oe=/^(?:GET|HEAD)$/,Be=/^\/\//,Pe={},ze={},$e="*/".concat("*"),Re=b.createElement("a");function He(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(z)||[];if(v(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ue(t,e,n,i){var o={},r=t===ze;function s(a){var l;return o[a]=!0,E.each(t[a]||[],(function(t,a){var c=a(e,n,i);return"string"!=typeof c||r||o[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)})),l}return s(e.dataTypes[0])||!o["*"]&&s("*")}function qe(t,e){var n,i,o=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}Re.href=Se.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Se.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Se.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?qe(qe(t,E.ajaxSettings),e):qe(E.ajaxSettings,t)},ajaxPrefilter:He(Pe),ajaxTransport:He(ze),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,r,s,a,l,c,u,d,h,p=E.ajaxSetup({},e),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?E(f):E.event,m=E.Deferred(),v=E.Callbacks("once memory"),y=p.statusCode||{},_={},x={},w="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Le.exec(r);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?r:null},setRequestHeader:function(t,e){return null==c&&(t=x[t.toLowerCase()]=x[t.toLowerCase()]||t,_[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),A(0,e),this}};if(m.promise(S),p.url=((t||p.url||Se.href)+"").replace(Be,Se.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(z)||[""],null==p.crossDomain){l=b.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Re.protocol+"//"+Re.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),Ue(Pe,p,e,S),c)return S;for(d in(u=E.event&&p.global)&&0==E.active++&&E.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Oe.test(p.type),o=p.url.replace(je,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Me,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(Ae.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Ie,"$1"),h=(Ae.test(o)?"&":"?")+"_="+Ee.guid+++h),p.url=o+h),p.ifModified&&(E.lastModified[o]&&S.setRequestHeader("If-Modified-Since",E.lastModified[o]),E.etag[o]&&S.setRequestHeader("If-None-Match",E.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+$e+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||c))return S.abort();if(w="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),n=Ue(ze,p,e,S)){if(S.readyState=1,u&&g.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(a=i.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,n.send(_,A)}catch(t){if(c)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,s,l){var d,h,b,_,x,w=e;c||(c=!0,a&&i.clearTimeout(a),n=void 0,r=l||"",S.readyState=t>0?4:0,d=t>=200&&t<300||304===t,s&&(_=function(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(o in a)if(a[o]&&a[o].test(i)){l.unshift(o);break}if(l[0]in n)r=l[0];else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}s||(s=o)}r=r||s}if(r)return r!==l[0]&&l.unshift(r),n[r]}(p,S,s)),!d&&E.inArray("script",p.dataTypes)>-1&&E.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),_=function(t,e,n,i){var o,r,s,a,l,c={},u=t.dataTypes.slice();if(u[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(r=u.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(s=c[l+" "+r]||c["* "+r]))for(o in c)if((a=o.split(" "))[1]===r&&(s=c[l+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[o]:!0!==c[o]&&(r=a[0],u.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,_,S,d),d?(p.ifModified&&((x=S.getResponseHeader("Last-Modified"))&&(E.lastModified[o]=x),(x=S.getResponseHeader("etag"))&&(E.etag[o]=x)),204===t||"HEAD"===p.type?w="nocontent":304===t?w="notmodified":(w=_.state,h=_.data,d=!(b=_.error))):(b=w,!t&&w||(w="error",t<0&&(t=0))),S.status=t,S.statusText=(e||w)+"",d?m.resolveWith(f,[h,w,S]):m.rejectWith(f,[S,w,b]),S.statusCode(y),y=void 0,u&&g.trigger(d?"ajaxSuccess":"ajaxError",[S,p,d?h:b]),v.fireWith(f,[S,w]),u&&(g.trigger("ajaxComplete",[S,p]),--E.active||E.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,i,o){return v(n)&&(o=o||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:o,data:n,success:i},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return v(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=v(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},Ve=E.ajaxSettings.xhr();m.cors=!!Ve&&"withCredentials"in Ve,m.ajax=Ve=!!Ve,E.ajaxTransport((function(t){var e,n;if(m.cors||Ve&&!t.crossDomain)return{send:function(o,r){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)a.setRequestHeader(s,o[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(We[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,o){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ye,Fe=[],Ke=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||E.expando+"_"+Ee.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var o,r,s,a=!1!==t.jsonp&&(Ke.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ke,"$1"+o):!1!==t.jsonp&&(t.url+=(Ae.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||E.error(o+" was not called"),s[0]},t.dataTypes[0]="json",r=i[o],i[o]=function(){s=arguments},n.always((function(){void 0===r?E(i).removeProp(o):i[o]=r,t[o]&&(t.jsonpCallback=e.jsonpCallback,Fe.push(o)),s&&v(r)&&r(s[0]),s=r=void 0})),"script"})),m.createHTMLDocument=((Ye=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ye.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((i=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(i)):e=b),r=!n&&[],(o=M.exec(t))?[e.createElement(o[1])]:(o=St([t],e,r),r&&r.length&&E(r).remove(),E.merge([],o.childNodes)));var i,o,r},E.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");return a>-1&&(i=ve(t.slice(a)),t=t.slice(0,a)),v(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&E.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done((function(t){r=arguments,s.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)})).always(n&&function(t,e){s.each((function(){n.apply(this,r||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,c=E.css(t,"position"),u=E(t),d={};"static"===c&&(t.style.position="relative"),a=u.offset(),r=E.css(t,"top"),l=E.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(s=(i=u.position()).top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),v(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):u.css(d)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],o={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((o=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),o.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-E.css(i,"marginTop",!0),left:e.left-o.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||st}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return V(this,(function(t,i,o){var r;if(y(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===o)return r?r[e]:t[i];r?r.scrollTo(n?r.pageXOffset:o,n?o:r.pageYOffset):t[i]=o}),t,i,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=Vt(m.pixelPosition,(function(t,n){if(n)return n=Wt(t,e),Rt.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){E.fn[i]=function(o,r){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===r?"margin":"border");return V(this,(function(e,n,o){var r;return y(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===o?E.css(e,n,a):E.style(e,n,o,a)}),e,s?o:void 0,s)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Xe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,i,o;if("string"==typeof e&&(n=t[e],e=t,t=n),v(t))return i=a.call(arguments,2),o=function(){return t.apply(e||this,i.concat(a.call(arguments)))},o.guid=t.guid=t.guid||E.guid++,o},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=N,E.isFunction=v,E.isWindow=y,E.camelCase=X,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(Xe,"")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var Ge=i.jQuery,Qe=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=Qe),t&&i.jQuery===E&&(i.jQuery=Ge),E},void 0===o&&(i.jQuery=i.$=E),E}))},846:t=>{t.exports=function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};e[s][0].call(c.exports,(function(t){return o(e[s][1][t]||t)}),c,c.exports,t,e,n,i)}return n[s].exports}for(var r=void 0,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return new function(t){if(this._event=t,this._data=t.data,this.receivedTime=t.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&t.data[0],this.channel=15&t.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 144:this.messageType="noteon",this.key=127&t.data[1],this.velocity=127&t.data[2];break;case 160:this.messageType="keypressure",this.key=127&t.data[1],this.pressure=127&t.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&t.data[1],this.controllerValue=127&t.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=t.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&t.data[1];break;case 224:this.messageType="pitchbendchange";var e=127&t.data[2],n=127&t.data[1];this.pitchBend=(e<<8)+n}}(t)},e.exports=n.default},{}]},{},[1])(1)},681:(t,e,n)=>{"use strict";function i(t,e){return Array(e+1).join(t)}function o(t){return"number"==typeof t}function r(t,e){return Math.pow(2,(t-69)/12)*(e||440)}n.r(e),n.d(e,{regex:()=>a,parse:()=>c,build:()=>u,midi:()=>d,freq:()=>h,letter:()=>p,acc:()=>f,pc:()=>g,step:()=>m,alt:()=>v,chroma:()=>y,oct:()=>b});var s=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function a(){return s}var l=[0,2,4,5,7,9,11];function c(t,e,n){if("string"!=typeof t)return null;var i=s.exec(t);if(!i||!e&&i[4])return null;var o={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var a=l[o.step]+o.alt;return o.chroma=a<0?12+a:a%12,i[3]&&(o.oct=+i[3],o.midi=a+12*(o.oct+1),o.freq=r(o.midi,n)),e&&(o.tonicOf=i[4]),o}function u(t,e,n){return null==t?null:t.step?u(t.step,t.alt,t.oct):t<0||t>6?null:"CDEFGAB".charAt(t)+(o(r=e)?r<0?i("b",-r):i("#",r):"")+function(t){return o(t)?""+t:""}(n);var r}function d(t){if((o(t)||"string"==typeof t)&&t>=0&&t<128)return+t;var e=c(t);return e&&function(t){return void 0!==t}(e.midi)?e.midi:null}function h(t,e){var n=d(t);return null===n?null:r(n,e)}function p(t){return(c(t)||{}).letter}function f(t){return(c(t)||{}).acc}function g(t){return(c(t)||{}).pc}function m(t){return(c(t)||{}).step}function v(t){return(c(t)||{}).alt}function y(t){return(c(t)||{}).chroma}function b(t){return(c(t)||{}).oct}},986:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){(function(e){t.exports=function(t,n){var i,o,r,s,a,l,c,u=e.window,d=u.document,h=d.documentElement,p=d.querySelector("body"),f=t.getContext("2d"),g=function(t){return"rgba(0,0,0,".concat(t/100,")")},m=Object.assign({viewport:null,styles:{"header,footer,section,article":g(8),"h1,a":g(10),"h2,h3,h4":g(8)},back:g(2),view:g(5),drag:g(10),interval:null},n),v=function(t,e,n,i){return n.split(/\s+/).forEach((function(n){return t[e](n,i)}))},y=function(t,e,n){return v(t,"addEventListener",e,n)},b=function(t,e,n){return v(t,"removeEventListener",e,n)},_=function(t,e,n,i){return{x:t,y:e,w:n,h:i}},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return _(t.x-e.x,t.y-e.y,t.w,t.h)},w=function(t){var e=t.getBoundingClientRect();return{x:e.left+u.pageXOffset,y:e.top+u.pageYOffset}},S=function(t){var e=w(t),n=e.x,i=e.y;return _(n+t.clientLeft,i+t.clientTop,t.clientWidth,t.clientHeight)},E=(i=t.clientWidth,o=t.clientHeight,function(t,e){return Math.min(i/t,o/e)}),A=m.viewport,T=!1,k=function(t,e){e&&(f.beginPath(),f.rect(t.x,t.y,t.w,t.h),f.fillStyle=e,f.fill())},C=function(){var e,n,i,o,l,c,p;r=A?(l=w(o=A),c=l.x,p=l.y,_(c+o.clientLeft-o.scrollLeft,p+o.clientTop-o.scrollTop,o.scrollWidth,o.scrollHeight)):_(0,0,h.scrollWidth,h.scrollHeight),s=A?S(A):_(u.pageXOffset,u.pageYOffset,h.clientWidth,h.clientHeight),a=E(r.w,r.h),e=r.w*a,n=r.h*a,t.width=e,t.height=n,t.style.width="".concat(e,"px"),t.style.height="".concat(n,"px"),f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,t.width,t.height),f.scale(a,a),k(x(r,r),m.back),i=m.styles,Object.keys(i).forEach((function(t){var e=i[t];(function(t){return Array.from((A||d).querySelectorAll(t))})(t).forEach((function(t){k(x(function(t){var e=w(t),n=e.x,i=e.y;return _(n,i,t.offsetWidth,t.offsetHeight)}(t),r),e)}))})),k(x(s,r),T?m.drag:m.view)},D=function(e){e.preventDefault();var n=S(t),i=(e.pageX-n.x)/a-s.w*l,o=(e.pageY-n.y)/a-s.h*c;A?(A.scrollLeft=i,A.scrollTop=o):u.scrollTo(i,o),C()},N=function e(n){T=!1,t.style.cursor="pointer",p.style.cursor="auto",b(u,"mousemove",D),b(u,"mouseup",e),D(n)};return t.style.cursor="pointer",y(t,"mousedown",(function(e){T=!0;var n=S(t),i=x(s,r);l=((e.pageX-n.x)/a-i.x)/i.w,c=((e.pageY-n.y)/a-i.y)/i.h,(l<0||l>1||c<0||c>1)&&(l=.5,c=.5),t.style.cursor="crosshair",p.style.cursor="crosshair",y(u,"mousemove",D),y(u,"mouseup",N),D(e)})),y(A||u,"load resize scroll",C),m.interval>0&&setInterval((function(){return C()}),m.interval),C(),{redraw:C}}}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])},t.exports=e()},316:t=>{function e(t,e){return function(n,i,o,r){t(n,i,o,r),e(n,i,o,r)}}t.exports=function(t){return t.on=function(n,i){if(1===arguments.length&&"function"==typeof n)return t.on("event",n);var o="on"+n,r=t[o];return t[o]=r?e(r,i):i,t},t}},272:(t,e,n)=>{"use strict";var i=n(451),o=n(316),r=n(861),s=n(41),a=n(549);function l(t,e,n){return a(s(r(o(i(t,e,n)))))}t.exports&&(t.exports=l),"undefined"!=typeof window&&(window.SamplePlayer=l)},549:(t,e,n)=>{var i=n(846);t.exports=function(t){return t.listenToMidi=function(e,n){var o={},r=n||{},s=r.gain||function(t){return t/127};return e.onmidimessage=function(e){var n=e.messageType?e:i(e);if("noteon"===n.messageType&&0===n.velocity&&(n.messageType="noteoff"),!r.channel||n.channel===r.channel)switch(n.messageType){case"noteon":o[n.key]=t.play(n.key,0,{gain:s(n.velocity)});break;case"noteoff":o[n.key]&&(o[n.key].stop(),delete o[n.key])}},t},t}},861:(t,e,n)=>{"use strict";var i=n(46),o=function(t){return function(t){return null!==t&&t!==[]&&t>=0&&t<129}(t)?+t:i.midi(t)};t.exports=function(t){if(t.buffers){var e=t.opts.map,n="function"==typeof e?e:o,i=function(t){return t?n(t)||t:null};t.buffers=function(t,e){return Object.keys(t).reduce((function(n,i){return n[e(i)]=t[i],n}),{})}(t.buffers,i);var r=t.start;t.start=function(t,e,n){var o=i(t),s=o%1;return s&&(o=Math.floor(o),n=Object.assign(n||{},{cents:Math.floor(100*s)})),r(o,e,n)}}return t}},451:(t,e,n)=>{"use strict";var i=n(729),o={},r={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function s(t){return"number"==typeof t}var a=["attack","decay","sustain","release"];t.exports=function(t,e,n){var l=!1,c=0,u={},d=t.createGain();d.gain.value=1;var h=Object.assign({},r,n),p={context:t,out:d,opts:h};return e instanceof AudioBuffer?p.buffer=e:p.buffers=e,p.start=function(e,n,i){if(p.buffer&&null!==e)return p.start(null,e,n);var r=e?p.buffers[e]:p.buffer;if(r){if(l){var s=i||o;n=Math.max(t.currentTime,n||0),p.emit("start",n,e,s);var a=f(e,r,s);return a.id=function(e,n){return n.id=c++,u[n.id]=n,n.source.onended=function(){var e=t.currentTime;n.source.disconnect(),n.env.disconnect(),n.disconnect(),p.emit("ended",e,n.id,n)},n.id}(0,a),a.env.start(n),a.source.start(n),p.emit("started",n,a.id,a),s.duration&&a.stop(n+s.duration),a}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+e+" not found.")},p.play=function(t,e,n){return p.start(t,e,n)},p.stop=function(t,e){var n;return(e=e||Object.keys(u)).map((function(e){return(n=u[e])?(n.stop(t),n.id):null}))},p.connect=function(t){return l=!0,d.connect(t),p},p.emit=function(t,e,n,i){p.onevent&&p.onevent(t,e,n,i);var o=p["on"+t];o&&o(e,n,i)},p;function f(e,n,o){var r,l=t.createGain();return l.gain.value=0,l.connect(d),l.env=function(t,e,n){var o=i(t),r=e.adsr||n.adsr;return a.forEach((function(t,i){o[t]=r?r[i]:e[t]||n[t]})),o.value.value=s(e.gain)?e.gain:s(n.gain)?n.gain:1,o}(t,o,h),l.env.connect(l.gain),l.source=t.createBufferSource(),l.source.buffer=n,l.source.connect(l),l.source.loop=o.loop||h.loop,l.source.playbackRate.value=(r=o.cents||h.cents)?Math.pow(2,r/1200):1,l.source.loopStart=o.loopStart||h.loopStart,l.source.loopEnd=o.loopEnd||h.loopEnd,l.stop=function(n){var i=n||t.currentTime;p.emit("stop",i,e);var o=l.env.stop(i);l.source.stop(o)},l}}},41:t=>{"use strict";var e=Array.isArray,n={};t.exports=function(t){return t.schedule=function(i,o){var r,s,a,l,c=t.context.currentTime,u=i<c?c:i;return t.emit("schedule",u,o),o.map((function(i){return i?(e(i)?(r=i[0],s=i[1]):(r=i.time,s=i),function(t){return t&&"object"==typeof t}(s)?(a=s.name||s.key||s.note||s.midi||null,l=s):(a=s,l=n),t.start(a,u+(r||0),l)):null}))},t}},46:t=>{"use strict";var e=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,n=[0,2,4,5,7,9,11];function i(t,i,r){if("string"!=typeof t)return null;var s=e.exec(t);if(!s||!i&&s[4])return null;var a={letter:s[1].toUpperCase(),acc:s[2].replace(/x/g,"##")};return a.pc=a.letter+a.acc,a.step=(a.letter.charCodeAt(0)+3)%7,a.alt="b"===a.acc[0]?-a.acc.length:a.acc.length,a.chroma=n[a.step]+a.alt,s[3]&&(a.oct=+s[3],a.midi=a.chroma+12*(a.oct+1),a.freq=o(a.midi,r)),i&&(a.tonicOf=s[4]),a}function o(t,e){return Math.pow(2,(t-69)/12)*(e||440)}var r={parse:i,regex:function(){return e},midiToFreq:o};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach((function(t){r[t]=function(e){var n=i(e);return n&&void 0!==n[t]?n[t]:null}})),t.exports=r},686:(t,e,n)=>{var i,o;i=[n(755)],void 0===(o=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;return e&&e.requirejs||(e?i=e:e={},function(t){var e,r,s,a,l={},c={},u={},d={},h=Object.prototype.hasOwnProperty,p=[].slice,f=/\.js$/;function g(t,e){return h.call(t,e)}function m(t,e){var n,i,o,r,s,a,l,c,d,h,p,g=e&&e.split("/"),m=u.map,v=m&&m["*"]||{};if(t){for(s=(t=t.split("/")).length-1,u.nodeIdCompat&&f.test(t[s])&&(t[s]=t[s].replace(f,"")),"."===t[0].charAt(0)&&g&&(t=g.slice(0,g.length-1).concat(t)),d=0;d<t.length;d++)if("."===(p=t[d]))t.splice(d,1),d-=1;else if(".."===p){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((g||v)&&m){for(d=(n=t.split("/")).length;d>0;d-=1){if(i=n.slice(0,d).join("/"),g)for(h=g.length;h>0;h-=1)if((o=m[g.slice(0,h).join("/")])&&(o=o[i])){r=o,a=d;break}if(r)break;!l&&v&&v[i]&&(l=v[i],c=d)}!r&&l&&(r=l,a=c),r&&(n.splice(0,a,r),t=n.join("/"))}return t}function v(e,n){return function(){var i=p.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),r.apply(t,i.concat([e,n]))}}function y(t){return function(e){l[t]=e}}function b(n){if(g(c,n)){var i=c[n];delete c[n],d[n]=!0,e.apply(t,i)}if(!g(l,n)&&!g(d,n))throw new Error("No "+n);return l[n]}function _(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function x(t){return t?_(t):[]}function w(t){return function(){return u&&u.config&&u.config[t]||{}}}s=function(t,e){var n,i,o=_(t),r=o[0],s=e[1];return t=o[1],r&&(n=b(r=m(r,s))),r?t=n&&n.normalize?n.normalize(t,(i=s,function(t){return m(t,i)})):m(t,s):(r=(o=_(t=m(t,s)))[0],t=o[1],r&&(n=b(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},a={require:function(t){return v(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:w(t)}}},e=function(e,n,i,o){var r,u,h,p,f,m,_,w=[],S=typeof i;if(m=x(o=o||e),"undefined"===S||"function"===S){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(u=(p=s(n[f],m)).f))w[f]=a.require(e);else if("exports"===u)w[f]=a.exports(e),_=!0;else if("module"===u)r=w[f]=a.module(e);else if(g(l,u)||g(c,u)||g(d,u))w[f]=b(u);else{if(!p.p)throw new Error(e+" missing "+u);p.p.load(p.n,v(o,!0),y(u),{}),w[f]=l[u]}h=i?i.apply(l[e],w):void 0,e&&(r&&r.exports!==t&&r.exports!==l[e]?l[e]=r.exports:h===t&&_||(l[e]=h))}else e&&(l[e]=i)},n=i=r=function(n,i,o,l,c){if("string"==typeof n)return a[n]?a[n](i):b(s(n,x(i)).f);if(!n.splice){if((u=n).deps&&r(u.deps,u.callback),!i)return;i.splice?(n=i,i=o,o=null):n=t}return i=i||function(){},"function"==typeof o&&(o=l,l=c),l?e(t,n,i,o):setTimeout((function(){e(t,n,i,o)}),4),r},r.config=function(t){return r(t)},n._defined=l,(o=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),g(l,t)||g(c,t)||(c[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=i,e.define=o),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e)"function"==typeof e[i]&&"constructor"!==i&&n.push(i);return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),o=n(t);function r(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,o=t.prototype.constructor;i>0&&(n.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}e.displayName=t.displayName,r.prototype=new function(){this.constructor=r};for(var s=0;s<o.length;s++){var a=o[s];r.prototype[a]=t.prototype[a]}for(var l=function(t){var n=function(){};t in r.prototype&&(n=r.prototype[t]);var i=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},c=0;c<i.length;c++){var u=i[c];r.prototype[u]=l(u)}return r};var i=function(){this.listeners={}};i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in i||(i[r]={}),o==n.length-1&&(i[r]=t[e]),i=i[r]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),o=n.style.overflowX,r=n.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var n=t.getAttribute("data-select2-id");return null!=n||(n=t.id?"select2-data-"+t.id:"select2-data-"+(++o).toString()+"-"+e.generateChars(4),t.setAttribute("data-select2-id",n)),n},e.StoreData=function(t,n,i){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][n]=i},e.GetData=function(n,i){var o=e.GetUniqueElementId(n);return i?e.__cache[o]&&null!=e.__cache[o][i]?e.__cache[o][i]:t(n).data(i):e.__cache[o]},e.RemoveData=function(t){var n=e.GetUniqueElementId(t);null!=e.__cache[n]&&delete e.__cache[n],t.removeAttribute("data-select2-id")},e.copyNonInternalCssClasses=function(t,e){var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter((function(t){return 0===t.indexOf("select2-")}));var i=e.getAttribute("class").trim().split(/\s+/);i=i.filter((function(t){return 0!==t.indexOf("select2-")}));var o=n.concat(i);t.setAttribute("class",o.join(" "))},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);i.append(n(o(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],o=this.option(i);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option--selectable"),e=t.filter(".select2-results__option--selected");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(i){var o=i.map((function(t){return t.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=t(this),i=e.GetData(this,"data"),r=""+i.id;null!=i.element&&i.element.selected||null==i.element&&o.indexOf(r)>-1?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.classList.add("select2-results__option"),i.classList.add("select2-results__option--selectable");var o={role:"option"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var s in(null!=n.element&&r.call(n.element,":disabled")||null==n.element&&n.disabled)&&(o["aria-disabled"]="true",i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--disabled")),null==n.id&&i.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--group")),o){var a=o[s];i.setAttribute(s,a)}if(n.children){var l=t(i),c=document.createElement("strong");c.className="select2-results__group",this.template(n,c);for(var u=[],d=0;d<n.children.length;d++){var h=n.children[d],p=this.option(h);u.push(p)}var f=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});f.append(u),l.append(c),l.append(f)}else this.template(n,i);return e.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this,r=n.id+"-results";this.$results.attr("id",r),n.on("results:all",(function(t){o.clear(),o.append(t.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),n.on("results:append",(function(t){o.append(t.data),n.isOpen()&&o.setClasses()})),n.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),n.on("select",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),n.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),n.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var n=e.GetData(t[0],"data");t.hasClass("select2-results__option--selected")?o.trigger("close",{}):o.trigger("select",{data:n})}})),n.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find(".select2-results__option--selectable"),n=e.index(t);if(!(n<=0)){var i=n-1;0===t.length&&(i=0);var r=e.eq(i);r.trigger("mouseenter");var s=o.$results.offset().top,a=r.offset().top,l=o.$results.scrollTop()+(a-s);0===i?o.$results.scrollTop(0):a-s<0&&o.$results.scrollTop(l)}})),n.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find(".select2-results__option--selectable"),n=e.index(t)+1;if(!(n>=e.length)){var i=e.eq(n);i.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),s=i.offset().top+i.outerHeight(!1),a=o.$results.scrollTop()+s-r;0===n?o.$results.scrollTop(0):s>r&&o.$results.scrollTop(a)}})),n.on("results:focus",(function(t){t.element[0].classList.add("select2-results__option--highlighted"),t.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-e+t.deltaY,i=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var i=t(this),r=e.GetData(this,"data");i.hasClass("select2-results__option--selected")?o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:r}):o.trigger("close",{}):o.trigger("select",{originalEvent:n,data:r})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var i=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),o.trigger("results:focus",{data:i,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find(".select2-results__option--selectable").index(t),n=this.$results.offset().top,i=t.offset().top,o=this.$results.scrollTop()+(i-n),r=i-n;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(e,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):t(n).append(r)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var n=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n,n},i.prototype.bind=function(t,e){var i=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i._handleBlur(t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.trigger("focus"),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex),i.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){i.$selection.attr("tabindex","-1"),i.$selection.attr("aria-disabled","true")}))},i.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(n){t(document.body).on("mousedown.select2."+n.id,(function(n){var i=t(n.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=i[0]&&e.GetData(this,"element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t[0].classList.add("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.attr("aria-controls",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i);var o=e.title||e.text;o?n.attr("title",o):n.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t[0].classList.add("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,o){var r=this;i.__super__.bind.apply(this,arguments);var s=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",s),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.isDisabled()){var i=t(this).parent(),o=n.GetData(i[0],"data");r.trigger("unselect",{originalEvent:e,data:o})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(t){r.isDisabled()||t.stopPropagation()}))},i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",o=0;o<t.length;o++){var r=t[o],s=this.selectionContainer(),a=this.display(r,s),l=i+n.generateChars(4)+"-";r.id?l+=r.id:l+=n.generateChars(4),s.find(".select2-selection__choice__display").append(a).attr("id",l);var c=r.title||r.text;c&&s.attr("title",c);var u=this.options.get("translations").get("removeItem"),d=s.find(".select2-selection__choice__remove");d.attr("title",u()),d.attr("aria-label",u()),d.attr("aria-describedby",l),n.StoreData(s[0],"data",r),e.push(s)}this.$selection.find(".select2-selection__rendered").append(e)}},i})),e.define("select2/selection/placeholder",[],(function(){function t(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();n.html(this.display(e)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");var i=e.title||e.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",i),n},t.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,n){function i(){}return i.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},i.prototype._handleClear=function(t,e){if(!this.isDisabled()){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();var o=n.GetData(i[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var s={data:o};if(this.trigger("clear",s),s.prevented)this.$element.val(r);else{for(var a=0;a<o.length;a++)if(s={data:o[a]},this.trigger("unselect",s),s.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},i.prototype.update=function(e,i){if(e.call(this,i),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var o=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),s=t('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');s.attr("title",r()),s.attr("aria-label",r()),s.attr("aria-describedby",o),n.StoreData(s[0],"data",i),this.$selection.prepend(s),this.$selection[0].classList.add("select2-selection--clearable")}},i})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=this.options.get("translations").get("search"),i=t('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=i,this.$search=i.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n());var o=e.call(this);return this._transferTabIndex(),o.append(this.$searchContainer),o},i.prototype.bind=function(t,i,o){var r=this,s=i.id+"-results",a=i.id+"-container";t.call(this,i,o),r.$search.attr("aria-describedby",a),i.on("open",(function(){r.$search.attr("aria-controls",s),r.$search.trigger("focus")})),i.on("close",(function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),i.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),i.on("disable",(function(){r.$search.prop("disabled",!0)})),i.on("focus",(function(t){r.$search.trigger("focus")})),i.on("results:focus",(function(t){t.data._resultId?r.$search.attr("aria-activedescendant",t.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var i=r.$selection.find(".select2-selection__choice").last();if(i.length>0){var o=e.GetData(i[0],"data");r.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){r.$search.val()&&t.stopPropagation()}));var l=document.documentMode,c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){c?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(c&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&r.handleSearch(t)}}))},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.resizeSearch(),n&&this.$search.trigger("focus")},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="100%";""===this.$search.attr("placeholder")&&(t=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",t)},i})),e.define("select2/selection/selectionCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("selectionCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},e})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],s=["opening","closing","selecting","unselecting","clearing"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==r.indexOf(e)){n=n||{};var i=t.Event("select2:"+e,{params:n});o.$element.trigger(i),-1!==s.indexOf(e)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AA",:"AE",:"AE",:"AE",:"AO",:"AU",:"AV",:"AV",:"AY","":"B",:"B",:"B",:"B",:"B",:"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F",:"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J",:"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M",:"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"OE",:"OI",:"OO",:"OU","":"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P",:"P","":"Q",:"Q",:"Q",:"Q",:"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"V",:"V",:"V",:"V",:"V",:"V",:"V",:"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"aa",:"ae",:"ae",:"ae",:"ao",:"au",:"av",:"av",:"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"f",:"f",:"f",:"f",:"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j",:"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"oe",:"oi",:"ou",:"oo","":"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p",:"p","":"q",:"q",:"q",:"q",:"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v",:"v",:"v",:"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"","":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=this;t(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(t){return e.item(n(t))})))},i.prototype.select=function(t){var e=this;if(t.selected=!0,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var i=[];(t=[t]).push.apply(t,n);for(var o=0;o<t.length;o++){var r=t[o].id;-1===i.indexOf(r)&&i.push(r)}e.$element.val(i),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var i=[],o=0;o<n.length;o++){var r=n[o].id;r!==t.id&&-1===i.indexOf(r)&&i.push(r)}e.$element.val(i),e.$element.trigger("input").trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},i.prototype.query=function(t,e){var i=[],o=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var e=n(this),r=o.item(e),s=o.matches(t,r);null!==s&&i.push(s)}})),e({results:i})},i.prototype.addOptions=function(t){this.$element.append(t)},i.prototype.option=function(t){var i;t.children?(i=document.createElement("optgroup")).label=t.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=t.text:i.innerText=t.text,void 0!==t.id&&(i.value=t.id),t.disabled&&(i.disabled=!0),t.selected&&(i.selected=!0),t.title&&(i.title=t.title);var o=this._normalizeItem(t);return o.element=i,e.StoreData(i,"data",o),n(i)},i.prototype.item=function(t){var i={};if(null!=(i=e.GetData(t[0],"data")))return i;var o=t[0];if("option"===o.tagName.toLowerCase())i={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if("optgroup"===o.tagName.toLowerCase()){i={text:t.prop("label"),children:[],title:t.prop("title")};for(var r=t.children("option"),s=[],a=0;a<r.length;a++){var l=n(r[a]),c=this.item(l);s.push(c)}i.children=s}return(i=this._normalizeItem(i)).element=t[0],e.StoreData(t[0],"data",i),i},i.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){this._dataToConvert=e.get("data")||[],i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype.bind=function(t,e){i.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var e=this,i=this.$element.find("option"),o=i.map((function(){return e.item(n(this)).id})).get(),r=[];function s(t){return function(){return n(this).val()==t.id}}for(var a=0;a<t.length;a++){var l=this._normalizeItem(t[a]);if(o.indexOf(l.id)>=0){var c=i.filter(s(l)),u=this.item(c),d=n.extend(!0,{},l,u),h=this.option(d);c.replaceWith(h)}else{var p=this.option(l);if(l.children){var f=this.convertToOptions(l.children);p.append(f)}r.push(p)}}return r},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var o=n.ajax(t);return o.then(e),o.fail(i),o}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function r(){var n=o.transport(o,(function(n){var o=i.processResults(n,t);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&Array.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)}),(function(){(!("status"in n)||0!==n.status&&"0"!==n.status)&&i.trigger("results:message",{message:"errorLoading"})}));i._request=n}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(t,e,n){var i=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var r=n.get("insertTag");if(void 0!==r&&(this.insertTag=r),t.call(this,e,n),Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s],l=this._normalizeItem(a),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(o,r){for(var s=o.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!t({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||c)return!r&&(o.data=s,void n(o))}if(r)return!0;var u=i.createTag(e);if(null!=u){var d=i.option(u);d.attr("data-select2-tag","true"),i.addOptions([d]),i.insertTag(s,u)}o.results=s,n(o)})):t.call(this,e,n)},e.prototype.createTag=function(t,e){if(null==e.term)return null;var n=e.term.trim();return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){var o=this;n.term=n.term||"";var r=this.tokenizer(n,this.options,(function(e){var n=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}!function(t){o.trigger("select",{data:t})}(n)}));r.term!==n.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),n.term=r.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,o){for(var r=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};a<s.length;){var c=s[a];if(-1!==r.indexOf(c)){var u=s.substr(0,a),d=l(t.extend({},n,{term:u}));null!=d?(o(d),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(){i._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,n){var i=this;this._checkIfMaximumSelected((function(){t.call(i,e,n)}))},t.prototype._checkIfMaximumSelected=function(t,e){var n=this;this.current((function(t){var i=null!=t?t.length:0;n.maximumSelectionLength>0&&i>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("translations").get("search"),o=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=o,this.$search=o.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",i()),n.prepend(o),n},e.prototype.bind=function(e,n,i){var o=this,r=n.id+"-results";e.call(this,n,i),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),n.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",r),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),n.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||o.$search.trigger("focus")})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer[0].classList.remove("select2-search--hide"):o.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.showSearch=function(t,e){return!0},e})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var o=e[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("query",(function(t){i.lastParams=t,i.loading=!0})),e.on("query:append",(function(t){i.lastParams=t,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,i){this.$dropdownParent=t(i.get("dropdownParent")||document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),i._bindContainerResultHandlers(e)})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e[0].classList.remove("select2"),e[0].classList.add("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var n=this;e.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,i){var o=this,r="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(r,(function(n){var i=e.GetData(this,"select2-scroll-position");t(this).scrollTop(i.y)})),t(window).on(r+" "+s+" "+a,(function(t){o._positionDropdown(),o._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,r="resize.select2."+i.id,s="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+r+" "+s)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),i=this.$dropdown[0].classList.contains("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=r.top,s.bottom=r.top+s.height;var a=this.$dropdown.outerHeight(!1),l=e.scrollTop(),c=e.scrollTop()+e.height(),u=l<r.top-a,d=c>r.bottom+a,h={left:r.left,top:s.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f={top:0,left:0};(t.contains(document.body,p[0])||p[0].isConnected)&&(f=p.offset()),h.top-=f.top,h.left-=f.left,n||i||(o="below"),d||!u||n?!u&&d&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(h.top=s.top-f.top-a),null!=o&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+o),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+o)),this.$dropdownContainer.css(h)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];o.children?n+=t(o.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(t){i._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=t.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/dropdown/dropdownCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("dropdownCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},e})),e.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(t){function e(){}return e.prototype.highlightFirstItem=function(e){var n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(n.length>0){var i=n.first(),o=t.GetData(i[0],"data").element;if(o&&o.getAttribute&&"true"===o.getAttribute("data-select2-tag"))return void i.trigger("mouseenter")}e.call(this)},e})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),e.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(t,e,n,i,o,r,s,a,l,c,u,d,h,p,f,g,m,v,y,b,_,x,w,S,E,A,T,k,C,D,N){function M(){this.reset()}return M.prototype.apply=function(u){if(null==(u=t.extend(!0,{},this.defaults,u)).dataAdapter&&(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=p:u.dataAdapter=h,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,g)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=c.Decorate(u.dataAdapter,m))),null==u.resultsAdapter&&(u.resultsAdapter=e,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,S)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,w)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,T)),u.tags&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,D))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=_;else{var d=c.Decorate(_,x);u.dropdownAdapter=d}0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,A)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,k)),null!=u.dropdownCssClass&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,C)),u.dropdownAdapter=c.Decorate(u.dropdownAdapter,E)}null==u.selectionAdapter&&(u.multiple?u.selectionAdapter=i:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,o)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,r)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,s)),null!=u.selectionCssClass&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),u.selectionAdapter=c.Decorate(u.selectionAdapter,l)),u.language=this._resolveLanguage(u.language),u.language.push("en");for(var N=[],M=0;M<u.language.length;M++){var j=u.language[M];-1===N.indexOf(j)&&N.push(j)}return u.language=N,u.translations=this._processTranslations(u.language,u.debug),u},M.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return d[t]||t}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(i,o){if(null==i.term||""===i.term.trim())return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),s=o.children.length-1;s>=0;s--)null==n(i,o.children[s])&&r.children.splice(s,1);return r.children.length>0?r:n(i,r)}var a=e(o.text).toUpperCase(),l=e(i.term).toUpperCase();return a.indexOf(l)>-1?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},M.prototype.applyFromElement=function(t,e){var n=t.language,i=this.defaults.language,o=e.prop("lang"),r=e.closest("[lang]").prop("lang"),s=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(r));return t.language=s,t},M.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var n;n=Array.isArray(e)?e:[e];for(var i=[],o=0;o<n.length;o++)if(i.push(n[o]),"string"==typeof n[o]&&n[o].indexOf("-")>0){var r=n[o].split("-")[0];i.push(r)}return i},M.prototype._processTranslations=function(e,n){for(var i=new u,o=0;o<e.length;o++){var r=new u,s=e[o];if("string"==typeof s)try{r=u.loadPath(s)}catch(t){try{s=this.defaults.amdLanguageBase+s,r=u.loadPath(s)}catch(t){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+s+'" could not be automatically loaded. A fallback will be used instead.')}}else r=t.isPlainObject(s)?new u(s):s;i.extend(r)}return i},M.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var o=c._convertData(i);t.extend(!0,this.defaults,o)},new M})),e.define("select2/options",["jquery","./defaults","./utils"],(function(t,e,n){function i(t,n){this.options=t,null!=n&&this.fromElement(n),null!=n&&(this.options=e.applyFromElement(this.options,n)),this.options=e.apply(this.options)}return i.prototype.fromElement=function(e){var i=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),n.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(e[0],"data",n.GetData(e[0],"select2Tags")),n.StoreData(e[0],"tags",!0)),n.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",n.GetData(e[0],"ajaxUrl")),n.StoreData(e[0],"ajax-Url",n.GetData(e[0],"ajaxUrl")));var o={};function r(t,e){return e.toUpperCase()}for(var s=0;s<e[0].attributes.length;s++){var a=e[0].attributes[s].name,l="data-";if(a.substr(0,l.length)==l){var c=a.substring(l.length),u=n.GetData(e[0],c);o[c.replace(/-([a-z])/g,r)]=u}}t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset&&(o=t.extend(!0,{},e[0].dataset,o));var d=t.extend(!0,{},n.GetData(e[0]),o);for(var h in d=n._convertData(d))i.indexOf(h)>-1||(t.isPlainObject(this.options[h])?t.extend(this.options[h],d[h]):this.options[h]=d[h]);return this},i.prototype.get=function(t){return this.options[t]},i.prototype.set=function(t,e){this.options[t]=e},i})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var o=function(t,i){null!=n.GetData(t[0],"select2")&&n.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),o.__super__.constructor.call(this);var r=t.attr("tabindex")||0;n.StoreData(t[0],"old-tabindex",r),t.attr("tabindex","-1");var s=this.options.get("dataAdapter");this.dataAdapter=new s(t,this.options);var a=this.render();this._placeContainer(a);var l=this.options.get("selectionAdapter");this.selection=new l(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var c=this.options.get("dropdownAdapter");this.dropdown=new c(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){d.trigger("selection:update",{data:t})})),t[0].classList.add("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(t[0],"select2",this),t.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var s=r.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(e){t._syncA(),t._syncS(e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerSelectionEvents=function(){var t=this,e=["toggle","focus"];this.selection.on("toggle",(function(){t.toggleDropdown()})),this.selection.on("focus",(function(e){t.focus(e)})),this.selection.on("*",(function(n,i){-1===e.indexOf(n)&&t.trigger(n,i)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){t.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){t.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){t.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){t.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.UP&&e.altKey?(t.close(e),e.preventDefault()):n===i.ENTER||n===i.TAB?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(t){var e=this;if(t.addedNodes&&t.addedNodes.length>0){for(var n=0;n<t.addedNodes.length;n++)if(t.addedNodes[n].selected)return!0}else{if(t.removedNodes&&t.removedNodes.length>0)return!0;if(Array.isArray(t))return t.some((function(t){return e._isChangeMutation(t)}))}return!1},o.prototype._syncSubtree=function(t){var e=this._isChangeMutation(t),n=this;e&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},o.prototype.trigger=function(t,e){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in i){var r=i[t],s={prevented:!1,name:t,args:e};if(n.call(this,r,s),s.prevented)return void(e.prevented=!0)}n.call(this,t,e)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var e=t[0];Array.isArray(e)&&(e=e.map((function(t){return t.toString()}))),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,n,i,o){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend(!0,{},e);new n(t(this),i)})),this;if("string"==typeof e){var i,s=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=o.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=t[e].apply(t,s)})),r.indexOf(e)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),{define:e.define,require:e.require};var n,i,o}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}.apply(e,i))||(t.exports=o)},346:(t,e,n)=>{"use strict";var i=n(665),o=n(272);function r(t){return/\.js(\?.*)?$/i.test(t)}function s(t,e,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(e="FluidR3_GM"===e?e:"MusyngKite")+"/"+t+"-"+(n="ogg"===n?n:"mp3")+".js"}var a=n(975);a.instrument=function t(e,n,a){if(1===arguments.length)return function(n,i){return t(e,n,i)};var l=a||{},c=l.isSoundfontURL||r,u=l.nameToUrl||s,d=c(n)?n:u(n,l.soundfont,l.format);return i(e,d,{only:l.only||l.notes}).then((function(t){var i=o(e,t,l).connect(l.destination?l.destination:e.destination);return i.url=d,i.name=n,i}))},a.nameToUrl=s,t.exports&&(t.exports=a),"undefined"!=typeof window&&(window.Soundfont=a)},975:(t,e,n)=>{"use strict";var i=n(681);function o(t,e){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof o))return new o(t);this.nameToUrl=e||o.nameToUrl,this.ctx=t,this.instruments={},this.promises=[]}function r(t,e){return e=e||{},function(n,o,r,s){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var a=n>0&&n<129?+n:i.midi(n),l=a?i.midiToFreq(a,440):null;if(l){r=r||.2;var c=(s=s||{}).destination||e.destination||t.destination,u=s.vcoType||e.vcoType||"sine",d=s.gain||e.gain||.4,h=t.createOscillator();h.type=u,h.frequency.value=l;var p=t.createGain();return p.gain.value=d,h.connect(p),p.connect(c),h.start(o),r>0&&h.stop(o+r),h}}}o.prototype.onready=function(t){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(t)},o.prototype.instrument=function(t,e){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n=this.ctx;if((t=t||"default")in this.instruments)return this.instruments[t];var i={name:t,play:r(n,e)};if(this.instruments[t]=i,"default"!==t){var s=o.instrument(n,t,e).then((function(t){return i.play=t.play,i}));this.promises.push(s),i.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),s.then(t)}}else i.onready=function(t){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),t()};return i},o.loadBuffers=function(t,e,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),o.instrument(t,e,n).then((function(t){return t.buffers}))},o.noteToMidi=i.midi,t.exports=o}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(974)})();
//# sourceMappingURL=app.js.map?id=a3d2f34354e362c19528